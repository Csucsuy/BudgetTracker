import { Start as fa } from "./WebSharper.Core.JavaScript/Runtime.js"
import { Lazy as fb, Create as fc, GetOptional as fd, SetOptional as fe, OnLoad as ff } from "./WebSharper.Core.JavaScript/Runtime.js"
function a(fg){ return"Dispose"in fg;}
function b(){ const fg=c();bv("");ba.RunById("main", fg);}
function c(){ const fg=m.Create_1(n);const fh=m.Create_1(q);const fi=m.Create_1("Entertainment");const fj=m.Create_1("");const fk=m.Create_1(q);const fl=m.Create_1("Entertainment");const fm=m.Create_1("");const fn=(fo, fp) => ba.Element("li", [bW("class", bZ((fq) => w(fq, fo)?"active":"", fg.View))], [ba.Element("a", [bX.HandlerImpl("click", () =>() => { if(d()==null)null;else { const fq=d().$0;if(fq&&typeof fq.destroy==="function")fq.destroy();e(null);} return fg.Set(fo);}), bX.Create("style", "cursor: pointer;")], [ba.TextNode(fp)])]);return ba.Element("div", [bX.Create("style", "display: flex; height: 100vh;")], [ba.Element("div", [bX.Create("style", "width: 200px; background-color: #f5f8fa; display: flex; flex-direction: column; justify-content: space-between; padding: 20px;")], [ba.Element("div", [], [ba.Element("h2", [bX.Create("style", "margin: 0; font-size: 18px;")], [ba.TextNode("Budget Tracker")]), ba.Element("p", [bX.Create("style", "margin: 5px 0; font-size: 14px; color: #666;")], [ba.TextNode("for better savings!")])]), ba.Element("ul", [bX.Create("style", "list-style: none; padding: 0; flex-grow: 1;")], [fn(n, "Home"), fn(o, "Transactions"), fn(p, "Analytics")]), ba.Element("div", [], [ba.Element("p", [bX.Create("style", "margin: 0; font-size: 12px; color: #888;")], [ba.TextNode("Owner: Patrik Grasics")])])]), ba.Element("div", [bX.Create("style", "flex-grow: 1; padding: 20px; overflow-y: auto;")], [ba.BindView((fo) => { if(fo.$==1)return ba.Element("div", [], [ba.Element("h1", [], [ba.TextNode("Transactions")]), ba.Element("div", [bX.Create("style", "margin-bottom: 20px;")], [ba.Element("select", [bX.HandlerImpl("change", (fx) =>() => fh.Set(fx.value=="Income"?q:r))], [ba.Element("option", [bX.Create("value", "Income")], [ba.TextNode("Income")]), ba.Element("option", [bX.Create("value", "Expense")], [ba.TextNode("Expense")])]), ba.Element("select", [bX.HandlerImpl("change", (fx) =>() => fi.Set(fx.value))], [ba.Element("option", [bX.Create("value", "Entertainment")], [ba.TextNode("Entertainment")]), ba.Element("option", [bX.Create("value", "Food")], [ba.TextNode("Food")]), ba.Element("option", [bX.Create("value", "Salary")], [ba.TextNode("Salary")]), ba.Element("option", [bX.Create("value", "Transport")], [ba.TextNode("Transport")]), ba.Element("option", [bX.Create("value", "Bills")], [ba.TextNode("Bills")])]), ba.Element("input", [bX.Create("placeholder", "Amount (Ft)"), bX.Create("value", fj.Get()), bX.HandlerImpl("input", (fx) =>() => fj.Set(fx.value)), bX.Create("type", "number"), bX.Create("step", "1")], []), ba.Element("button", [bX.HandlerImpl("click", () =>() => { const fx=fj.Get()==null?"":fj.Get();const fy=parseInt(fx, globalThis.$radix);if(!isNaN(fy)&&!(fx==null)&&fx.length>0){ const fz=J(h(), fh.Get(), fi.Get(), fy);f().Append(fz);g(h()+1);return fj.Set("");} else return alert("Invalid amount! Please enter a valid integer (e.g., 1234).");})], [ba.TextNode("Add")])]), ba.Element("table", [bX.Create("style", "width: 100%; border-collapse: collapse;")], [ba.Element("thead", [], [ba.Element("tr", [], [ba.Element("th", [bX.Create("style", "border: 1px solid #ddd; padding: 8px;")], [ba.TextNode("Type")]), ba.Element("th", [bX.Create("style", "border: 1px solid #ddd; padding: 8px;")], [ba.TextNode("Category")]), ba.Element("th", [bX.Create("style", "border: 1px solid #ddd; padding: 8px;")], [ba.TextNode("Amount (Ft)")]), ba.Element("th", [bX.Create("style", "border: 1px solid #ddd; padding: 8px;")], [ba.TextNode("Actions")])])]), ba.Element("tbody", [], [ba.Convert((fx) => ba.Element("tr", [], [ba.Element("td", [bX.Create("style", "border: 1px solid #ddd; padding: 8px;")], [ba.TextNode(fx.Type.$==1?"Expense":"Income")]), ba.Element("td", [bX.Create("style", "border: 1px solid #ddd; padding: 8px;")], [ba.TextNode(fx.Category)]), ba.Element("td", [bX.Create("style", "border: 1px solid #ddd; padding: 8px;")], [ba.TextNode(String(fx.Amount))]), ba.Element("td", [bX.Create("style", "border: 1px solid #ddd; padding: 8px;")], [ba.Element("button", [bX.Create("style", "background-color: #f44336; color: white; border: none; padding: 5px 10px; cursor: pointer; border-radius: 3px;"), bX.HandlerImpl("click", () =>() => f().RemoveByKey(fx.Id))], [ba.TextNode("Delete")])])]), f().v)])]), ba.Element("div", [bX.Create("style", "margin-top: 20px;")], [ba.BindView((fx) => ba.Element("div", [], [ba.Element("p", [], [ba.TextNode("Total transactions: "+String(L(fx))+" (Income: "+String(L(K((fy) => fy.Type.$===0, fx)))+", Expense: "+String(L(K((fy) => fy.Type.$===1, fx)))+")")])]), f().v)]), ba.Element("div", [bX.Create("style", "margin-top: 20px; padding: 15px; background-color: #f5f8fa; border-radius: 5px;")], [ba.Element("h3", [], [ba.TextNode("Summary")]), ba.BindView((fx) => { const fy=M((fB) => fB.Amount, K((fB) => fB.Type.$===0, fx));const fz=M((fB) => fB.Amount, K((fB) => fB.Type.$===1, fx));const fA=fy-fz;return ba.Element("div", [], [ba.Element("p", [bX.Create("style", "font-weight: bold;")], [ba.TextNode("Total Income: "), ba.Element("span", [bX.Create("style", "color: green;")], [ba.TextNode(String(fy)+" Ft")])]), ba.Element("p", [bX.Create("style", "font-weight: bold;")], [ba.TextNode("Total Expense: "), ba.Element("span", [bX.Create("style", "color: red;")], [ba.TextNode(String(fz)+" Ft")])]), ba.Element("p", [bX.Create("style", "font-weight: bold;")], [ba.TextNode("Balance: "), ba.Element("span", [bX.Create("style", fA>=0?"color: green;":"color: red;")], [ba.TextNode(String(fA)+" Ft")])])]);}, f().v)])]);else if(fo.$==2){ let fp=ba.Element("h1", [], [ba.TextNode("Analytics")]);const fq=bh(P(O((fx) => fx.Category, f().u0076ar.Get())));const fr=M((fx) => fx.Amount, K((fx) => fx.Type.$===0, f().u0076ar.Get()));const fs=M((fx) => fx.Amount, K((fx) => fx.Type.$===1, f().u0076ar.Get()));const ft=bg((fx) => { const fy=M((fz) => fz.Amount, K((fz) => fz.Type.$===0&&fz.Category==fx, f().u0076ar.Get()));return fr>0?fy/fr*100:0;}, fq);const fu=bg((fx) => { const fy=M((fz) => fz.Amount, K((fz) => fz.Type.$===1&&fz.Category==fx, f().u0076ar.Get()));return fs>0?fy/fs*100:0;}, fq);let fv=ba.Element("div", [], [ba.Element("h3", [], [ba.TextNode("Income vs Expense by Category (Percentage Radar Chart)")]), ba.Element("div", [bX.Create("id", "chartContainer")], [ba.Element("canvas", [bX.Create("id", "radarChartCanvas"), bX.Create("width", "450"), bX.Create("height", "300"), bX.OnAfterRenderImpl((fx) => { if(d()==null){ } else { const fy=d().$0;if(fy&&typeof fy.destroy==="function")fy.destroy();} e(bb(new globalThis.Chart(fx.getContext("2d"), {type:"radar", data:{labels:fq, datasets:[{label:"Income (% of Total Income)", backgroundColor:"rgba(54, 162, 235, 0.2)", borderColor:"rgba(54, 162, 235, 1)", pointBackgroundColor:"rgba(54, 162, 235, 1)", data:ft}, {label:"Expense (% of Total Expense)", backgroundColor:"rgba(255, 99, 132, 0.2)", borderColor:"rgba(255, 99, 132, 1)", pointBackgroundColor:"rgba(255, 99, 132, 1)", data:fu}]}, options:{responsive:true, scales:{r:{beginAtZero:true, max:100, ticks:{stepSize:20, callback:(fz) => fz+"%"}}}, plugins:{tooltip:{callbacks:{label:(fz) => fz.dataset.label+": "+fz.parsed.r.toFixed(2)+"%"}}}}})));})], [])])]);let fw=[fp, fv, ba.BindView((fx) => { if(N(fx))return ba.Element("div", [bX.Create("style", "margin-top: 20px; color: #888;")], [ba.TextNode("No transactions yet. Add some transactions to see analytics.")]);else { const fy=u0035(P(O((fz) => fz.Category, fx)));return ba.Element("div", [bX.Create("style", "margin-top: 30px;")], [ba.Element("h3", [], [ba.TextNode("Category Breakdown")]), ba.Element("table", [bX.Create("style", "width: 100%; border-collapse: collapse;")], [ba.Element("thead", [], [ba.Element("tr", [], [ba.Element("th", [bX.Create("style", "border: 1px solid #ddd; padding: 8px; text-align: left;")], [ba.TextNode("Category")]), ba.Element("th", [bX.Create("style", "border: 1px solid #ddd; padding: 8px; text-align: right;")], [ba.TextNode("Income (Ft)")]), ba.Element("th", [bX.Create("style", "border: 1px solid #ddd; padding: 8px; text-align: right;")], [ba.TextNode("Expense (Ft)")]), ba.Element("th", [bX.Create("style", "border: 1px solid #ddd; padding: 8px; text-align: right;")], [ba.TextNode("Balance (Ft)")])])]), ba.Element("tbody", [], [ba.Concat(u0034((fz) => { const fA=M((fD) => fD.Amount, K((fD) => fD.Type.$===0&&fD.Category==fz, fx));const fB=M((fD) => fD.Amount, K((fD) => fD.Type.$===1&&fD.Category==fz, fx));const fC=fA-fB;return ba.Element("tr", [], [ba.Element("td", [bX.Create("style", "border: 1px solid #ddd; padding: 8px;")], [ba.TextNode(fz)]), ba.Element("td", [bX.Create("style", "border: 1px solid #ddd; padding: 8px; text-align: right;")], [ba.TextNode(String(fA))]), ba.Element("td", [bX.Create("style", "border: 1px solid #ddd; padding: 8px; text-align: right;")], [ba.TextNode(String(fB))]), ba.Element("td", [bX.Create("style", "border: 1px solid #ddd; padding: 8px; text-align: right; font-weight: bold; color: "+$(fC>=0?"green":"red"))], [ba.TextNode(String(fC))])]);}, fy))])])]);} }, f().v)];return ba.Element("div", [], fw);} else return ba.Element("div", [], [ba.Element("h1", [], [ba.TextNode("Personal Budget Tracker")]), ba.Element("p", [bX.Create("style", "font-style: italic;")], [ba.TextNode("Take control of your finances with this F#-powered Single-Page Application built using WebSharper.")]), ba.Element("p", [], [ba.TextNode("The Personal Budget Tracker is a simple Single-Page Application built with F# and WebSharper to help you manage your finances."), ba.Element("br", [], []), ba.TextNode("This application allows you to track your income and expenses, visualize your financial data, and gain insights into your spending habits."), ba.Element("br", [], []), ba.TextNode("Track your income and expenses effortlessly, gain insights through analytics, and make informed financial decisions to achieve better savings.")]), ba.Element("div", [bX.Create("style", "margin-top: 20px; padding: 15px; background-color: #f5f8fa; border-radius: 5px;")], [ba.Element("h3", [], [ba.TextNode("Financial Snapshot")]), ba.BindView((fx) => { if(N(fx))return ba.Element("p", [bX.Create("style", "color: #888;")], [ba.TextNode("No transactions yet. Add some to see your financial overview.")]);else { const fy=M((fB) => fB.Amount, K((fB) => fB.Type.$===0, fx));const fz=M((fB) => fB.Amount, K((fB) => fB.Type.$===1, fx));const fA=fy-fz;return ba.Element("div", [], [ba.Element("p", [bX.Create("style", "font-weight: bold;")], [ba.TextNode("Total Income: "), ba.Element("span", [bX.Create("style", "color: green;")], [ba.TextNode(String(fy)+" Ft")])]), ba.Element("p", [bX.Create("style", "font-weight: bold;")], [ba.TextNode("Total Expense: "), ba.Element("span", [bX.Create("style", "color: red;")], [ba.TextNode(String(fz)+" Ft")])]), ba.Element("p", [bX.Create("style", "font-weight: bold;")], [ba.TextNode("Balance: "), ba.Element("span", [bX.Create("style", fA>=0?"color: green;":"color: red;")], [ba.TextNode(String(fA)+" Ft")])])]);} }, f().v)]), ba.Element("div", [bX.Create("style", "margin-top: 20px;")], [ba.Element("h3", [], [ba.TextNode("Quick Add Transaction")]), ba.Element("div", [bX.Create("style", "display: flex; gap: 10px; align-items: center;")], [ba.Element("select", [bX.HandlerImpl("change", (fx) =>() => fk.Set(fx.value=="Income"?q:r))], [ba.Element("option", [bX.Create("value", "Income")], [ba.TextNode("Income")]), ba.Element("option", [bX.Create("value", "Expense")], [ba.TextNode("Expense")])]), ba.Element("select", [bX.HandlerImpl("change", (fx) =>() => fl.Set(fx.value))], [ba.Element("option", [bX.Create("value", "Entertainment")], [ba.TextNode("Entertainment")]), ba.Element("option", [bX.Create("value", "Food")], [ba.TextNode("Food")]), ba.Element("option", [bX.Create("value", "Salary")], [ba.TextNode("Salary")]), ba.Element("option", [bX.Create("value", "Transport")], [ba.TextNode("Transport")]), ba.Element("option", [bX.Create("value", "Bills")], [ba.TextNode("Bills")])]), ba.Element("input", [bX.Create("placeholder", "Amount (Ft)"), bX.Create("value", fm.Get()), bX.HandlerImpl("input", (fx) =>() => fm.Set(fx.value)), bX.Create("type", "number"), bX.Create("step", "1"), bX.Create("style", "width: 100px;")], []), ba.Element("button", [bX.HandlerImpl("click", () =>() => { const fx=fm.Get()==null?"":fm.Get();const fy=parseInt(fx, globalThis.$radix);if(!isNaN(fy)&&!(fx==null)&&fx.length>0){ const fz=J(h(), fk.Get(), fl.Get(), fy);f().Append(fz);g(h()+1);return fm.Set("");} else return alert("Invalid amount! Please enter a valid integer (e.g., 1234).");}), bX.Create("style", "background-color: #4CAF50; color: white; border: none; padding: 8px 16px; cursor: pointer; border-radius: 3px;")], [ba.TextNode("Add")])])])]);}, fg.View)])]);}
function d(){ return bY.currentChart;}
function e(fg){ bY.currentChart=fg;}
function f(){ return bY.Transactions;}
function g(fg){ bY.nextId=fg;}
function h(){ return bY.nextId;}
function i(fg){ throw new Error(fg);}
function j(fg){ return[fg.K, fg.V];}
function k(fg, fh){ const fi=1+fh-fg;return fi<=0?[]:Y(fi, (fj) => fj+fg);}
class l { Equals(fg){ return this===fg;} GetHashCode(){ return -1;} }
let m=fb((fg) => class fh extends l { static { m=fg(this);} static Create_1(fi){ return new bI(false, {s:cl(fi, [])}, fi);} static { } });
let n={$:0};
let o={$:1};
let p={$:2};
let q={$:0};
let r={$:1};
function s(fg){ let fh=[];let fi;for(var fj in fg)fh.push(fg[fj]);return fh;}
class t extends l { }
class u extends l { }
class v { }
function w(fg, fh){ if(fg===fh)return true;else { const fi=typeof fg;if(fi=="object"){ if(fg===null||fg===void 0||fh===null||fh===void 0||!w(typeof fh, "object"))return false;else if("Equals"in fg)return fg.Equals(fh);else if("Equals"in fh)return false;else if(fg instanceof Array&&fh instanceof Array)return x(fg, fh);else if(fg instanceof Date&&fh instanceof Date)return y(fg, fh);else { const fj=[true];let fk;for(var fm in fg)if(((fn) => { fj[0]=!fg.hasOwnProperty(fn)||fh.hasOwnProperty(fn)&&w(fg[fn], fh[fn]);return!fj[0];})(fm))break;if(fj[0]){ let fl;for(var fn in fh)if(((fo) => { fj[0]=!fh.hasOwnProperty(fo)||fg.hasOwnProperty(fo);return!fj[0];})(fn))break;} return fj[0];} } else return fi=="function"&&("$Func"in fg?fg.$Func===fh.$Func&&fg.$Target===fh.$Target:"$Invokes"in fg&&"$Invokes"in fh&&x(fg.$Invokes, fh.$Invokes));} }
function x(fg, fh){ let fi;let fj;if(bd(fg)===bd(fh)){ fi=true;fj=0;while(fi&&fj<bd(fg)){!w(bc(fg, fj), bc(fh, fj))?fi=false:void 0;fj=fj+1;} return fi;} else return false;}
function y(fg, fh){ return fg.getTime()===fh.getTime();}
function z(fg){ const fh=typeof fg;return fh=="function"?0:fh=="boolean"?fg?1:0:fh=="number"?fg:fh=="string"?A(fg):fh=="object"?fg==null?0:fg instanceof Array?B(fg):C(fg):0;}
function A(fg){ let fh;if(fg===null)return 0;else { fh=5381;for(let fi=0, fj=fg.length-1;fi<=fj;fi++)fh=D(fh, fg[fi].charCodeAt());return fh;} }
function B(fg){ let fh=-34948909;for(let fi=0, fj=bd(fg)-1;fi<=fj;fi++)fh=D(fh, z(bc(fg, fi)));return fh;}
function C(fg){ if("GetHashCode"in fg)return fg.GetHashCode();else { const fh=[0];let fi;for(var fj in fg)if(((fk) => { fh[0]=D(D(fh[0], A(fk)), z(fg[fk]));return false;})(fj))break;return fh[0];} }
function D(fg, fh){ return(fg<<5)+fg+fh;}
function E(fg, fh){ if(fg===fh)return 0;else { const fi=typeof fg;switch(fi=="function"?1:fi=="boolean"?2:fi=="number"?2:fi=="string"?2:fi=="object"?3:0){ case 0:return typeof fh=="undefined"?0:-1;case 1:return i("Cannot compare function values.");case 2:return fg<fh?-1:1;case 3:if(fg===null)return -1;else if(fh===null)return 1;else if("CompareTo"in fg)return fg.CompareTo(fh);else if("CompareTo0"in fg)return fg.CompareTo0(fh);else if(fg instanceof Array&&fh instanceof Array)return F(fg, fh);else if(fg instanceof Date&&fh instanceof Date)return G(fg, fh);else { const fj=[0];let fk;for(var fm in fg)if(((fn) =>!fg.hasOwnProperty(fn)?false:!fh.hasOwnProperty(fn)?(fj[0]=1,true):(fj[0]=E(fg[fn], fh[fn]),fj[0]!==0))(fm))break;if(fj[0]===0){ let fl;for(var fn in fh)if(((fo) =>!fh.hasOwnProperty(fo)?false:!fg.hasOwnProperty(fo)&&(fj[0]=-1,true))(fn))break;} return fj[0];} break;} } }
function F(fg, fh){ let fi;let fj;if(bd(fg)<bd(fh))return -1;else if(bd(fg)>bd(fh))return 1;else { fi=0;fj=0;while(fi===0&&fj<bd(fg)){ fi=E(bc(fg, fj), bc(fh, fj));fj=fj+1;} return fi;} }
function G(fg, fh){ return E(fg.getTime(), fh.getTime());}
function H(fg){ const fh={};const fi=b9(fg);try { while(fi.MoveNext()){ const fj=fi.Current;fh[fj[0]]=fj[1];} } finally { if(typeof fi=="object"&&a(fi))fi.Dispose();} return fh;}
class I extends l { key;u0076ar;storage;v;it;RemoveByKey(fg){ this.u0076ar.Set(this.storage.SRemoveIf((fh) => w(this.key(fh), fg), this.u0076ar.Get()));this.ObsoleteKey(fg);} Append(fg){ const fh=this.u0076ar.Get();const fi=this.key(fg);const fj=bi((fk) => w(this.key(fk), fi), fh);if(fj!=null&&fj.$==1)this.u0076ar.Set(this.storage.SSetAt(fj.$0, fg, fh));else this.u0076ar.Set(this.storage.SAppend(fg, fh));this.ObsoleteKey(fi);} ObsoleteKey(fg){ let fh;const fi=(fh=null,[this.it.TryGetValue(fg, {get:() => fh, set:(fj) => { fh=fj;}}), fh]);if(fi[0]){ cT(fi[1]);this.it.RemoveKey(fg);} } GetEnumerator(){ return b9(this.u0076ar.Get());} GetEnumerator0(){ return ca(this.u0076ar.Get());} static New(fg, fh){ return new this("New", fg, fh);} static New_3(fg, fh, fi){ return new this("New_3", fg, fh, fi);} constructor(fg, fh, fi, fj){ let fk;let fl;if(fg=="New"){ fk=fh;fl=fi;fg="New_3";fh=fk;fi=m.Create_1(bh(Q(fk, fl.SInit())));fj=fl;} if(fg=="New_3"){ const fm=fh;const fn=fi;const fo=fj;super();this.key=fm;this.u0076ar=fn;this.storage=fo;this.v=bZ((fp) => fp.slice(), this.u0076ar.View);this.it=new ch("New_5");} } }
function J(fg, fh, fi, fj){ return{Id:fg, Type:fh, Category:fi, Amount:fj};}
function K(fg, fh){ return{GetEnumerator:() => { const fi=b9(fh);return new cb(null, null, (fj) => { let fk=fi.MoveNext();let fl;let fm=false;while(fk){ fl=fi.Current;fg(fl)?(fj.c=fl,fm=true,fk=false):!fi.MoveNext()?fk=false:void 0;} return fm;}, () => { fi.Dispose();});}};}
function L(fg){ let fh;if(fg instanceof Array||w(typeof fg, "string"))return fg.length;else { fh=0;const fi=b9(fg);try { while(fi.MoveNext())fh=fh+1;return fh;} finally { if(typeof fi=="object"&&a(fi))fi.Dispose();} } }
function M(fg, fh){ let fi=0;const fj=b9(fh);try { while(fj.MoveNext())fi=fi+fg(fj.Current);} finally { if(typeof fj=="object"&&a(fj))fj.Dispose();} return fi;}
function N(fg){ const fh=b9(fg);try { return!fh.MoveNext();} finally { if(typeof fh=="object"&&a(fh))fh.Dispose();} }
function O(fg, fh){ return{GetEnumerator:() => { const fi=b9(fh);return new cb(null, null, (fj) => fi.MoveNext()&&(fj.c=fg(fi.Current),true), () => { fi.Dispose();});}};}
function P(fg){ return Q((fh) => fh, fg);}
function Q(fg, fh){ return{GetEnumerator:() => { const fi=b9(fh);const fj=new cU("New_3");return new cb(null, null, (fk) => { let fl;let fm;if(fi.MoveNext()){ fl=fi.Current;fm=fj.SAdd(fg(fl));while(!fm&&fi.MoveNext()){ fl=fi.Current;fm=fj.SAdd(fg(fl));} return fm&&(fk.c=fl,true);} else return false;}, () => { fi.Dispose();});}};}
function R(fg){ const fh=b9(fg);try { return fh.MoveNext()?fh.Current:dr();} finally { if(typeof fh=="object"&&a(fh))fh.Dispose();} }
function S(fg, fh, fi){ let fj=fh;const fk=b9(fi);try { while(fk.MoveNext())fj=fg(fj, fk.Current);return fj;} finally { if(typeof fk=="object"&&a(fk))fk.Dispose();} }
function T(fg, fh){ const fi=b9(fh);try { while(fi.MoveNext())fg(fi.Current);} finally { if(typeof fi=="object"&&a(fi))fi.Dispose();} }
function U(fg){ return{GetEnumerator:() => b9(fg())};}
function V(fg, fh){ return X(O(fg, fh));}
function W(fg){ const fh=b9(fg);try { if(!fh.MoveNext())Z();let fi=fh.Current;while(fh.MoveNext()){ const fj=fh.Current;if(E(fj, fi)===1)fi=fj;} return fi;} finally { if(typeof fh=="object"&&a(fh))fh.Dispose();} }
function X(fg){ return{GetEnumerator:() => { const fh=b9(fg);function fi(fj){ while(true){ const fk=fj.s;if(w(fk, null)){ if(fh.MoveNext()){ fj.s=b9(fh.Current);fj=fj;} else { fh.Dispose();return false;} } else if(fk.MoveNext()){ fj.c=fk.Current;return true;} else { fj.Dispose();fj.s=null;fj=fj;} } } return new cb(null, null, fi, (fj) => { const fk=fj.s;if(!w(fk, null))fk.Dispose();if(!w(fh, null))fh.Dispose();});}};}
function Y(fg, fh){ return u0030(fg, u0031(fh));}
function Z(){ return i("The input sequence was empty.");}
function u0030(fg, fh){ fg<0?dt():void 0;return{GetEnumerator:() => { const fi=[b9(fh)];return new cb(0, null, (fj) => { fj.s=fj.s+1;if(fj.s>fg)return false;else { const fk=fi[0];return w(fk, null)?dr():fk.MoveNext()?(fj.c=fk.Current,fj.s===fg?(fk.Dispose(),fi[0]=null):void 0,true):(fk.Dispose(),fi[0]=null,dr());} }, () => { const fj=fi[0];if(!w(fj, null))fj.Dispose();});}};}
function u0031(fg){ return{GetEnumerator:() => new cb(0, null, (fh) => { fh.c=fg(fh.s);fh.s=fh.s+1;return true;}, void 0)};}
function u0032(fg, fh){ return!u0033((fi) =>!fg(fi), fh);}
function u0033(fg, fh){ const fi=b9(fh);try { let fj=false;while(!fj&&fi.MoveNext())fj=fg(fi.Current);return fj;} finally { if(typeof fi=="object"&&a(fi))fi.Dispose();} }
function u0034(fg, fh){ let fi;let fj;let fk;if(fh.$==0)return fh;else { const fl=fc(cc, {$:1});fi=fl;fj=fh;fk=true;while(fk){ fi.$0=fg(fj.$0);fj=fj.$1;if(fj.$==0)fk=false;else { const fm=fc(cc, {$:1});fi=(fi.$1=fm,fm);} } fi.$1=cc.Empty;return fl;} }
function u0035(fg){ if(fg instanceof cc)return fg;else if(fg instanceof Array)return u0036(fg);else { const fh=b9(fg);try { let fi;let fj=fh.MoveNext();if(!fj)return cc.Empty;else { const fk=fc(cc, {$:1});fi=fk;while(fj){ fi.$0=fh.Current;if(fh.MoveNext()){ const fl=fc(cc, {$:1});fi=(fi.$1=fl,fl);} else fj=false;} fi.$1=cc.Empty;return fk;} } finally { if(typeof fh=="object"&&a(fh))fh.Dispose();} } }
function u0036(fg){ let fh=cc.Empty;for(let fi=bd(fg)-1, fj=0;fi>=fj;fi--)fh=cc.Cons(bc(fg, fi), fh);return fh;}
function u0037(fg){ return fg.$==1?fg.$0:u0039();}
function u0038(fg){ return fg.$==1?fg.$1:u0039();}
function u0039(){ return i("The input list was empty.");}
function $(fg){ return fg==null?"":fg;}
class ba extends l { docNode;updates;static Concat(fg){ return ce(ba.Empty, ba.Append, cd(fg));} static RunById(fg, fh){ const fi=globalThis.document.getElementById(fg);if(w(fi, null))i("invalid id: "+fg);else ba.Run(fi, fh);} static TextNode(fg){ return ba.Mk(cP(globalThis.document.createTextNode(fg)), b0());} static BindView(fg, fh){ return ba.EmbedView(bZ(fg, fh));} static Append(fg, fh){ return ba.Mk(cQ(fg.docNode, fh.docNode), b2(fg.updates, fh.updates));} static get Empty(){ return ba.Mk(null, b0());} static Run(fg, fh){ cX(fg, fh.docNode);ba.RunInPlace(false, fg, fh);} static Element(fg, fh, fi){ const fj=bX.Concat(fh);const fk=ba.Concat(fi);return dF.New(globalThis.document.createElement(fg), fj, fk);} static Mk(fg, fh){ return new ba(fg, fh);} static EmbedView(fg){ const fh=cY();return ba.Mk(cR(fh), bZ(() => { }, b3((fi) => { cZ(fh, fi.docNode);return fi.updates;}, fg)));} static Convert(fg, fh){ return ba.Flatten(b4(fg, fh));} static RunInPlace(fg, fh, fi){ const fj=c1(fh, fi.docNode);b5(dv()||dC()?dD(c2(fg, fj, fi.docNode)):() => { c3(fg, fj, fi.docNode);}, fi.updates);} static Flatten(fg){ return ba.EmbedView(bZ(ba.Concat, fg));} constructor(fg, fh){ super();this.docNode=fg;this.updates=fh;} }
function bb(fg){ return{$:1, $0:fg};}
function bc(fg, fh){ be(fg, fh);return fg[fh];}
function bd(fg){ return fg.dims===2?fg.length*fg.length:fg.length;}
function be(fg, fh){ if(fh<0||fh>=fg.length)i("Index was outside the bounds of the array.");}
function bf(fg, fh, fi){ be(fg, fh);fg[fh]=fi;}
function bg(fg, fh){ const fi=new Array(fh.length);for(let fj=0, fk=fh.length-1;fj<=fk;fj++)fi[fj]=fg(fh[fj]);return fi;}
function bh(fg){ if(fg instanceof Array)return fg.slice();else if(fg instanceof cc)return bj(fg);else { const fh=[];const fi=b9(fg);try { while(fi.MoveNext())fh.push(fi.Current);return fh;} finally { if(typeof fi=="object"&&a(fi))fi.Dispose();} } }
function bi(fg, fh){ let fi=null;let fj=0;while(fj<fh.length&&fi==null){ fg(fh[fj])?fi=bb(fj):void 0;fj=fj+1;} return fi;}
function bj(fg){ const fh=[];let fi=fg;while(!(fi.$==0)){ fh.push(u0037(fi));fi=u0038(fi);} return fh;}
function bk(fg, fh){ let fi=null;let fj=0;while(fj<fh.length&&fi==null){ const fk=fg(fh[fj]);if(fk!=null&&fk.$==1)fi=fk;fj=fj+1;} return fi;}
function bl(fg, fh){ let fi=false;let fj=0;while(!fi&&fj<bd(fh))if(fg(fh[fj]))fi=true;else fj=fj+1;return fi;}
function bm(fg, fh){ const fi=[];for(let fj=0, fk=fh.length-1;fj<=fk;fj++)if(fg(fh[fj]))fi.push(fh[fj]);return fi;}
function bn(fg, fh){ for(let fi=0, fj=fh.length-1;fi<=fj;fi++)fg(fh[fi]);}
function bo(fg, fh, fi){ let fj=fi;const fk=fh.length;for(let fl=1, fm=fk;fl<=fm;fl++)fj=fg(fh[fk-fl], fj);return fj;}
function bp(fg){ return Array.prototype.concat.apply([], bh(fg));}
function bq(fg, fh){ const fi=bk(fg, fh);return fi==null?i("KeyNotFoundException"):fi.$0;}
function br(fg, fh){ const fi=[];for(let fk=0, fl=fh.length-1;fk<=fl;fk++){ const fj=fg(fh[fk]);if(fj==null){ } else fi.push(fj.$0);} return fi;}
function bs(fg, fh){ const fi=new Array(fg);for(let fj=0, fk=fg-1;fj<=fk;fj++)fi[fj]=fh;return fi;}
function bt(fg, fh){ if(fg<0)i("Negative size given.");else null;const fi=new Array(fg);for(let fj=0, fk=fg-1;fj<=fk;fj++)fi[fj]=fh(fj);return fi;}
function bu(fg, fh){ let fi=true;let fj=0;while(fi&&fj<bd(fh))if(fg(fh[fj]))fj=fj+1;else fi=false;return fi;}
function bv(fg){!bw()?(bx(true),by(globalThis.document.body, "")):void 0;bz().set_Item(fg, bA(""));}
function bw(){ return cV.LocalTemplatesLoaded;}
function bx(fg){ cV.LocalTemplatesLoaded=fg;}
function by(fg, fh){ const fi=bA(fh);const fj=new ch("New_5");const fk=fg.querySelectorAll("[ws-template]");for(let fw=0, fx=fk.length-1;fw<=fx;fw++){ const fl=fk[fw];const fm=fl.getAttribute("ws-template").toLowerCase();fl.removeAttribute("ws-template");fj.set_Item(fm, bB(fl));} const fn=fg.querySelectorAll("[ws-children-template]");for(let fy=0, fz=fn.length-1;fy<=fz;fy++){ const fo=fn[fy];const fp=fo.getAttribute("ws-children-template").toLowerCase();fo.removeAttribute("ws-children-template");fj.set_Item(fp, bC(fo));} const fq=fg.querySelectorAll("template[id]");for(let fA=0, fB=fq.length-1;fA<=fB;fA++){ const fr=fq[fA];fj.set_Item(fr.getAttribute("id").toLowerCase(), bD(fr));} const fs=fg.querySelectorAll("template[name]");for(let fC=0, fD=fs.length-1;fC<=fD;fC++){ const ft=fs[fC];fj.set_Item(ft.getAttribute("name").toLowerCase(), bD(ft));} const fu=new cU("New_3");function fv(fE){ if(!fi.ContainsKey(fE)){ let fF;const fG=(fF=null,[fj.TryGetValue(fE, {get:() => fF, set:(fH) => { fF=fH;}}), fF]);if(fG[0]){ fu.SAdd(fE);fj.RemoveKey(fE);bE(fh, bb(fE), fG[1], bb(fv));} else console.warn(fu.Contains(fE)?"Encountered loop when instantiating "+fE:"Local template does not exist: "+fE);} } while(fj.count>0)fv(R(fj.Keys));}
function bz(){ return cV.LoadedTemplates;}
function bA(fg){ let fh;const fi=(fh=null,[bz().TryGetValue(fg, {get:() => fh, set:(fk) => { fh=fk;}}), fh]);if(fi[0])return fi[1];else { const fj=new ch("New_5");bz().set_Item(fg, fj);return fj;} }
function bB(fg){ fg.removeAttribute("ws-template");const fh=fg.getAttribute("ws-replace");if(fh==null){ } else { fg.removeAttribute("ws-replace");const fi=fg.parentNode;if(w(fi, null)){ } else { const fj=globalThis.document.createElement(fg.tagName);fj.setAttribute("ws-replace", fh);fi.replaceChild(fj, fg);} } const fk=globalThis.document.createElement("div");fk.appendChild(fg);return fk;}
function bC(fg){ const fh=globalThis.document.createElement("div");while(fg.hasChildNodes())fh.appendChild(fg.firstChild);return fh;}
function bD(fg){ const fh=globalThis.document.createElement("div");const fi=fg.content;for(let fj=0, fk=fi.childNodes.length-1;fj<=fk;fj++)fh.appendChild(fi.childNodes[fj].cloneNode(true));return fh;}
function bE(fg, fh, fi, fj){ const fk=new cU("New_3");function fl(fs, ft){ while(true)switch(fs){ case 0:if(ft!==null){ const fu=ft.nextSibling;if(w(ft.nodeType, Node.TEXT_NODE))di(ft);else if(w(ft.nodeType, Node.ELEMENT_NODE))fn(ft);ft=fu;} else return null;break;case 1:const fv=dq(ft.nodeName, bb(3), null).toLowerCase();const fw=fv.indexOf(".");const fx=fw===-1?[fg, fv]:[dq(fv, null, bb(fw-1)), dq(fv, bb(fw+1), null)];const fy=fx[1];const fz=fx[0];if(fz!=""&&!bz().ContainsKey(fz))return dj(fy);else { if(fz==""&&fj!=null)fj.$0(fy);const fA=bz().Item(fz);if(!fA.ContainsKey(fy))return dj(fy);else { const fB=fA.Item(fy);const fC=fB.cloneNode(true);const fD=new cU("New_3");const fE=new ch("New_5");const fF=ft.attributes;for(let fP=0, fQ=fF.length-1;fP<=fQ;fP++){ const fG=fF.item(fP).name.toLowerCase();const fH=fF.item(fP).nodeValue;let fI=fH==""?fG:fH.toLowerCase();fE.set_Item(fG, fI);if(!fD.SAdd(fG))console.warn("Hole mapped twice", fG);} for(let fR=0, fS=ft.childNodes.length-1;fR<=fS;fR++){ const fJ=ft.childNodes[fR];if(w(fJ.nodeType, Node.ELEMENT_NODE))if(!fD.SAdd(fJ.nodeName.toLowerCase()))console.warn("Hole filled twice", fy);} const fK=ft.childNodes.length===1&&w(ft.firstChild.nodeType, Node.TEXT_NODE);if(fK){ const fL=dk(fC, ft.firstChild.textContent, fy);const fM=((fT) =>(fU) => fT.SAdd(fU))(fD);let fN=((fT) =>(fU) => { if(fU!=null)fT(fU.$0);})((fT) => { fM(fT);});fN(fL);} dl(fC, fD);if(!fK){ for(let fT=0, fU=ft.childNodes.length-1;fT<=fU;fT++){ const fO=ft.childNodes[fT];if(w(fO.nodeType, Node.ELEMENT_NODE))if(fO.hasAttributes())dm(fC, fO);else fm(fC, fO);} } dn(fC, fE);do_1(fC, ft.parentNode, ft);ft.parentNode.removeChild(ft);return;} } break;} } function fm(fs, ft){ const fu=ft.nodeName.toLowerCase();const fv=(fz, fA) => { if(fu=="title"&&ft.hasChildNodes()){ const fB=cE(ft.textContent);ft.removeChild(ft.firstChild);while(fB.hasChildNodes())ft.appendChild(fB.firstChild);} fn(ft);return do_1(ft, fz, fA);};bF(fs, "[ws-attr-holes]", (fz) => { const fA=dJ(fz.getAttribute("ws-attr-holes"), [" "], 1);for(let fE=0, fF=fA.length-1;fE<=fF;fE++){ const fB=bc(fA, fE);let fC=new RegExp("\\${"+fu+"}", "ig");let fD=fz.getAttribute(fB).replace(fC, ft.textContent);fz.setAttribute(fB, fD);} });const fw=fs.querySelector("[ws-hole="+fu+"]");if(w(fw, null)){ const fx=fs.querySelector("[ws-replace="+fu+"]");if(w(fx, null)){ const fy=fs.querySelector("slot[name="+fu+"]");return fs.tagName.toLowerCase()=="template"?(fv(fy.parentNode, fy),void fy.parentNode.removeChild(fy)):null;} else { fv(fx.parentNode, fx);fx.parentNode.removeChild(fx);return;} } else { while(fw.hasChildNodes())fw.removeChild(fw.lastChild);fw.removeAttribute("ws-hole");return fv(fw, null);} } function fn(fs){ if(!fs.hasAttribute("ws-preserve"))if(dK(fs.nodeName.toLowerCase(), "ws-"))fp(fs);else { dp(fs);fo(fs.firstChild);} } function fo(fs){ return fl(0, fs);} function fp(fs){ return fl(1, fs);} function fq(fs){ while(true){ const ft=fs.querySelector("[ws-template]");if(w(ft, null)){ const fu=fs.querySelector("[ws-children-template]");if(w(fu, null)){ const fv=fs.querySelectorAll("template[id]");for(let fB=1, fC=fv.length-1;fB<=fC;fB++){ const fw=fv[fB];if(fk.Contains(fw)){ } else { bE(fg, bb(fw.getAttribute("id")), fw, null);fk.SAdd(fw);} } const fx=fs.querySelectorAll("template[name]");for(let fD=1, fE=fx.length-1;fD<=fE;fD++){ const fy=fx[fD];if(fk.Contains(fy)){ } else { bE(fg, bb(fy.getAttribute("name")), fy, null);fk.SAdd(fy);} } return null;} else { const fz=fu.getAttribute("ws-children-template");fu.removeAttribute("ws-children-template");bE(fg, bb(fz), fu, null);fs=fs;} } else { const fA=ft.getAttribute("ws-template");(bG(fg, bb(fA), ft))(null);fs=fs;} } } const fr=(fh==null?"":fh.$0).toLowerCase();bA(fg).set_Item(fr, fi);if(fi.hasChildNodes()){ fq(fi);fo(fi.firstChild);} }
function bF(fg, fh, fi){ cK(fg, fh, (fj) => { if(fj.closest("[ws-preserve]")==null)fi(fj);});}
function bG(fg, fh, fi){ const fj=bB(fi);return(fk) => { bE(fg, fh, fj, fk);};}
function bH(){ return cV.TextHoleRE;}
class bI extends t { isConst;current;snap;view;id;get View(){ return this.view;} Set(fg){ if(this.isConst)(((fh) => fh("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal"))((fh) => { console.log(fh);}));else { cT(this.snap);this.current=fg;this.snap={s:cl(fg, [])};} } Get(){ return this.current;} UpdateMaybe(fg){ const fh=fg(this.Get());if(fh!=null&&fh.$==1)this.Set(fh.$0);} constructor(fg, fh, fi){ super();this.isConst=fg;this.current=fi;this.snap=fh;this.view=() => this.snap;this.id=ci();} }
function bJ(fg, fh){ const fi=fh.s;if(fi!=null&&fi.$==0)return{s:cm(fg(fi.$0))};else { const fj={s:cn([], [])};bL(fh, (fk) => { bM(fj, fh, fg(fk));}, fj);return fj;} }
function bK(fg, fh){ const fi=fg.s;if(fi==null)fh();else fi!=null&&fi.$==2?fi.$1.push(fh):fi!=null&&fi.$==3?fi.$1.push(fh):void 0;}
function bL(fg, fh, fi){ const fj=fg.s;if(fj==null)cT(fi);else fj!=null&&fj.$==2?(bO(fj.$1, fi),fh(fj.$0)):fj!=null&&fj.$==3?(fj.$0.push(fh),bO(fj.$1, fi)):fh(fj.$0);}
function bM(fg, fh, fi){ const fj=fh.s;if(fj!=null&&fj.$==0)bP(fg, fi);else bQ(fg, fi);}
function bN(fg, fh){ const fi=fg.s;const fj=fh.s;if(fi!=null&&fi.$==0)return fj!=null&&fj.$==0?{s:cm(null)}:fh;else if(fj!=null&&fj.$==0)return fg;else { const fk={s:cn([], [])};const fl=() => { const fm=fk.s;if(!(fm!=null&&fm.$==0||fm!=null&&fm.$==2)){ const fn=bR(fg);const fo=bR(fh);if(fn!=null&&fn.$==1)if(fo!=null&&fo.$==1)if(fn.$0[1]&&fo.$0[1])bP(fk, null);else bQ(fk, null);} };bL(fg, fl, fk);bL(fh, fl, fk);return fk;} }
function bO(fg, fh){ fg.push(fh);if(fg.length%20===0){ const fi=fg.slice(0);ep(fg);for(let fk=0, fl=bd(fi)-1;fk<=fl;fk++){ const fj=bc(fi, fk);if(typeof fj=="object")(((fm) => { if(fm.s)fg.push(fm);})(fj));else(((fm) => { fg.push(fm);})(fj));} } else void 0;}
function bP(fg, fh){ const fi=fg.s;if(fi!=null&&fi.$==3){ fg.s=cm(fh);const fj=fi.$0;for(let fk=0, fl=bd(fj)-1;fk<=fl;fk++)(bc(fj, fk))(fh);} else void 0;}
function bQ(fg, fh){ const fi=fg.s;if(fi!=null&&fi.$==3){ fg.s=cl(fh, fi.$1);const fj=fi.$0;for(let fk=0, fl=bd(fj)-1;fk<=fl;fk++)(bc(fj, fk))(fh);} else void 0;}
function bR(fg){ const fh=fg.s;return fh!=null&&fh.$==0?bb([fh.$0, true]):fh!=null&&fh.$==2?bb([fh.$0, false]):null;}
function bS(fg, fh, fi){ const fj=fg.s;if(fj==null)fi();else fj!=null&&fj.$==2?(fj.$1.push(fi),fh(fj.$0)):fj!=null&&fj.$==3?(fj.$0.push(fh),fj.$1.push(fi)):fh(fj.$0);}
function bT(fg){ const fh={s:cn([], [])};bL(fg, (fi) => { const fj=fi();bL(fj, (fk) => { let fl;const fm=fj.s;if(fm!=null&&fm.$==0){ const fn=fg.s;fl=fn!=null&&fn.$==0;} else fl=false;if(fl)bP(fh, fk);else bQ(fh, fk);}, fh);}, fh);return fh;}
function bU(fg){ const fh=fg.s;if(fh==null)return fg;else if(fh!=null&&fh.$==2){ const fi={s:cl(fh.$0, [])};bV(fg, fi);return fi;} else if(fh!=null&&fh.$==3){ const fj={s:cn([], [])};bL(fg, (fk) => { bM(fj, fg, fk);}, fj);return fj;} else return fg;}
function bV(fg, fh){ const fi=fg.s;if(fi==null)cT(fh);else fi!=null&&fi.$==2?bO(fi.$1, fh):fi!=null&&fi.$==3?bO(fi.$1, fh):void 0;}
function bW(fg, fh){ return co(fh, (fi) =>(fj) => fi.setAttribute(fg, fj));}
class bX { static HandlerImpl(fg, fh){ return cp((fi) => { fi.addEventListener(fg, (fj) =>(fh(fi))(fj), false);});} static Create(fg, fh){ return cp((fi) => { fi.setAttribute(fg, fh);});} static OnAfterRenderImpl(fg){ return bX.A4(fg);} static A4(fg){ return fc(bX, {$:4, $0:fg});} static Concat(fg){ const fh=cd(fg);return ce(cs(), bX.Append, fh);} static A1(fg){ return fc(bX, {$:1, $0:fg});} static A3(fg){ return fc(bX, {$:3, $0:fg});} static Append(fg, fh){ return cr(fg, fh);} static A2(fg, fh){ return fc(bX, {$:2, $0:fg, $1:fh});} }
let bY=fb((fg) => class fh { static { bY=fg(this);} static currentChart;static Transactions;static nextId;static { this.nextId=1;this.Transactions=cN((fi) => fi.Id, cc.Empty);this.currentChart=null;} });
function bZ(fg, fh){ return b1(() => bJ(fg, fh()));}
function b0(fg){ const fh={s:cm(fg)};return() => fh;}
function b1(fg){ const fh={c:null, o:fg};return() => { let fi=fh.c;if(fi===null){ fi=fh.o();fh.c=fi;const fj=fi.s;if(fj!=null&&fj.$==0)fh.o=null;else bK(fi, () => { fh.c=null;});return fi;} else return fi;};}
function b2(fg, fh){ return b1(() => bN(fg(), fh()));}
function b3(fg, fh){ return b6(bZ(fg, fh));}
function b4(fg, fh){ return b7((fi) => fi, fg, fh);}
function b5(fg, fh){ function fi(){ bS(fh(), fg, () => { d3().Fork(fi);});} d3().Fork(fi);}
function b6(fg){ return b1(() => bT(fg()));}
function b7(fg, fh, fi){ const fj=[new ch("New_5")];return bZ((fk) => { const fl=fj[0];const fm=new ch("New_5");const fn=cf((fo) => { const fp=fg(fo);const fq=fl.ContainsKey(fp)?fl.Item(fp):fh(fo);fm.set_Item(fp, fq);return fq;}, bh(fk));fj[0]=fm;return fn;}, fi);}
function b8(fg, fh){ return e5(fg, -2147483648, 2147483647, fh);}
function b9(fg){ return fg instanceof Array?b_(fg):w(typeof fg, "string")?b$(fg):fg.GetEnumerator();}
function b_(fg){ return new cb(0, null, (fh) => { const fi=fh.s;return fi<bd(fg)&&(fh.c=bc(fg, fi),fh.s=fi+1,true);}, void 0);}
function b$(fg){ return new cb(0, null, (fh) => { const fi=fh.s;return fi<fg.length&&(fh.c=fg[fi],fh.s=fi+1,true);}, void 0);}
function ca(fg){ return fg instanceof Array?b_(fg):w(typeof fg, "string")?b$(fg):"GetEnumerator0"in fg?fg.GetEnumerator0():fg.GetEnumerator();}
class cb extends l { s;c;n;d;e;Dispose(){ if(this.d)this.d(this);} MoveNext(){ const fg=this.n(this);this.e=fg?1:2;return fg;} get Current(){ return this.e===1?this.c:this.e===0?i("Enumeration has not started. Call MoveNext."):i("Enumeration already finished.");} constructor(fg, fh, fi, fj){ super();this.s=fg;this.c=fh;this.n=fi;this.d=fj;this.e=0;} }
class cc { static Empty=fc(cc, {$:0});static Cons(fg, fh){ return fc(cc, {$:1, $0:fg, $1:fh});} GetEnumerator(){ return new cb(this, null, (fg) => { const fh=fg.s;return fh.$==0?false:(fg.c=fh.$0,fg.s=fh.$1,true);}, void 0);} }
function cd(fg){ if(fg instanceof Array)return fg;else if(fg instanceof cc)return bj(fg);else if(fg===null)return[];else { const fh=[];const fi=b9(fg);try { while(fi.MoveNext())fh.push(fi.Current);return fh;} finally { if(typeof fi=="object"&&a(fi))fi.Dispose();} } }
function ce(fg, fh, fi){ const fj=bd(fi);function fk(fl){ return(fm) => { let fn;switch(fm<=0?0:fm===1?fl>=0&&fl<fj?1:(fn=fm,2):(fn=fm,2)){ case 0:return fg;case 1:return bc(fi, fl);case 2:const fo=fm/2>>0;return fh((fk(fl))(fo), (fk(fl+fo))(fm-fo));} };} return(fk(0))(fj);}
function cf(fg, fh){ for(let fi=0, fj=fh.length-1;fi<=fj;fi++)fh[fi]=fg(fh[fi]);return fh;}
function cg(fg, fh, fi, fj){ const fk=bd(fj);function fl(fm){ return(fn) => { let fo;switch(fn<=0?0:fn===1?fm>=0&&fm<fk?1:(fo=fn,2):(fo=fn,2)){ case 0:return fh;case 1:return fg(bc(fj, fm));case 2:const fp=fn/2>>0;return fi((fl(fm))(fp), (fl(fm+fp))(fn-fp));} };} return(fl(0))(fk);}
class ch extends l { equals;hash;count;data;set_Item(fg, fh){ this.set(fg, fh);} TryGetValue(fg, fh){ const fi=this.data[this.hash(fg)];if(fi==null)return false;else { const fj=bk((fk) => { const fl=j(fk);return this.equals.apply(null, [fl[0], fg])?bb(fl[1]):null;}, fi);return fj!=null&&fj.$==1&&(fh.set(fj.$0),true);} } RemoveKey(fg){ return this.remove(fg);} ContainsKey(fg){ const fh=this.data[this.hash(fg)];return fh==null?false:bl((fi) => this.equals.apply(null, [(j(fi))[0], fg]), fh);} get Keys(){ return new du(this);} set(fg, fh){ const fi=this.hash(fg);const fj=this.data[fi];if(fj==null){ this.count=this.count+1;this.data[fi]=new Array({K:fg, V:fh});} else { const fk=bi((fl) => this.equals.apply(null, [(j(fl))[0], fg]), fj);if(fk==null){ this.count=this.count+1;fj.push({K:fg, V:fh});} else fj[fk.$0]={K:fg, V:fh};} } remove(fg){ const fh=this.hash(fg);const fi=this.data[fh];if(fi==null)return false;else { const fj=bm((fk) =>!this.equals.apply(null, [(j(fk))[0], fg]), fi);return bd(fj)<fi.length&&(this.count=this.count-1,this.data[fh]=fj,true);} } Item(fg){ return this.get(fg);} GetEnumerator(){ return ca(bp(s(this.data)));} get(fg){ const fh=this.data[this.hash(fg)];return fh==null?dg():bq((fi) => { const fj=j(fi);return this.equals.apply(null, [fj[0], fg])?bb(fj[1]):null;}, fh);} static New_5(){ return new this("New_5");} static New_6(fg, fh, fi){ return new this("New_6", fg, fh, fi);} constructor(fg, fh, fi, fj){ if(fg=="New_5"){ fg="New_6";fh=[];fi=w;fj=z;} if(fg=="New_6"){ const fk=fh;const fl=fi;const fm=fj;super();this.equals=fl;this.hash=fm;this.count=0;this.data=[];const fn=b9(fk);try { while(fn.MoveNext()){ const fo=fn.Current;this.set(fo.K, fo.V);} } finally { if(typeof fn=="object"&&a(fn))fn.Dispose();} } } }
function ci(){ cj(ck()+1);return ck();}
function cj(fg){ dE.counter=fg;}
function ck(){ return dE.counter;}
function cl(fg, fh){ return{$:2, $0:fg, $1:fh};}
function cm(fg){ return{$:0, $0:fg};}
function cn(fg, fh){ return{$:3, $0:fg, $1:fh};}
function co(fg, fh){ return bX.A1(new dd(fg, fh));}
function cp(fg){ return bX.A3(fg);}
function cq(fg){ return cg((fh) => fh.NChanged, b0(), b2, fg.DynNodes);}
function cr(fg, fh){ if(fg===null)return fh;else if(fh===null)return fg;else { const fi=bX.A2(fg, fh);cA(fi, cB(fg)|cB(fh));return fi;} }
function cs(){ return eo.EmptyAttr;}
function ct(fg, fh){ const fi=[];const fj=[];function fk(fn){ while(true){ if(!(fn===null)){ if(fn!=null&&fn.$==1)return fi.push(fn.$0);else if(fn!=null&&fn.$==2){ const fo=fn.$1;const fp=fn.$0;fk(fp);fn=fo;} else return fn!=null&&fn.$==3?fn.$0(fg):fn!=null&&fn.$==4?fj.push(fn.$0):null;} else return null;} } fk(fh);const fl=fi.slice(0);let fm=dH(fg, cB(fh), fl, fj.length===0?null:bb((fn) => { T((fo) => { fo(fn);}, fj);}));return fm;}
function cu(fg){ const fh=2;return(fg.DynFlags&fh)===fh;}
function cv(fg){ return cC(fg, (fh, fi) => fh.NGetExitAnim(fi));}
function cw(fg){ const fh=1;return(fg.DynFlags&fh)===fh;}
function cx(fg){ return cC(fg, (fh, fi) => fh.NGetEnterAnim(fi));}
function cy(fg){ const fh=4;return(fg.DynFlags&fh)===fh;}
function cz(fg){ return cC(fg, (fh, fi) => fh.NGetChangeAnim(fi));}
function cA(fg, fh){ fg.flags=fh;}
function cB(fg){ return fg!==null&&fg.hasOwnProperty("flags")?fg.flags:0;}
function cC(fg, fh){ return dA(bg((fi) => fh(fi, fg.DynElem), fg.DynNodes));}
function cD(fg, fh){ bn((fi) => { fi.NSync(fg);}, fh.DynNodes);}
function cE(fg){ const fh=globalThis.document.createElement("div");if(!cF().test(fg)){ fh.appendChild(globalThis.document.createTextNode(fg));return fh;} else { const fi=cJ().exec(fg);const fj=w(fi, null)?"":bc(fi, 1).toLowerCase();const fk=(cG())[fj];const fl=fk?fk:cH();fh.innerHTML=fl[1]+fg.replace(cI(), "<$1></$2>")+fl[2];function fm(fn, fo){ while(true){ if(fo===0)return fn;else { const fp=fo;fn=fn.lastChild;fo=fp-1;} } } return fm(fh, fl[0]);} }
function cF(){ return eh.rhtml;}
function cG(){ return eh.wrapMap;}
function cH(){ return eh.defaultWrap;}
function cI(){ return eh.rxhtmlTag;}
function cJ(){ return eh.rtagName;}
function cK(fg, fh, fi){ const fj=fg.querySelectorAll(fh);for(let fk=0, fl=fj.length-1;fk<=fl;fk++)fi(fj[fk]);}
function cL(fg, fh, fi){ let fj;if(fi.parentNode===fg){ const fk=fi.nextSibling;let fl=w(fk, null)?null:fk;fj=fh===fl;} else fj=false;if(!fj)fg.insertBefore(fi, fh);}
function cM(fg, fh){ if(fh.parentNode===fg)fg.removeChild(fh);}
function cN(fg, fh){ return cO(fg, de(bh(fh)));}
function cO(fg, fh){ return new I("New", fg, fh);}
function cP(fg){ return{$:5, $0:fg};}
function cQ(fg, fh){ return{$:0, $0:fg, $1:fh};}
function cR(fg){ return{$:2, $0:fg};}
function cS(fg){ return{$:1, $0:fg};}
function cT(fg){ let fh;const fi=fg.s;if(fi==null||(fi!=null&&fi.$==2?(fh=fi.$1,false):fi!=null&&fi.$==3?(fh=fi.$1,false):true))void 0;else { fg.s=null;for(let fk=0, fl=bd(fh)-1;fk<=fl;fk++){ const fj=bc(fh, fk);if(typeof fj=="object")(((fm) => { cT(fm);})(fj));else fj();} } }
class cU extends l { equals;hash;data;count;SAdd(fg){ return this.add(fg);} Contains(fg){ const fh=this.data[this.hash(fg)];return fh==null?false:this.arrContains(fg, fh);} add(fg){ const fh=this.hash(fg);const fi=this.data[fh];return fi==null?(this.data[fh]=[fg],this.count=this.count+1,true):this.arrContains(fg, fi)?false:(fi.push(fg),this.count=this.count+1,true);} arrContains(fg, fh){ let fi=true;let fj=0;const fk=fh.length;while(fi&&fj<fk)if(this.equals.apply(null, [fh[fj], fg]))fi=false;else fj=fj+1;return!fi;} GetEnumerator(){ return b9(en(this.data));} ExceptWith(fg){ const fh=b9(fg);try { while(fh.MoveNext())this.Remove(fh.Current);} finally { if(typeof fh=="object"&&a(fh))fh.Dispose();} } get Count(){ return this.count;} IntersectWith(fg){ const fh=new cU("New_4", fg, this.equals, this.hash);const fi=en(this.data);for(let fk=0, fl=fi.length-1;fk<=fl;fk++){ const fj=fi[fk];if(!fh.Contains(fj))this.Remove(fj);} } Remove(fg){ const fh=this.data[this.hash(fg)];return fh==null?false:this.arrRemove(fg, fh)&&(this.count=this.count-1,true);} CopyTo(fg, fh){ const fi=en(this.data);for(let fj=0, fk=fi.length-1;fj<=fk;fj++)bf(fg, fj+fh, fi[fj]);} arrRemove(fg, fh){ let fi=true;let fj=0;const fk=fh.length;while(fi&&fj<fk)if(this.equals.apply(null, [fh[fj], fg])){ fh.splice(fj, 1);fi=false;} else fj=fj+1;return!fi;} static New_3(){ return new this("New_3");} static New_4(fg, fh, fi){ return new this("New_4", fg, fh, fi);} static New_2(fg){ return new this("New_2", fg);} constructor(fg, fh, fi, fj){ if(fg=="New_3"){ fg="New_4";fh=[];fi=w;fj=z;} let fk;if(fg=="New_2"){ fk=fh;fg="New_4";fh=fk;fi=w;fj=z;} if(fg=="New_4"){ const fl=fh;const fm=fi;const fn=fj;super();this.equals=fm;this.hash=fn;this.data=[];this.count=0;const fo=b9(fl);try { while(fo.MoveNext())this.add(fo.Current);} finally { if(typeof fo=="object"&&a(fo))fo.Dispose();} } } }
let cV=fb((fg) => class fh { static { cV=fg(this);} static RenderedFullDocTemplate;static TextHoleRE;static GlobalHoles;static LocalTemplatesLoaded;static LoadedTemplates;static { this.LoadedTemplates=new ch("New_5");this.LocalTemplatesLoaded=false;this.GlobalHoles=new ch("New_5");this.TextHoleRE="\\${([^}]+)}";this.RenderedFullDocTemplate=null;} });
class cW extends l { }
function cX(fg, fh){ c0(fg, fh, null);}
function cY(){ return{Current:null, Dirty:false};}
function cZ(fg, fh){ fg.Current=fh;fg.Dirty=true;}
function c0(fg, fh, fi){ while(true){ if(fh!=null&&fh.$==1)return c4(fg, fh.$0.El, fi);else if(fh!=null&&fh.$==2){ const fj=fh.$0;fj.Dirty=false;fh=fj.Current;} else if(fh==null)return fi;else if(fh!=null&&fh.$==4)return c4(fg, fh.$0.Text, fi);else if(fh!=null&&fh.$==5)return c4(fg, fh.$0, fi);else if(fh!=null&&fh.$==6)return bo((fm, fn) =>((((fo) =>(fp) =>(fq) => fp==null||fp.constructor===Object?c0(fo, fp, fq):c4(fo, fp, fq))(fg))(fm))(fn), fh.$0.Els, fi);else { const fk=fh.$1;const fl=fh.$0;fh=fl;fi=c0(fg, fk, fi);} } }
function c1(fg, fh){ return dQ(dR(), c5(fg, cs(), fh));}
function c2(fg, fh, fi){ if(dv()){ const fj=null;return dY(() => { const fk=dS(fi);const fl=c9(fh, fk);const fm=c8(fh, fk);return dZ(dw(dx(fl, c7(fh, fk))), () => dZ(c6(fg, fh), () => dZ(dw(fm), () => { fh.PreviousNodes=fk;return d2(null);})));});} else return c6(fg, fh);}
function c3(fg, fh, fi){ const fj=dS(fi);c_(fg, fh.Top);fh.PreviousNodes=fj;}
function c4(fg, fh, fi){ cL(fg, fi, fh);return fh;}
function c5(fg, fh, fi){ cX(fg, fi);const fj=ct(fg, fh);return df.New(fj, fi, null, fg, ci(), fd(fj.OnAfterRender));}
function c6(fg, fh){ if(dC()){ const fi=(fj) => { requestAnimationFrame(() => { c_(fg, fh.Top);fj();});};return d7((fj, fk, fl) => fi.apply(null, [fj, fk, fl]));} else { c_(fg, fh.Top);return d2(null);} }
function c7(fg, fh){ return dA(bg((fi) => cv(fi.Attr), dW(dV(fh, dU((fi) => cu(fi.Attr), fg.PreviousNodes)))));}
function c8(fg, fh){ return dA(bg((fi) => cx(fi.Attr), dW(dV(fg.PreviousNodes, dU((fi) => cw(fi.Attr), fh)))));}
function c9(fg, fh){ const fi=(fk) => cy(fk.Attr);const fj=(fk) => dU(fi, fk);return dA(bg((fk) => cz(fk.Attr), dW(dX(fj(fg.PreviousNodes), fj(fh)))));}
function c_(fg, fh){!fg?c$(fh):void 0;da(fh.Children);db(fh);}
function c$(fg){ function fh(fi){ function fj(fk){ while(true){ if(fk!=null&&fk.$==0){ const fl=fk.$1;const fm=fk.$0;if(fj(fm))return true;else fk=fl;} else if(fk!=null&&fk.$==2){ const fn=fk.$0;if(fn.Dirty)return true;else fk=fn.Current;} else if(fk!=null&&fk.$==6){ const fo=fk.$0;return fo.Dirty||bl(fh, fo.Holes);} else return false;} } return fj(fi.Children);} cD(fg.El, fg.Attr);if(fh(fg))dc(fg);}
function da(fg){ while(true){ if(fg!=null&&fg.$==1)return c_(false, fg.$0);else if(fg!=null&&fg.$==2){ const fh=fg.$0;fg=fh.Current;} else if(fg==null)return null;else if(fg!=null&&fg.$==5)return null;else if(fg!=null&&fg.$==4){ const fi=fg.$0;return fi.Dirty?(fi.Text.nodeValue=fi.Value,fi.Dirty=false):null;} else if(fg!=null&&fg.$==6){ const fj=fg.$0;bn((fm) => { c_(false, fm);}, fj.Holes);bn((fm) => { cD(fm[0], fm[1]);}, fj.Attrs);return db(fj);} else { const fk=fg.$1;const fl=fg.$0;da(fl);fg=fk;} } }
function db(fg){ const fh=fd(fg.Render);if(fh!=null&&fh.$==1){ fh.$0(fg.El);fe(fg, "Render", null);} }
function dc(fg){ const fh=fg.El;function fi(fm, fn){ while(true){ if(fm!=null&&fm.$==1)return fm.$0.El;else if(fm!=null&&fm.$==2){ const fo=fm.$0;if(fo.Dirty){ fo.Dirty=false;return c0(fh, fo.Current, fn);} else fm=fo.Current;} else if(fm==null)return fn;else if(fm!=null&&fm.$==4)return fm.$0.Text;else if(fm!=null&&fm.$==5)return fm.$0;else if(fm!=null&&fm.$==6){ const fp=fm.$0;if(fp.Dirty)fp.Dirty=false;return bo((fs, ft) => fs==null||fs.constructor===Object?fi(fs, ft):fs, fp.Els, fn);} else { const fq=fm.$1;const fr=fm.$0;fm=fr;fn=fi(fq, fn);} } } const fj=fg.El;e0((fm) => { cM(fj, fm);}, eZ(e1(fg), eY(fg.El, fd(fg.Delimiters))));let fk=fg.Children;const fl=fd(fg.Delimiters);fi(fk, fl!=null&&fl.$==1?fl.$0[1]:null);}
class dd extends l { push;value;dirty;updates;get NChanged(){ return this.updates;} NGetExitAnim(fg){ return dB();} NGetEnterAnim(fg){ return dB();} NGetChangeAnim(fg){ return dB();} NSync(fg){ if(this.dirty){(this.push(fg))(this.value);this.dirty=false;} } constructor(fg, fh){ super();this.push=fh;this.value=void 0;this.dirty=false;this.updates=bZ((fi) => { this.value=fi;this.dirty=true;}, fg);} }
function de(fg){ return new dG(fg);}
class df { Attr;Children;Delimiters;El;ElKey;Render;Equals(fg){ return this.ElKey===fg.ElKey;} GetHashCode(){ return this.ElKey;} static New(fg, fh, fi, fj, fk, fl){ const fm={Attr:fg, Children:fh, El:fj, ElKey:fk};let fn=(fe(fm, "Delimiters", fi),fe(fm, "Render", fl),fm);return fc(df, fn);} }
function dg(){ throw new eq("New");}
class dh extends l { }
function di(fg){ let fh=null;let fi=0;const fj=fg.textContent;const fk=new RegExp(bH(), "g");while(fh=fk.exec(fj),fh!==null){ fg.parentNode.insertBefore(globalThis.document.createTextNode(dq(fj, bb(fi), bb(fk.lastIndex-bc(fh, 0).length-1))), fg);fi=fk.lastIndex;const fl=globalThis.document.createElement("span");fl.setAttribute("ws-replace", bc(fh, 1).toLowerCase());fg.parentNode.insertBefore(fl, fg);} fk.lastIndex=0;fg.textContent=dq(fj, bb(fi), null);}
function dj(fg){ console.warn("Instantiating non-loaded template", fg);}
function dk(fg, fh, fi){ const fj=fg.querySelector("[ws-replace]");return w(fj, null)?(console.warn("Filling non-existent text hole", fi),null):(fj.parentNode.replaceChild(globalThis.document.createTextNode(fh), fj),bb(fj.getAttribute("ws-replace")));}
function dl(fg, fh){ const fi=(fj) => { bF(fg, "["+fj+"]", (fk) => { if(!fh.Contains(fk.getAttribute(fj)))fk.removeAttribute(fj);});};fi("ws-attr");fi("ws-onafterrender");fi("ws-var");bF(fg, "[ws-hole]", (fj) => { if(!fh.Contains(fj.getAttribute("ws-hole"))){ fj.removeAttribute("ws-hole");while(fj.hasChildNodes())fj.removeChild(fj.lastChild);} });bF(fg, "[ws-replace]", (fj) => { if(!fh.Contains(fj.getAttribute("ws-replace")))fj.parentNode.removeChild(fj);});bF(fg, "[ws-on]", (fj) => { fj.setAttribute("ws-on", dI(" ", bm((fk) => fh.Contains(bc(dJ(fk, [":"], 1), 1)), dJ(fj.getAttribute("ws-on"), [" "], 1))));});bF(fg, "[ws-attr-holes]", (fj) => { const fk=dJ(fj.getAttribute("ws-attr-holes"), [" "], 1);for(let fo=0, fp=fk.length-1;fo<=fp;fo++){ const fl=bc(fk, fo);let fm=new RegExp(bH(), "g");let fn=fj.getAttribute(fl).replace(fm, (fq, fr) => fh.Contains(fr)?fq:"");fj.setAttribute(fl, fn);} });}
function dm(fg, fh){ dp(fh);const fi=fh.nodeName.toLowerCase();const fj=fg.querySelector("[ws-attr="+fi+"]");if(w(fj, null))console.warn("Filling non-existent attr hole", fi);else { fj.removeAttribute("ws-attr");for(let fl=0, fm=fh.attributes.length-1;fl<=fm;fl++){ const fk=fh.attributes.item(fl);if(fk.name=="class"&&fj.hasAttribute("class"))fj.setAttribute("class", fj.getAttribute("class")+" "+fk.nodeValue);else fj.setAttribute(fk.name, fk.nodeValue);} } }
function dn(fg, fh){ const fi=(fj) => { bF(fg, "["+fj+"]", (fk) => { let fl;const fm=(fl=null,[fh.TryGetValue(fk.getAttribute(fj).toLowerCase(), {get:() => fl, set:(fn) => { fl=fn;}}), fl]);if(fm[0])fk.setAttribute(fj, fm[1]);});};fi("ws-hole");fi("ws-replace");fi("ws-attr");fi("ws-onafterrender");fi("ws-var");bF(fg, "[ws-on]", (fj) => { fj.setAttribute("ws-on", dI(" ", bg((fk) => { let fl;const fm=dJ(fk, [":"], 1);const fn=(fl=null,[fh.TryGetValue(bc(fm, 1), {get:() => fl, set:(fo) => { fl=fo;}}), fl]);return fn[0]?bc(fm, 0)+":"+fn[1]:fk;}, dJ(fj.getAttribute("ws-on"), [" "], 1))));});bF(fg, "[ws-attr-holes]", (fj) => { const fk=dJ(fj.getAttribute("ws-attr-holes"), [" "], 1);for(let fl=0, fm=fk.length-1;fl<=fm;fl++)((() => { const fn=bc(fk, fl);return fj.setAttribute(fn, S((fo, fp) => { const fq=j(fp);return fo.replace(new RegExp("\\${"+fq[0]+"}", "ig"), "${"+fq[1]+"}");}, fj.getAttribute(fn), fh));})());});}
function do_1(fg, fh, fi){ while(true){ if(fg.hasChildNodes())fi=fh.insertBefore(fg.lastChild, fi);else return null;} }
function dp(fg){ const fh=fg.attributes;const fi=[];const fj=[];const fk=[];for(let fp=0, fq=fh.length-1;fp<=fq;fp++){ const fl=fh.item(fp);if(dK(fl.nodeName, "ws-on")&&fl.nodeName!="ws-onafterrender"&&fl.nodeName!="ws-on"){ fi.push(fl.nodeName);fj.push(dq(fl.nodeName, bb("ws-on".length), null)+":"+fl.nodeValue.toLowerCase());} else if(!dK(fl.nodeName, "ws-")&&(new RegExp(bH())).test(fl.nodeValue)){ let fm=new RegExp(bH(), "g");let fn=fl.nodeValue.replace(fm, (fr, fs) =>"${"+fs.toLowerCase()+"}");fl.nodeValue=fn;fk.push(fl.nodeName);} else void 0;} if(!(fj.length==0))fg.setAttribute("ws-on", dI(" ", fj));if(!(fk.length==0))fg.setAttribute("ws-attr-holes", dI(" ", fk));const fo=(fr) => { const fs=fg.getAttribute(fr);if(fs==null){ } else fg.setAttribute(fr, fs.toLowerCase());};fo("ws-hole");fo("ws-replace");fo("ws-attr");fo("ws-onafterrender");fo("ws-var");bn((fr) => { fg.removeAttribute(fr);}, fi);}
function dq(fg, fh, fi){ if(fh==null){ if(fi!=null&&fi.$==1){ const fj=fi.$0;return fj<0?"":fg.slice(0, fj+1);} else return"";} else if(fi==null)return fg.slice(fh.$0);else { const fk=fi.$0;return fk<0?"":fg.slice(fh.$0, fk+1);} }
function dr(){ return i("The input sequence has an insufficient number of elements.");}
function ds(fg, fh){ let fi=true;let fj=0;while(fi&&fj<bd(fh))if(w(fh[fj], fg))fi=false;else fj=fj+1;return!fi;}
function dt(){ return i("The input must be non-negative.");}
class du extends l { d;GetEnumerator(){ return b9(O((fg) => fg.K, this.d));} constructor(fg){ super();this.d=fg;} }
function dv(){ return d9();}
function dw(fg){ const fh=null;return dY(() => dZ(dy(() => { }, d_(fg)), () => { d$(fg);return d2(null);}));}
function dx(fg, fh){ return dz(ej(fg.$0, fh.$0));}
function dy(fg, fh){ const fi=fh.Duration;if(fi===0)return d0();else { const fj=(fk) => { function fl(fm){ return(fn) => { const fo=fn-fm;fh.Compute(fo);fg();return fo<=fi?void requestAnimationFrame((fp) => {(fl(fm))(fp);}):fk();};} requestAnimationFrame((fm) => {(fl(fm))(fm);});};return d7((fk, fl, fm) => fj.apply(null, [fk, fl, fm]));} }
function dz(fg){ return{$:0, $0:fg};}
function dA(fg){ return dz(el(O(eb, fg)));}
function dB(){ return dz(em());}
function dC(){ return ef.BatchUpdatesEnabled;}
function dD(fg){ const fh=[0];function fi(){ const fj=null;return dY(() => dZ(fg, () => { const fk=fh[0];return w(fk, 1)?(fh[0]=0,d0()):w(fk, 2)?(fh[0]=1,fi()):d0();}));} return() => { const fj=fh[0];if(w(fj, 0)){ fh[0]=1;d1(fi(), null);} else w(fj, 1)?fh[0]=2:void 0;};}
let dE=fb((fg) => class fh { static { dE=fg(this);} static counter;static { this.counter=0;} });
class dF extends ba { docNode_1;updates_1;elt;rvUpdates;static New(fg, fh, fi){ const fj=c5(fg, fh, fi.docNode);const fk=eg.Create(fi.updates);return new dF(cS(fj), b2(cq(fj.Attr), fk.v), fg, fk);} constructor(fg, fh, fi, fj){ super(fg, fh);this.docNode_1=fg;this.updates_1=fh;this.elt=fi;this.rvUpdates=fj;} }
class dG extends l { init;SRemoveIf(fg, fh){ return bm((fi) =>!fg(fi), fh);} SSetAt(fg, fh, fi){ bf(fi, fg, fh);return fi;} SAppend(fg, fh){ fh.push(fg);return fh;} SInit(){ return this.init;} constructor(fg){ super();this.init=fg;} }
function dH(fg, fh, fi, fj){ const fk={DynElem:fg, DynFlags:fh, DynNodes:fi};fe(fk, "OnAfterRender", fj);return fk;}
function dI(fg, fh){ return bh(fh).join(fg);}
function dJ(fg, fh, fi){ return dL(fg, new RegExp("["+dM(fh.join(""))+"]"), fi);}
function dK(fg, fh){ return fg.substring(0, fh.length)==fh;}
function dL(fg, fh, fi){ return fi===1?bm((fj) => fj!=="", dN(fg, fh)):dN(fg, fh);}
function dM(fg){ return fg.replace(new RegExp("[-\\/\\\\^$*+?.()|[\\]{}]", "g"), "\\$&");}
function dN(fg, fh){ return fg.split(fh);}
function dO(fg, fh){ return u0032(fg, dP(fh));}
function dP(fg){ return fg==null?"":fg;}
function dQ(fg, fh){ return{PreviousNodes:fg, Top:fh};}
function dR(){ return dT(new cU("New_3"));}
function dS(fg){ const fh=[];function fi(fl, fm){ while(true)switch(fl){ case 0:if(fm!=null&&fm.$==0){ const fn=fm.$1;const fo=fm.$0;fi(0, fo);fm=fn;} else if(fm!=null&&fm.$==1){ const fp=fm.$0;fm=fp;fl=1;} else if(fm!=null&&fm.$==2){ const fq=fm.$0;fm=fq.Current;} else if(fm!=null&&fm.$==6){ const fr=fm.$0.Holes;return(((fs) =>(ft) => { bn(fs, ft);})(fk))(fr);} else return null;break;case 1:fh.push(fm);fm=fm.Children;fl=0;break;} } function fj(fl){ return fi(0, fl);} function fk(fl){ return fi(1, fl);} fj(fg);return dT(new cU("New_2", fh));}
function dT(fg){ return{$:0, $0:fg};}
function dU(fg, fh){ return dT(ez(fg, fh.$0));}
function dV(fg, fh){ return dT(eA(fg.$0, fh.$0));}
function dW(fg){ return eB(fg.$0);}
function dX(fg, fh){ return dT(eC(fg.$0, fh.$0));}
function dY(fg){ return(fh) => { try {(fg())(fh);} catch(fi){ fh.k(eu(fi));} };}
function dZ(fg, fh){ return d4((fi) => { fg(et((fj) => { if(fj.$==0){ const fk=fj.$0;d3().Fork(() => { try {(fh(fk))(fi);} catch(fl){ fi.k(eu(fl));} });} else d3().Fork(() => { fi.k(fj);});}, fi.ct));});}
function d0(){ return ex.Zero;}
function d1(fg, fh){ const fi=(d5())[0];const fj=fh==null?fi:fh.$0;d3().Fork(() => { if(!fj.c)fg(et((fk) => { if(fk.$==1)d6(fk.$0);}, fj));});}
function d2(fg){ return(fh) => { fh.k(ev(fg));};}
function d3(){ return ex.scheduler;}
function d4(fg){ return(fh) => { if(fh.ct.c)d8(fh);else fg(fh);};}
function d5(){ return ex.defCTS;}
function d6(fg){ console.log("WebSharper: Uncaught asynchronous exception", fg);}
function d7(fg){ return(fh) => { const fi=[false];const fj=(fk) => { if(fi[0])i("A continuation provided by Async.FromContinuations was invoked multiple times");else { fi[0]=true;d3().Fork(fk);} };fg((fk) => { fj(() => { fh.k(ev(fk));});}, (fk) => { fj(() => { fh.k(eu(fk));});}, (fk) => { fj(() => { fh.k(ew(fk));});});};}
function d8(fg){ fg.k(ew(new e6("New", fg.ct)));}
function d9(){ return ei.UseAnimations;}
function d_(fg){ return ea(br((fh) => fh.$==1?bb(fh.$0):null, ek(fg.$0)));}
function d$(fg){ bn((fh) => { if(fh.$==0)fh.$0();}, ek(fg.$0));}
function ea(fg){ const fh=cd(fg);const fi=bd(fh);if(fi===0)return ec();else if(fi===1)return bc(fh, 0);else { const fj=W(O((fl) => fl.Duration, fh));const fk=bg((fl) => ee(fj, fl), fh);return ed(fj, (fl) => { bn((fm) => { fm.Compute(fl);}, fk);});} }
function eb(fg){ return fg.$0;}
function ec(fg){ return ed(0, () => fg);}
function ed(fg, fh){ return{Compute:fh, Duration:fg};}
function ee(fg, fh){ const fi=fh.Compute;const fj=fh.Duration;const fk=e7(() => fh.Compute(fh.Duration));return{Compute:(fl) => fl>=fj?fk.f():fi(fl), Duration:fg};}
let ef=fb((fg) => class fh { static { ef=fg(this);} static BatchUpdatesEnabled;static { this.BatchUpdatesEnabled=true;} });
class eg { c;s;v;static Create(fg){ let fh;fh=null;fh=eg.New(fg, null, () => { let fi;fi=fh.s;return fi===null?(fi=bU(fh.c()),fh.s=fi,bK(fi, () => { fh.s=null;}),fi):fi;});return fh;} static New(fg, fh, fi){ return fc(eg, {c:fg, s:fh, v:fi});} }
let eh=fb((fg) => class fh { static { eh=fg(this);} static defaultWrap;static wrapMap;static rhtml;static rtagName;static rxhtmlTag;static { this.rxhtmlTag=new RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>", "gi");this.rtagName=new RegExp("<([\\w:]+)");this.rhtml=new RegExp("<|&#?\\w+;");const fi=[1, "<table>", "</table>"];let fj=Object.fromEntries([["option", [1, "<select multiple='multiple'>", "</select>"]], ["legend", [1, "<fieldset>", "</fieldset>"]], ["area", [1, "<map>", "</map>"]], ["param", [1, "<object>", "</object>"]], ["thead", fi], ["tbody", fi], ["tfoot", fi], ["tr", [2, "<table><tbody>", "</tbody></table>"]], ["col", [2, "<table><colgroup>", "</colgoup></table>"]], ["td", [3, "<table><tbody><tr>", "</tr></tbody></table>"]]]);this.wrapMap=fj;this.defaultWrap=[0, "", ""];} });
let ei=fb((fg) => class fh { static { ei=fg(this);} static UseAnimations;static CubicInOut;static { this.CubicInOut=es.Custom((fi) => { const fj=fi*fi;return 3*fj-2*(fj*fi);});this.UseAnimations=true;} });
function ej(fg, fh){ return fg.$==0?fh:fh.$==0?fg:{$:2, $0:fg, $1:fh};}
function ek(fg){ const fh=[];function fi(fj){ while(true){ if(fj.$==1)return fh.push(fj.$0);else if(fj.$==2){ const fk=fj.$1;const fl=fj.$0;fi(fl);fj=fk;} else return fj.$==3?bn((fm) => { fh.push(fm);}, fj.$0):null;} } fi(fg);return fh.slice(0);}
function el(fg){ const fh=cd(fg);return ce(em(), ej, fh);}
function em(){ return e_.Empty;}
function en(fg){ let fh=[];let fi;for(var fj in fg)fh.push.apply(fh, fg[fj]);return fh;}
let eo=fb((fg) => class fh { static { eo=fg(this);} static FloatApplyChecked;static FloatGetChecked;static FloatSetChecked;static FloatApplyUnchecked;static FloatGetUnchecked;static FloatSetUnchecked;static IntApplyChecked;static IntGetChecked;static IntSetChecked;static IntApplyUnchecked;static IntGetUnchecked;static IntSetUnchecked;static FileApplyUnchecked;static FileGetUnchecked;static FileSetUnchecked;static DateTimeApplyUnchecked;static DateTimeGetUnchecked;static DateTimeSetUnchecked;static StringListApply;static StringListGet;static StringListSet;static StringApply;static StringGet;static StringSet;static BoolCheckedApply;static EmptyAttr;static { this.EmptyAttr=null;this.BoolCheckedApply=(fy) =>[(fz) => { fz.addEventListener("change", () => fy.Get()!=fz.checked?fy.Set(fz.checked):null);}, (fz) =>(fA) => fA!=null&&fA.$==1?void(fz.checked=fA.$0):null, bZ(bb, fy.View)];this.StringSet=(fy) =>(fz) => { fy.value=fz;};this.StringGet=(fy) => bb(fy.value);const fi=eF();const fj=eE();this.StringApply=(fy) => eD(fi, fj, fy);this.StringListSet=(fy) =>(fz) => { const fA=fy.options;for(let fB=0, fC=fA.length-1;fB<=fC;fB++)((() => { const fD=fA.item(fB);fD.selected=ds(fD.value, fz);})());};this.StringListGet=(fy) => { const fz=fy.selectedOptions;return bb(bh(U(() => V((fA) =>[fz.item(fA).value], k(0, fz.length-1)))));};const fk=eH();const fl=eG();this.StringListApply=(fy) => eD(fk, fl, fy);this.DateTimeSetUnchecked=(fy) =>(fz) => { fy.value=(new Date(fz)).toLocaleString();};this.DateTimeGetUnchecked=(fy) => { let fz;let fA;const fB=fy.value;if(eV(fB))return bb(-8640000000000000);else { fz=0;const fC=e4(fB);let fD=fC!=null&&fC.$==1&&(fz=fC.$0,true);fA=[fD, fz];return fA[0]?bb(fA[1]):null;} };const fm=eJ();const fn=eI();this.DateTimeApplyUnchecked=(fy) => eD(fm, fn, fy);this.FileSetUnchecked=() =>() => null;this.FileGetUnchecked=(fy) => { const fz=fy.files;return bb(bh(U(() => O((fA) => fz.item(fA), k(0, fz.length-1)))));};const fo=eM();const fp=eL();this.FileApplyUnchecked=(fy) => eK(fo, fp, fy);this.IntSetUnchecked=(fy) =>(fz) => { fy.value=String(fz);};this.IntGetUnchecked=(fy) => { const fz=fy.value;if(eV(fz))return bb(0);else { const fA=+fz;return fA!==fA>>0?null:bb(fA);} };const fq=eO();const fr=eN();this.IntApplyUnchecked=(fy) => eD(fq, fr, fy);this.IntSetChecked=(fy) =>(fz) => { const fA=fz.Input;return fy.value!=fA?void(fy.value=fA):null;};this.IntGetChecked=(fy) => { let fz;let fA;const fB=fy.value;if(eV(fB))fz=(fy.checkValidity?fy.checkValidity():true)?eW.Blank(fB):eW.Invalid(fB);else { const fC=(fA=0,[b8(fB, {get:() => fA, set:(fD) => { fA=fD;}}), fA]);fz=fC[0]?eW.Valid(fC[1], fB):eW.Invalid(fB);} return bb(fz);};const fs=eQ();const ft=eP();this.IntApplyChecked=(fy) => eD(fs, ft, fy);this.FloatSetUnchecked=(fy) =>(fz) => { fy.value=String(fz);};this.FloatGetUnchecked=(fy) => { const fz=fy.value;if(eV(fz))return bb(0);else { const fA=+fz;return isNaN(fA)?null:bb(fA);} };const fu=eS();const fv=eR();this.FloatApplyUnchecked=(fy) => eD(fu, fv, fy);this.FloatSetChecked=(fy) =>(fz) => { const fA=fz.Input;return fy.value!=fA?void(fy.value=fA):null;};this.FloatGetChecked=(fy) => { let fz;const fA=fy.value;if(eV(fA))fz=(fy.checkValidity?fy.checkValidity():true)?eW.Blank(fA):eW.Invalid(fA);else { const fB=+fA;fz=isNaN(fB)?eW.Invalid(fA):eW.Valid(fB, fA);} return bb(fz);};const fw=eU();const fx=eT();this.FloatApplyChecked=(fy) => eD(fw, fx, fy);} });
function ep(fg){ fg.splice(0, bd(fg));}
class eq extends Error { static New(){ return new this("New");} static New_1(fg){ return new this("New_1", fg);} constructor(fg, fh){ if(fg=="New"){ fg="New_1";fh="The given key was not present in the dictionary.";} if(fg=="New_1"){ const fi=fh;super(fi);} } }
class er extends l { idle;robin;Fork(fg){ this.robin.push(fg);this.idle?(this.idle=false,setTimeout(() => { this.tick();}, 0)):void 0;} tick(){ const fg=Date.now();let fh=true;while(fh)if(this.robin.length===0){ this.idle=true;fh=false;} else {(this.robin.shift())();Date.now()-fg>40?(setTimeout(() => { this.tick();}, 0),fh=false):void 0;} } constructor(){ super();this.idle=true;this.robin=[];} }
class es extends l { transformTime;static Custom(fg){ return new es(fg);} constructor(fg){ super();this.transformTime=fg;} }
function et(fg, fh){ return{k:fg, ct:fh};}
function eu(fg){ return{$:1, $0:fg};}
function ev(fg){ return{$:0, $0:fg};}
function ew(fg){ return{$:2, $0:fg};}
let ex=fb((fg) => class fh { static { ex=fg(this);} static GetCT;static Zero;static defCTS;static scheduler;static noneCT;static { this.noneCT=ey(false, []);this.scheduler=new er();this.defCTS=[new eX()];this.Zero=d2();this.GetCT=(fi) => { fi.k(ev(fi.ct));};} });
function ey(fg, fh){ return{c:fg, r:fh};}
function ez(fg, fh){ return new cU("New_2", bm(fg, eB(fh)));}
function eA(fg, fh){ const fi=new cU("New_2", eB(fh));fi.ExceptWith(eB(fg));return fi;}
function eB(fg){ const fh=bs(fg.Count, void 0);fg.CopyTo(fh, 0);return fh;}
function eC(fg, fh){ const fi=new cU("New_2", eB(fg));fi.IntersectWith(eB(fh));return fi;}
function eD(fg, fh, fi){ let fj;fj=null;return[(fk) => { const fl=() => { fi.UpdateMaybe((fm) => { let fn;fj=fg(fk);return fj!=null&&fj.$==1&&(!w(fj.$0, fm)&&(fn=[fj, fj.$0],true))?fn[0]:null;});};fk.addEventListener("change", fl);fk.addEventListener("input", fl);fk.addEventListener("keypress", fl);}, (fk) => { const fl=fh(fk);return(fm) => fm==null?null:fl(fm.$0);}, bZ((fk) => { let fl;return fj!=null&&fj.$==1&&(w(fj.$0, fk)&&(fl=fj.$0,true))?null:bb(fk);}, fi.View)];}
function eE(){ return eo.StringSet;}
function eF(){ return eo.StringGet;}
function eG(){ return eo.StringListSet;}
function eH(){ return eo.StringListGet;}
function eI(){ return eo.DateTimeSetUnchecked;}
function eJ(){ return eo.DateTimeGetUnchecked;}
function eK(fg, fh, fi){ let fj;fj=null;return[(fk) => { fk.addEventListener("change", () => { fi.UpdateMaybe((fl) => { let fm;fj=fg(fk);return fj!=null&&fj.$==1&&(fj.$0!==fl&&(fm=[fj, fj.$0],true))?fm[0]:null;});});}, (fk) => { const fl=fh(fk);return(fm) => fm==null?null:fl(fm.$0);}, bZ((fk) => { let fl;return fj!=null&&fj.$==1&&(w(fj.$0, fk)&&(fl=fj.$0,true))?null:bb(fk);}, fi.View)];}
function eL(){ return eo.FileSetUnchecked;}
function eM(){ return eo.FileGetUnchecked;}
function eN(){ return eo.IntSetUnchecked;}
function eO(){ return eo.IntGetUnchecked;}
function eP(){ return eo.IntSetChecked;}
function eQ(){ return eo.IntGetChecked;}
function eR(){ return eo.FloatSetUnchecked;}
function eS(){ return eo.FloatGetUnchecked;}
function eT(){ return eo.FloatSetChecked;}
function eU(){ return eo.FloatGetChecked;}
function eV(fg){ return dO(e3, fg);}
class eW { get Input(){ return this.$==1?this.$0:this.$==2?this.$0:this.$1;} static Blank(fg){ return fc(eW, {$:2, $0:fg});} static Invalid(fg){ return fc(eW, {$:1, $0:fg});} static Valid(fg, fh){ return fc(eW, {$:0, $0:fg, $1:fh});} }
class eX extends l { init;c;pending;r;constructor(){ super();this.c=false;this.pending=null;this.r=[];this.init=1;} }
function eY(fg, fh){ let fi;if(fh!=null&&fh.$==1){ const fj=[];fi=fh.$0[0].nextSibling;while(fi!==fh.$0[1]){ fj.push(fi);fi=fi.nextSibling;} return e2(fj);} else { let fk=fg.childNodes.length;const fl=fg.childNodes;let fm=bt(fk, (fn) => fl[fn]);return e2(fm);} }
function eZ(fg, fh){ const fi=fg.$0;return e2(bm((fj) => bu((fk) =>!(fj===fk), fi), fh.$0));}
function e0(fg, fh){ bn(fg, fh.$0);}
function e1(fg){ const fh=[];function fi(fj){ while(true){ if(fj!=null&&fj.$==2){ const fk=fj.$0;fj=fk.Current;} else if(fj!=null&&fj.$==1)return fh.push(fj.$0.El);else if(fj==null)return null;else if(fj!=null&&fj.$==5)return fh.push(fj.$0);else if(fj!=null&&fj.$==4)return fh.push(fj.$0.Text);else if(fj!=null&&fj.$==6){ const fl=fj.$0.Els;return(((fo) =>(fp) => { bn(fo, fp);})((fo) => { if(fo==null||fo.constructor===Object)fi(fo);else fh.push(fo);}))(fl);} else { const fm=fj.$1;const fn=fj.$0;fi(fn);fj=fm;} } } fi(fg.Children);return e2(cd(fh));}
function e2(fg){ return{$:0, $0:fg};}
function e3(fg){ return fg.match(new RegExp("\\s"))!==null;}
function e4(fg){ const fh=Date.parse(fg);return isNaN(fh)?null:bb(fh);}
function e5(fg, fh, fi, fj){ const fk=+fg;const fl=fk===fk-fk%1&&fk>=fh&&fk<=fi;if(fl)fj.set(fk);return fl;}
class e6 extends Error { ct;static New(fg){ return new this("New", fg);} static New_1(fg, fh, fi){ return new this("New_1", fg, fh, fi);} constructor(fg, fh, fi, fj){ let fk;if(fg=="New"){ fk=fh;fg="New_1";fh="The operation was canceled.";fi=null;fj=fk;} if(fg=="New_1"){ const fl=fh;const fm=fi;const fn=fj;super(fl);this.inner=fm;this.ct=fn;} } }
function e7(fg){ return e$(false, fg, e8);}
function e8(){ const fg=this.v();this.c=true;this.v=fg;this.f=e9;return fg;}
function e9(){ return this.v;}
let e_=fb((fg) => class fh { static { e_=fg(this);} static Empty;static { this.Empty={$:0};} });
function e$(fg, fh, fi){ return{c:fg, v:fh, f:fi};}
ff(() => { b();});
fa();

