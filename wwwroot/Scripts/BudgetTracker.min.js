import { Start as gi } from "./WebSharper.Core.JavaScript/Runtime.js"
import { Lazy as gj, Create as gk, MarkResizable as gl, SetOptional as gm, GetOptional as gn, CreateFuncWithArgs as go, DeleteEmptyFields as gp, OnLoad as gq } from "./WebSharper.Core.JavaScript/Runtime.js"
function a(gr){ return"Dispose"in gr;}
function b(){ const gr=c();bE("");bc.RunById("main", gr);}
function c(){ const gr=n.Create_1("");const gs=n.Create_1(o);const gt=n.Create_1(r);const gu=n.Create_1("Entertainment");const gv=n.Create_1("");const gw=(gx, gy) => bc.Element("li", [cj("class", cw((gz) => x(gz, gx)?"active":"", gs.View))], [bc.Element("a", [cu.HandlerImpl("click", () =>() => { if(d()==null)null;else { const gz=d().$0;if(gz&&typeof gz.destroy==="function")gz.destroy();e(null);} return gs.Set(gx);}), cu.Create("style", "cursor: pointer;")], [bc.TextNode(gy)])]);return bc.Element("div", [cu.Create("style", "display: flex; height: 100vh;")], [bc.Element("div", [cu.Create("style", "width: 200px; background-color: #f5f8fa; display: flex; flex-direction: column; justify-content: space-between; padding: 20px;")], [bc.Element("div", [], [bc.Element("h2", [cu.Create("style", "margin: 0; font-size: 18px;")], [bc.TextNode("Budget Tracker")]), bc.Element("p", [cu.Create("style", "margin: 5px 0; font-size: 14px; color: #666;")], [bc.TextNode("for better savings!")])]), bc.Element("ul", [cu.Create("style", "list-style: none; padding: 0; flex-grow: 1;")], [gw(o, "Home"), gw(p, "Transactions"), gw(q, "Analytics")]), bc.Element("div", [], [bc.Element("p", [cu.Create("style", "margin: 0; font-size: 12px; color: #888;")], [bc.TextNode("Owner: Patrik Grasics")])])]), bc.Element("div", [cu.Create("style", "flex-grow: 1; padding: 20px; overflow-y: auto;")], [bc.BindView((gx) => { if(gx.$==1)return bc.Element("div", [], [bc.Element("h1", [], [bc.TextNode("Transactions")]), bc.Element("div", [cu.Create("style", "margin-bottom: 20px;")], [bc.Element("select", [cu.HandlerImpl("change", (gM) =>() => gt.Set(gM.value=="Income"?r:s))], [bc.Element("option", [cu.Create("value", "Income")], [bc.TextNode("Income")]), bc.Element("option", [cu.Create("value", "Expense")], [bc.TextNode("Expense")])]), bc.Element("select", [cu.HandlerImpl("change", (gM) =>() => gu.Set(gM.value))], [bc.Element("option", [cu.Create("value", "Entertainment")], [bc.TextNode("Entertainment")]), bc.Element("option", [cu.Create("value", "Food")], [bc.TextNode("Food")]), bc.Element("option", [cu.Create("value", "Salary")], [bc.TextNode("Salary")]), bc.Element("option", [cu.Create("value", "Transport")], [bc.TextNode("Transport")]), bc.Element("option", [cu.Create("value", "Bills")], [bc.TextNode("Bills")])]), bc.Element("input", [cu.Create("placeholder", "Amount (Ft)"), cu.Create("value", gv.Get()), cu.HandlerImpl("input", (gM) =>() => gv.Set(gM.value)), cu.Create("type", "number"), cu.Create("step", "1")], []), bc.Element("button", [cu.HandlerImpl("click", () =>() => { const gM=gv.Get()==null?"":gv.Get();const gN=parseInt(gM, globalThis.$radix);if(!isNaN(gN)&&!(gM==null)&&gM.length>0){ const gO=K(h(), gt.Get(), gu.Get(), gN);f().Append(gO);g(h()+1);return gv.Set("");} else return alert("Invalid amount! Please enter a valid integer (e.g., 1234).");})], [bc.TextNode("Add")])]), bc.Element("table", [cu.Create("style", "width: 100%; border-collapse: collapse;")], [bc.Element("thead", [], [bc.Element("tr", [], [bc.Element("th", [cu.Create("style", "border: 1px solid #ddd; padding: 8px;")], [bc.TextNode("Type")]), bc.Element("th", [cu.Create("style", "border: 1px solid #ddd; padding: 8px;")], [bc.TextNode("Category")]), bc.Element("th", [cu.Create("style", "border: 1px solid #ddd; padding: 8px;")], [bc.TextNode("Amount (Ft)")]), bc.Element("th", [cu.Create("style", "border: 1px solid #ddd; padding: 8px;")], [bc.TextNode("Actions")])])]), bc.Element("tbody", [], [bc.Convert((gM) => bc.Element("tr", [], [bc.Element("td", [cu.Create("style", "border: 1px solid #ddd; padding: 8px;")], [bc.TextNode(gM.Type.$==1?"Expense":"Income")]), bc.Element("td", [cu.Create("style", "border: 1px solid #ddd; padding: 8px;")], [bc.TextNode(gM.Category)]), bc.Element("td", [cu.Create("style", "border: 1px solid #ddd; padding: 8px;")], [bc.TextNode(String(gM.Amount))]), bc.Element("td", [cu.Create("style", "border: 1px solid #ddd; padding: 8px;")], [bc.Element("button", [cu.Create("style", "background-color: #f44336; color: white; border: none; padding: 5px 10px; cursor: pointer; border-radius: 3px;"), cu.HandlerImpl("click", () =>() => f().RemoveByKey(gM.Id))], [bc.TextNode("Delete")])])]), f().v)])]), bc.Element("div", [cu.Create("style", "margin-top: 20px;")], [bc.BindView((gM) => bc.Element("div", [], [bc.Element("p", [], [bc.TextNode("Total transactions: "+String(M(gM))+" (Income: "+String(M(L((gN) => gN.Type.$===0, gM)))+", Expense: "+String(M(L((gN) => gN.Type.$===1, gM)))+")")])]), f().v)]), bc.Element("div", [cu.Create("style", "margin-top: 20px; padding: 15px; background-color: #f5f8fa; border-radius: 5px;")], [bc.Element("h3", [], [bc.TextNode("Summary")]), bc.BindView((gM) => { const gN=N((gQ) => gQ.Amount, L((gQ) => gQ.Type.$===0, gM));const gO=N((gQ) => gQ.Amount, L((gQ) => gQ.Type.$===1, gM));const gP=gN-gO;return bc.Element("div", [], [bc.Element("p", [cu.Create("style", "font-weight: bold;")], [bc.TextNode("Total Income: "), bc.Element("span", [cu.Create("style", "color: green;")], [bc.TextNode(String(gN)+" Ft")])]), bc.Element("p", [cu.Create("style", "font-weight: bold;")], [bc.TextNode("Total Expense: "), bc.Element("span", [cu.Create("style", "color: red;")], [bc.TextNode(String(gO)+" Ft")])]), bc.Element("p", [cu.Create("style", "font-weight: bold;")], [bc.TextNode("Balance: "), bc.Element("span", [cu.Create("style", gP>=0?"color: green;":"color: red;")], [bc.TextNode(String(gP)+" Ft")])])]);}, f().v)])]);else if(gx.$==2){ let gy=bc.Element("h1", [], [bc.TextNode("Analytics")]);const gz=bq(Q(P((gM) => gM.Category, f().u0076ar.Get())));const gA=bp((gM) => N((gN) => gN.Amount, L((gN) => gN.Type.$===0&&gN.Category==gM, f().u0076ar.Get())), gz);const gB=bp((gM) => N((gN) => gN.Amount, L((gN) => gN.Type.$===1&&gN.Category==gM, f().u0076ar.Get())), gz);let gC=bc.Element("div", [], [bc.Element("h3", [], [bc.TextNode("Income vs Expense by Category (Radar Chart)")]), bc.Element("div", [cu.Create("id", "chartContainer")], [bc.Element("canvas", [cu.Create("id", "radarChartCanvas"), cu.Create("width", "450"), cu.Create("height", "300"), cu.OnAfterRenderImpl((gM) => { if(d()==null){ } else { const gN=d().$0;if(gN&&typeof gN.destroy==="function")gN.destroy();} e(bo(new globalThis.Chart(gM.getContext("2d"), {type:"radar", data:{labels:gz, datasets:[{label:"Income", backgroundColor:"rgba(54, 162, 235, 0.2)", borderColor:"rgba(54, 162, 235, 1)", pointBackgroundColor:"rgba(54, 162, 235, 1)", data:gA}, {label:"Expense", backgroundColor:"rgba(255, 99, 132, 0.2)", borderColor:"rgba(255, 99, 132, 1)", pointBackgroundColor:"rgba(255, 99, 132, 1)", data:gB}]}, options:{responsive:true, scales:{r:{beginAtZero:true}}}})));})], [])])]);let gD=[gy, gC, bc.BindView((gM) => { if(O(gM))return bc.Element("div", [cu.Create("style", "margin-top: 20px; color: #888;")], [bc.TextNode("No transactions yet. Add some transactions to see analytics.")]);else { const gN=u0037(Q(P((gO) => gO.Category, gM)));return bc.Element("div", [cu.Create("style", "margin-top: 30px;")], [bc.Element("h3", [], [bc.TextNode("Category Breakdown")]), bc.Element("table", [cu.Create("style", "width: 100%; border-collapse: collapse;")], [bc.Element("thead", [], [bc.Element("tr", [], [bc.Element("th", [cu.Create("style", "border: 1px solid #ddd; padding: 8px; text-align: left;")], [bc.TextNode("Category")]), bc.Element("th", [cu.Create("style", "border: 1px solid #ddd; padding: 8px; text-align: right;")], [bc.TextNode("Income (Ft)")]), bc.Element("th", [cu.Create("style", "border: 1px solid #ddd; padding: 8px; text-align: right;")], [bc.TextNode("Expense (Ft)")]), bc.Element("th", [cu.Create("style", "border: 1px solid #ddd; padding: 8px; text-align: right;")], [bc.TextNode("Balance (Ft)")])])]), bc.Element("tbody", [], [bc.Concat(u0036((gO) => { const gP=N((gS) => gS.Amount, L((gS) => gS.Type.$===0&&gS.Category==gO, gM));const gQ=N((gS) => gS.Amount, L((gS) => gS.Type.$===1&&gS.Category==gO, gM));const gR=gP-gQ;return bc.Element("tr", [], [bc.Element("td", [cu.Create("style", "border: 1px solid #ddd; padding: 8px;")], [bc.TextNode(gO)]), bc.Element("td", [cu.Create("style", "border: 1px solid #ddd; padding: 8px; text-align: right;")], [bc.TextNode(String(gP))]), bc.Element("td", [cu.Create("style", "border: 1px solid #ddd; padding: 8px; text-align: right;")], [bc.TextNode(String(gQ))]), bc.Element("td", [cu.Create("style", "border: 1px solid #ddd; padding: 8px; text-align: right; font-weight: bold; color: "+bb(gR>=0?"green":"red"))], [bc.TextNode(String(gR))])]);}, gN))])])]);} }, f().v)];return bc.Element("div", [], gD);} else { const gE=bc.Convert((gM) => { const gN=new bi("New_1");const gO=(gN.h.push(new cW("name", gM)),gN);const gP=bn(gO.k, gO.h, []);const gQ=new bd(gP[1], bk(gP[0]));let gR=(gO.i=gQ,gQ);return gR.Doc;}, i().v);const gF=new bi("New_1");const gG=(gF.h.push(new cU("listcontainer", gE)),gF);const gH=(gG.h.push(new cT("name", gr)),gG);const gI=(gH.h.push(bm(gH.k, "add", () => gH.i, () => { i().Append(gr.Get());gr.Set("");})),gH);const gJ=bn(gI.k, gI.h, [["name", 0, null]]);const gK=new bd(gJ[1], bl(gJ[0]));let gL=(gI.i=gK,gK);return gL.Doc;} }, gs.View)])]);}
function d(){ return cv.currentChart;}
function e(gr){ cv.currentChart=gr;}
function f(){ return cv.Transactions;}
function g(gr){ cv.nextId=gr;}
function h(){ return cv.nextId;}
function i(){ return cv.People;}
function j(gr){ throw new Error(gr);}
function k(gr){ return[gr.K, gr.V];}
function l(gr, gs){ const gt=1+gs-gr;return gt<=0?[]:u0030(gt, (gu) => gu+gr);}
class m { Equals(gr){ return this===gr;} GetHashCode(){ return -1;} }
let n=gj((gr) => class gs extends m { static { n=gr(this);} static Create_1(gt){ return new bW(false, {s:c2(gt, [])}, gt);} static { } });
let o={$:0};
let p={$:1};
let q={$:2};
let r={$:0};
let s={$:1};
function t(gr){ let gs=[];let gt;for(var gu in gr)gs.push(gr[gu]);return gs;}
class u extends m { }
class v extends m { }
class w { }
function x(gr, gs){ if(gr===gs)return true;else { const gt=typeof gr;if(gt=="object"){ if(gr===null||gr===void 0||gs===null||gs===void 0||!x(typeof gs, "object"))return false;else if("Equals"in gr)return gr.Equals(gs);else if("Equals"in gs)return false;else if(gr instanceof Array&&gs instanceof Array)return y(gr, gs);else if(gr instanceof Date&&gs instanceof Date)return z(gr, gs);else { const gu=[true];let gv;for(var gx in gr)if(((gy) => { gu[0]=!gr.hasOwnProperty(gy)||gs.hasOwnProperty(gy)&&x(gr[gy], gs[gy]);return!gu[0];})(gx))break;if(gu[0]){ let gw;for(var gy in gs)if(((gz) => { gu[0]=!gs.hasOwnProperty(gz)||gr.hasOwnProperty(gz);return!gu[0];})(gy))break;} return gu[0];} } else return gt=="function"&&("$Func"in gr?gr.$Func===gs.$Func&&gr.$Target===gs.$Target:"$Invokes"in gr&&"$Invokes"in gs&&y(gr.$Invokes, gs.$Invokes));} }
function y(gr, gs){ let gt;let gu;if(bf(gr)===bf(gs)){ gt=true;gu=0;while(gt&&gu<bf(gr)){!x(be(gr, gu), be(gs, gu))?gt=false:void 0;gu=gu+1;} return gt;} else return false;}
function z(gr, gs){ return gr.getTime()===gs.getTime();}
function A(gr){ const gs=typeof gr;return gs=="function"?0:gs=="boolean"?gr?1:0:gs=="number"?gr:gs=="string"?B(gr):gs=="object"?gr==null?0:gr instanceof Array?C(gr):D(gr):0;}
function B(gr){ let gs;if(gr===null)return 0;else { gs=5381;for(let gt=0, gu=gr.length-1;gt<=gu;gt++)gs=E(gs, gr[gt].charCodeAt());return gs;} }
function C(gr){ let gs=-34948909;for(let gt=0, gu=bf(gr)-1;gt<=gu;gt++)gs=E(gs, A(be(gr, gt)));return gs;}
function D(gr){ if("GetHashCode"in gr)return gr.GetHashCode();else { const gs=[0];let gt;for(var gu in gr)if(((gv) => { gs[0]=E(E(gs[0], B(gv)), A(gr[gv]));return false;})(gu))break;return gs[0];} }
function E(gr, gs){ return(gr<<5)+gr+gs;}
function F(gr, gs){ if(gr===gs)return 0;else { const gt=typeof gr;switch(gt=="function"?1:gt=="boolean"?2:gt=="number"?2:gt=="string"?2:gt=="object"?3:0){ case 0:return typeof gs=="undefined"?0:-1;case 1:return j("Cannot compare function values.");case 2:return gr<gs?-1:1;case 3:if(gr===null)return -1;else if(gs===null)return 1;else if("CompareTo"in gr)return gr.CompareTo(gs);else if("CompareTo0"in gr)return gr.CompareTo0(gs);else if(gr instanceof Array&&gs instanceof Array)return G(gr, gs);else if(gr instanceof Date&&gs instanceof Date)return H(gr, gs);else { const gu=[0];let gv;for(var gx in gr)if(((gy) =>!gr.hasOwnProperty(gy)?false:!gs.hasOwnProperty(gy)?(gu[0]=1,true):(gu[0]=F(gr[gy], gs[gy]),gu[0]!==0))(gx))break;if(gu[0]===0){ let gw;for(var gy in gs)if(((gz) =>!gs.hasOwnProperty(gz)?false:!gr.hasOwnProperty(gz)&&(gu[0]=-1,true))(gy))break;} return gu[0];} break;} } }
function G(gr, gs){ let gt;let gu;if(bf(gr)<bf(gs))return -1;else if(bf(gr)>bf(gs))return 1;else { gt=0;gu=0;while(gt===0&&gu<bf(gr)){ gt=F(be(gr, gu), be(gs, gu));gu=gu+1;} return gt;} }
function H(gr, gs){ return F(gr.getTime(), gs.getTime());}
function I(gr){ const gs={};const gt=cJ(gr);try { while(gt.MoveNext()){ const gu=gt.Current;gs[gu[0]]=gu[1];} } finally { if(typeof gt=="object"&&a(gt))gt.Dispose();} return gs;}
class J extends m { key;u0076ar;storage;v;it;RemoveByKey(gr){ this.u0076ar.Set(this.storage.SRemoveIf((gs) => x(this.key(gs), gr), this.u0076ar.Get()));this.ObsoleteKey(gr);} Append(gr){ const gs=this.u0076ar.Get();const gt=this.key(gr);const gu=br((gv) => x(this.key(gv), gt), gs);if(gu!=null&&gu.$==1)this.u0076ar.Set(this.storage.SSetAt(gu.$0, gr, gs));else this.u0076ar.Set(this.storage.SAppend(gr, gs));this.ObsoleteKey(gt);} ObsoleteKey(gr){ let gs;const gt=(gs=null,[this.it.TryGetValue(gr, {get:() => gs, set:(gu) => { gs=gu;}}), gs]);if(gt[0]){ dE(gt[1]);this.it.RemoveKey(gr);} } GetEnumerator(){ return cJ(this.u0076ar.Get());} GetEnumerator0(){ return cM(this.u0076ar.Get());} static New(gr, gs){ return new this("New", gr, gs);} static New_3(gr, gs, gt){ return new this("New_3", gr, gs, gt);} constructor(gr, gs, gt, gu){ let gv;let gw;if(gr=="New"){ gv=gs;gw=gt;gr="New_3";gs=gv;gt=n.Create_1(bq(R(gv, gw.SInit())));gu=gw;} if(gr=="New_3"){ const gx=gs;const gy=gt;const gz=gu;super();this.key=gx;this.u0076ar=gy;this.storage=gz;this.v=cw((gA) => gA.slice(), this.u0076ar.View);this.it=new cY("New_5");} } }
function K(gr, gs, gt, gu){ return{Id:gr, Type:gs, Category:gt, Amount:gu};}
function L(gr, gs){ return{GetEnumerator:() => { const gt=cJ(gs);return new cN(null, null, (gu) => { let gv=gt.MoveNext();let gw;let gx=false;while(gv){ gw=gt.Current;gr(gw)?(gu.c=gw,gx=true,gv=false):!gt.MoveNext()?gv=false:void 0;} return gx;}, () => { gt.Dispose();});}};}
function M(gr){ let gs;if(gr instanceof Array||x(typeof gr, "string"))return gr.length;else { gs=0;const gt=cJ(gr);try { while(gt.MoveNext())gs=gs+1;return gs;} finally { if(typeof gt=="object"&&a(gt))gt.Dispose();} } }
function N(gr, gs){ let gt=0;const gu=cJ(gs);try { while(gu.MoveNext())gt=gt+gr(gu.Current);} finally { if(typeof gu=="object"&&a(gu))gu.Dispose();} return gt;}
function O(gr){ const gs=cJ(gr);try { return!gs.MoveNext();} finally { if(typeof gs=="object"&&a(gs))gs.Dispose();} }
function P(gr, gs){ return{GetEnumerator:() => { const gt=cJ(gs);return new cN(null, null, (gu) => gt.MoveNext()&&(gu.c=gr(gt.Current),true), () => { gt.Dispose();});}};}
function Q(gr){ return R((gs) => gs, gr);}
function R(gr, gs){ return{GetEnumerator:() => { const gt=cJ(gs);const gu=new dF("New_3");return new cN(null, null, (gv) => { let gw;let gx;if(gt.MoveNext()){ gw=gt.Current;gx=gu.SAdd(gr(gw));while(!gx&&gt.MoveNext()){ gw=gt.Current;gx=gu.SAdd(gr(gw));} return gx&&(gv.c=gw,true);} else return false;}, () => { gt.Dispose();});}};}
function S(gr, gs){ return{GetEnumerator:() => { const gt=cJ(gr);const gu=[true];return new cN(gt, null, (gv) => { if(gv.s.MoveNext()){ gv.c=gv.s.Current;return true;} else { const gw=gv.s;if(!x(gw, null))gw.Dispose();gv.s=null;return gu[0]&&(gu[0]=false,gv.s=cJ(gs),gv.s.MoveNext()?(gv.c=gv.s.Current,true):(gv.s.Dispose(),gv.s=null,false));} }, (gv) => { const gw=gv.s;if(!x(gw, null))gw.Dispose();});}};}
function T(gr){ const gs=cJ(gr);try { return gs.MoveNext()?gs.Current:em();} finally { if(typeof gs=="object"&&a(gs))gs.Dispose();} }
function U(gr, gs, gt){ let gu=gs;const gv=cJ(gt);try { while(gv.MoveNext())gu=gr(gu, gv.Current);return gu;} finally { if(typeof gv=="object"&&a(gv))gv.Dispose();} }
function V(gr, gs){ const gt=cJ(gs);try { while(gt.MoveNext())gr(gt.Current);} finally { if(typeof gt=="object"&&a(gt))gt.Dispose();} }
function W(gr){ return{GetEnumerator:() => cJ(gr())};}
function X(gr, gs){ return Z(P(gr, gs));}
function Y(gr){ const gs=cJ(gr);try { if(!gs.MoveNext())u0031();let gt=gs.Current;while(gs.MoveNext()){ const gu=gs.Current;if(F(gu, gt)===1)gt=gu;} return gt;} finally { if(typeof gs=="object"&&a(gs))gs.Dispose();} }
function Z(gr){ return{GetEnumerator:() => { const gs=cJ(gr);function gt(gu){ while(true){ const gv=gu.s;if(x(gv, null)){ if(gs.MoveNext()){ gu.s=cJ(gs.Current);gu=gu;} else { gs.Dispose();return false;} } else if(gv.MoveNext()){ gu.c=gv.Current;return true;} else { gu.Dispose();gu.s=null;gu=gu;} } } return new cN(null, null, gt, (gu) => { const gv=gu.s;if(!x(gv, null))gv.Dispose();if(!x(gs, null))gs.Dispose();});}};}
function u0030(gr, gs){ return u0032(gr, u0033(gs));}
function u0031(){ return j("The input sequence was empty.");}
function u0032(gr, gs){ gr<0?eo():void 0;return{GetEnumerator:() => { const gt=[cJ(gs)];return new cN(0, null, (gu) => { gu.s=gu.s+1;if(gu.s>gr)return false;else { const gv=gt[0];return x(gv, null)?em():gv.MoveNext()?(gu.c=gv.Current,gu.s===gr?(gv.Dispose(),gt[0]=null):void 0,true):(gv.Dispose(),gt[0]=null,em());} }, () => { const gu=gt[0];if(!x(gu, null))gu.Dispose();});}};}
function u0033(gr){ return{GetEnumerator:() => new cN(0, null, (gs) => { gs.c=gr(gs.s);gs.s=gs.s+1;return true;}, void 0)};}
function u0034(gr, gs){ return!u0035((gt) =>!gr(gt), gs);}
function u0035(gr, gs){ const gt=cJ(gs);try { let gu=false;while(!gu&&gt.MoveNext())gu=gr(gt.Current);return gu;} finally { if(typeof gt=="object"&&a(gt))gt.Dispose();} }
function u0036(gr, gs){ let gt;let gu;let gv;if(gs.$==0)return gs;else { const gw=gk(cO, {$:1});gt=gw;gu=gs;gv=true;while(gv){ gt.$0=gr(gu.$0);gu=gu.$1;if(gu.$==0)gv=false;else { const gx=gk(cO, {$:1});gt=(gt.$1=gx,gx);} } gt.$1=cO.Empty;return gw;} }
function u0037(gr){ if(gr instanceof cO)return gr;else if(gr instanceof Array)return u0038(gr);else { const gs=cJ(gr);try { let gt;let gu=gs.MoveNext();if(!gu)return cO.Empty;else { const gv=gk(cO, {$:1});gt=gv;while(gu){ gt.$0=gs.Current;if(gs.MoveNext()){ const gw=gk(cO, {$:1});gt=(gt.$1=gw,gw);} else gu=false;} gt.$1=cO.Empty;return gv;} } finally { if(typeof gs=="object"&&a(gs))gs.Dispose();} } }
function u0038(gr){ let gs=cO.Empty;for(let gt=bf(gr)-1, gu=0;gt>=gu;gt--)gs=cO.Cons(be(gr, gt), gs);return gs;}
function u0039(gr){ return gr.$==1?gr.$0:ba();}
function $(gr){ return gr.$==1?gr.$1:ba();}
function ba(){ return j("The input list was empty.");}
function bb(gr){ return gr==null?"":gr;}
class bc extends m { docNode;updates;static Concat(gr){ return cQ(bc.Empty, bc.Append, cP(gr));} static RunById(gr, gs){ const gt=globalThis.document.getElementById(gr);if(x(gt, null))j("invalid id: "+gr);else bc.Run(gt, gs);} static TextNode(gr){ return bc.Mk(dy(globalThis.document.createTextNode(gr)), cx());} static BindView(gr, gs){ return bc.EmbedView(cw(gr, gs));} static Append(gr, gs){ return bc.Mk(dz(gr.docNode, gs.docNode), cz(gr.updates, gs.updates));} static get Empty(){ return bc.Mk(null, cx());} static Run(gr, gs){ dP(gr, gs.docNode);bc.RunInPlace(false, gr, gs);} static Element(gr, gs, gt){ const gu=cu.Concat(gs);const gv=bc.Concat(gt);return eA.New(globalThis.document.createElement(gr), gu, gv);} static Mk(gr, gs){ return new bc(gr, gs);} static EmbedView(gr){ const gs=dQ();return bc.Mk(dA(gs), cw(() => { }, cA((gt) => { dR(gs, gt.docNode);return gt.updates;}, gr)));} static Convert(gr, gs){ return bc.Flatten(cB(gr, gs));} static RunInPlace(gr, gs, gt){ const gu=dT(gs, gt.docNode);cC(eq()||ex()?ey(dU(gr, gu, gt.docNode)):() => { dV(gr, gu, gt.docNode);}, gt.updates);} static Flatten(gr){ return bc.EmbedView(cw(bc.Concat, gr));} static TextView(gr){ const gs=d7();return bc.Mk(dD(gs), cw((gt) => { d8(gs, gt);}, gr));} constructor(gr, gs){ super();this.docNode=gr;this.updates=gs;} }
class bd extends m { doc;allVars;anchorRoot;get Doc(){ return this.doc;} SetAnchorRoot(gr){ this.anchorRoot=gr;} constructor(gr, gs){ super();this.doc=gs;this.allVars=gr.$==0?gr.$0:j("Should not happen");this.anchorRoot=null;} }
function be(gr, gs){ bg(gr, gs);return gr[gs];}
function bf(gr){ return gr.dims===2?gr.length*gr.length:gr.length;}
function bg(gr, gs){ if(gs<0||gs>=gr.length)j("Index was outside the bounds of the array.");}
function bh(gr, gs, gt){ bg(gr, gs);gr[gs]=gt;}
class bi extends m { i;k;h;s;static New_1(){ return new this("New_1");} constructor(gr){ if(gr=="New_1"){ let gs;super();this.i=null;this.k=(gs=cV(),String(gs));this.h=gl([]);gm(this, "s", null);} } }
class bj extends m { ForTextView(){ console.warn("Content hole filled with attribute data", this.Name);return null;} AddAttribute(gr, gs){ console.warn("Var hole filled with non-Var data", this.Name);} get AsChoiceView(){ console.warn("Attribute value hole filled with non-text data", this.Name);return fg("");} }
function bk(gr){ bE("index");return gr?bK("index", bo("listitem"), gr):void 0;}
function bl(gr){ bE("index");return gr?bK("index", bo("main"), gr):void 0;}
function bm(gr, gs, gt, gu){ return new cX(gs, (gv) =>(gw) => { const gx=gt();gx.SetAnchorRoot(gv);return gu({Vars:gx, Anchors:gx, Target:gv, Event:gw});});}
function bn(gr, gs, gt){ const gu=new cY("New_5");const gv=new dF("New_3");const gw=cJ(gs);try { while(gw.MoveNext()){ const gx=gw.Current;const gy=gx.Name;gv.SAdd(gy);gu.set_Item(gy, gx);} } finally { if(typeof gw=="object"&&a(gw))gw.Dispose();} return[S(gs, bt((gz) => { const gA=gz[0];const gB=gz[1];const gC=gz[2];if(gv.Contains(gA))return null;else { const gD=gB===0?dG.GetOrAddHoleFor(gr, gA, () => { const gE=gC==null?null:bo(gC.$0);let gF=n.Create_1(gE==null?"":gE.$0);return new cT(gA, gF);}):gB===1?dG.GetOrAddHoleFor(gr, gA, () => { const gE=gC==null?null:bo(gC.$0);let gF=n.Create_1(gE==null?0:gE.$0);return new dH(gA, gF);}):gB===2?dG.GetOrAddHoleFor(gr, gA, () => { const gE=gC==null?null:bo(gC.$0);let gF=n.Create_1(gE==null?false:gE.$0);return new dI(gA, gF);}):gB===3?dG.GetOrAddHoleFor(gr, gA, () => { const gE=gC==null?null:bo(gC.$0);let gF=n.Create_1(gE==null?-8640000000000000:gE.$0);return new dJ(gA, gF);}):gB===4?dG.GetOrAddHoleFor(gr, gA, () => new dK(gA, n.Create_1([]))):gB===5?dG.GetOrAddHoleFor(gr, gA, () => new dL(gA, n.Create_1(bo(globalThis.document.querySelector("[ws-dom="+gA+"]"))))):gB===6?dG.GetOrAddHoleFor(gr, gA, () => { const gE=gC==null?null:bo(gC.$0);let gF=n.Create_1(gE==null?[]:gE.$0);return new dM(gA, gF);}):j("Invalid value type");gu.set_Item(gA, gD);return bo(gD);} }, gt)), {$:0, $0:gu}];}
function bo(gr){ return{$:1, $0:gr};}
function bp(gr, gs){ const gt=new Array(gs.length);for(let gu=0, gv=gs.length-1;gu<=gv;gu++)gt[gu]=gr(gs[gu]);return gt;}
function bq(gr){ if(gr instanceof Array)return gr.slice();else if(gr instanceof cO)return bs(gr);else { const gs=[];const gt=cJ(gr);try { while(gt.MoveNext())gs.push(gt.Current);return gs;} finally { if(typeof gt=="object"&&a(gt))gt.Dispose();} } }
function br(gr, gs){ let gt=null;let gu=0;while(gu<gs.length&&gt==null){ gr(gs[gu])?gt=bo(gu):void 0;gu=gu+1;} return gt;}
function bs(gr){ const gs=[];let gt=gr;while(!(gt.$==0)){ gs.push(u0039(gt));gt=$(gt);} return gs;}
function bt(gr, gs){ const gt=[];for(let gv=0, gw=gs.length-1;gv<=gw;gv++){ const gu=gr(gs[gv]);if(gu==null){ } else gt.push(gu.$0);} return gt;}
function bu(gr, gs){ let gt=null;let gu=0;while(gu<gs.length&&gt==null){ const gv=gr(gs[gu]);if(gv!=null&&gv.$==1)gt=gv;gu=gu+1;} return gt;}
function bv(gr, gs){ let gt=false;let gu=0;while(!gt&&gu<bf(gs))if(gr(gs[gu]))gt=true;else gu=gu+1;return gt;}
function bw(gr, gs){ const gt=[];for(let gu=0, gv=gs.length-1;gu<=gv;gu++)if(gr(gs[gu]))gt.push(gs[gu]);return gt;}
function bx(gr, gs){ for(let gt=0, gu=gs.length-1;gt<=gu;gt++)gr(gs[gt]);}
function by(gr, gs, gt){ let gu=gt;const gv=gs.length;for(let gw=1, gx=gv;gw<=gx;gw++)gu=gr(gs[gv-gw], gu);return gu;}
function bz(gr){ return Array.prototype.concat.apply([], bq(gr));}
function bA(gr, gs){ const gt=bu(gr, gs);return gt==null?j("KeyNotFoundException"):gt.$0;}
function bB(gr, gs){ let gt=true;let gu=0;while(gt&&gu<bf(gs))if(gr(gs[gu]))gu=gu+1;else gt=false;return gt;}
function bC(gr, gs){ const gt=new Array(gr);for(let gu=0, gv=gr-1;gu<=gv;gu++)gt[gu]=gs;return gt;}
function bD(gr, gs){ if(gr<0)j("Negative size given.");else null;const gt=new Array(gr);for(let gu=0, gv=gr-1;gu<=gv;gu++)gt[gu]=gs(gu);return gt;}
function bE(gr){!bF()?(bG(true),bH(globalThis.document.body, "")):void 0;bI().set_Item(gr, bJ(""));}
function bF(){ return dO.LocalTemplatesLoaded;}
function bG(gr){ dO.LocalTemplatesLoaded=gr;}
function bH(gr, gs){ const gt=bJ(gs);const gu=new cY("New_5");const gv=gr.querySelectorAll("[ws-template]");for(let gH=0, gI=gv.length-1;gH<=gI;gH++){ const gw=gv[gH];const gx=gw.getAttribute("ws-template").toLowerCase();gw.removeAttribute("ws-template");gu.set_Item(gx, bL(gw));} const gy=gr.querySelectorAll("[ws-children-template]");for(let gJ=0, gK=gy.length-1;gJ<=gK;gJ++){ const gz=gy[gJ];const gA=gz.getAttribute("ws-children-template").toLowerCase();gz.removeAttribute("ws-children-template");gu.set_Item(gA, bM(gz));} const gB=gr.querySelectorAll("template[id]");for(let gL=0, gM=gB.length-1;gL<=gM;gL++){ const gC=gB[gL];gu.set_Item(gC.getAttribute("id").toLowerCase(), bN(gC));} const gD=gr.querySelectorAll("template[name]");for(let gN=0, gO=gD.length-1;gN<=gO;gN++){ const gE=gD[gN];gu.set_Item(gE.getAttribute("name").toLowerCase(), bN(gE));} const gF=new dF("New_3");function gG(gP){ if(!gt.ContainsKey(gP)){ let gQ;const gR=(gQ=null,[gu.TryGetValue(gP, {get:() => gQ, set:(gS) => { gQ=gS;}}), gQ]);if(gR[0]){ gF.SAdd(gP);gu.RemoveKey(gP);bO(gs, bo(gP), gR[1], bo(gG));} else console.warn(gF.Contains(gP)?"Encountered loop when instantiating "+gP:"Local template does not exist: "+gP);} } while(gu.count>0)gG(T(gu.Keys));}
function bI(){ return dO.LoadedTemplates;}
function bJ(gr){ let gs;const gt=(gs=null,[bI().TryGetValue(gr, {get:() => gs, set:(gv) => { gs=gv;}}), gs]);if(gt[0])return gt[1];else { const gu=new cY("New_5");bI().set_Item(gr, gu);return gu;} }
function bK(gr, gs, gt){ let gu;const gv=(gu=null,[bJ(gr).TryGetValue(gs==null?"":gs.$0, {get:() => gu, set:(gw) => { gu=gw;}}), gu]);return gv[0]?bP(gv[1].cloneNode(true), gt):(console.warn("Local template doesn't exist", gs),bc.Empty);}
function bL(gr){ gr.removeAttribute("ws-template");const gs=gr.getAttribute("ws-replace");if(gs==null){ } else { gr.removeAttribute("ws-replace");const gt=gr.parentNode;if(x(gt, null)){ } else { const gu=globalThis.document.createElement(gr.tagName);gu.setAttribute("ws-replace", gs);gt.replaceChild(gu, gr);} } const gv=globalThis.document.createElement("div");gv.appendChild(gr);return gv;}
function bM(gr){ const gs=globalThis.document.createElement("div");while(gr.hasChildNodes())gs.appendChild(gr.firstChild);return gs;}
function bN(gr){ const gs=globalThis.document.createElement("div");const gt=gr.content;for(let gu=0, gv=gt.childNodes.length-1;gu<=gv;gu++)gs.appendChild(gt.childNodes[gu].cloneNode(true));return gs;}
function bO(gr, gs, gt, gu){ const gv=new dF("New_3");function gw(gD, gE){ while(true)switch(gD){ case 0:if(gE!==null){ const gF=gE.nextSibling;if(x(gE.nodeType, Node.TEXT_NODE))ed(gE);else if(x(gE.nodeType, Node.ELEMENT_NODE))gy(gE);gE=gF;} else return null;break;case 1:const gG=el(gE.nodeName, bo(3), null).toLowerCase();const gH=gG.indexOf(".");const gI=gH===-1?[gr, gG]:[el(gG, null, bo(gH-1)), el(gG, bo(gH+1), null)];const gJ=gI[1];const gK=gI[0];if(gK!=""&&!bI().ContainsKey(gK))return ee(gJ);else { if(gK==""&&gu!=null)gu.$0(gJ);const gL=bI().Item(gK);if(!gL.ContainsKey(gJ))return ee(gJ);else { const gM=gL.Item(gJ);const gN=gM.cloneNode(true);const gO=new dF("New_3");const gP=new cY("New_5");const gQ=gE.attributes;for(let g0=0, g1=gQ.length-1;g0<=g1;g0++){ const gR=gQ.item(g0).name.toLowerCase();const gS=gQ.item(g0).nodeValue;let gT=gS==""?gR:gS.toLowerCase();gP.set_Item(gR, gT);if(!gO.SAdd(gR))console.warn("Hole mapped twice", gR);} for(let g2=0, g3=gE.childNodes.length-1;g2<=g3;g2++){ const gU=gE.childNodes[g2];if(x(gU.nodeType, Node.ELEMENT_NODE))if(!gO.SAdd(gU.nodeName.toLowerCase()))console.warn("Hole filled twice", gJ);} const gV=gE.childNodes.length===1&&x(gE.firstChild.nodeType, Node.TEXT_NODE);if(gV){ const gW=ef(gN, gE.firstChild.textContent, gJ);const gX=((g4) =>(g5) => g4.SAdd(g5))(gO);let gY=((g4) =>(g5) => { if(g5!=null)g4(g5.$0);})((g4) => { gX(g4);});gY(gW);} eg(gN, gO);if(!gV){ for(let g4=0, g5=gE.childNodes.length-1;g4<=g5;g4++){ const gZ=gE.childNodes[g4];if(x(gZ.nodeType, Node.ELEMENT_NODE))if(gZ.hasAttributes())eh(gN, gZ);else gx(gN, gZ);} } ei(gN, gP);ej(gN, gE.parentNode, gE);gE.parentNode.removeChild(gE);return;} } break;} } function gx(gD, gE){ const gF=gE.nodeName.toLowerCase();const gG=(gK, gL) => { if(gF=="title"&&gE.hasChildNodes()){ const gM=dk(gE.textContent);gE.removeChild(gE.firstChild);while(gM.hasChildNodes())gE.appendChild(gM.firstChild);} gy(gE);return ej(gE, gK, gL);};bQ(gD, "[ws-attr-holes]", (gK) => { const gL=eE(gK.getAttribute("ws-attr-holes"), [" "], 1);for(let gP=0, gQ=gL.length-1;gP<=gQ;gP++){ const gM=be(gL, gP);let gN=new RegExp("\\${"+gF+"}", "ig");let gO=gK.getAttribute(gM).replace(gN, gE.textContent);gK.setAttribute(gM, gO);} });const gH=gD.querySelector("[ws-hole="+gF+"]");if(x(gH, null)){ const gI=gD.querySelector("[ws-replace="+gF+"]");if(x(gI, null)){ const gJ=gD.querySelector("slot[name="+gF+"]");return gD.tagName.toLowerCase()=="template"?(gG(gJ.parentNode, gJ),void gJ.parentNode.removeChild(gJ)):null;} else { gG(gI.parentNode, gI);gI.parentNode.removeChild(gI);return;} } else { while(gH.hasChildNodes())gH.removeChild(gH.lastChild);gH.removeAttribute("ws-hole");return gG(gH, null);} } function gy(gD){ if(!gD.hasAttribute("ws-preserve"))if(eF(gD.nodeName.toLowerCase(), "ws-"))gA(gD);else { ek(gD);gz(gD.firstChild);} } function gz(gD){ return gw(0, gD);} function gA(gD){ return gw(1, gD);} function gB(gD){ while(true){ const gE=gD.querySelector("[ws-template]");if(x(gE, null)){ const gF=gD.querySelector("[ws-children-template]");if(x(gF, null)){ const gG=gD.querySelectorAll("template[id]");for(let gM=1, gN=gG.length-1;gM<=gN;gM++){ const gH=gG[gM];if(gv.Contains(gH)){ } else { bO(gr, bo(gH.getAttribute("id")), gH, null);gv.SAdd(gH);} } const gI=gD.querySelectorAll("template[name]");for(let gO=1, gP=gI.length-1;gO<=gP;gO++){ const gJ=gI[gO];if(gv.Contains(gJ)){ } else { bO(gr, bo(gJ.getAttribute("name")), gJ, null);gv.SAdd(gJ);} } return null;} else { const gK=gF.getAttribute("ws-children-template");gF.removeAttribute("ws-children-template");bO(gr, bo(gK), gF, null);gD=gD;} } else { const gL=gE.getAttribute("ws-template");(bR(gr, bo(gL), gE))(null);gD=gD;} } } const gC=(gs==null?"":gs.$0).toLowerCase();bJ(gr).set_Item(gC, gt);if(gt.hasChildNodes()){ gB(gt);gz(gt.firstChild);} }
function bP(gr, gs){ let gt;const gu=bS(gr, S(gs, bT().Values));const gv=gu[1];const gw=gu[0];const gx=gw.Els;return!x(gx, null)&&gx.length===1&&(be(gx, 0)instanceof Node&&(x(be(gx, 0).nodeType, Node.ELEMENT_NODE)&&(gt=be(gx, 0),true)))?eA.TreeNode(gw, gv):bc.Mk(dB(gw), gv);}
function bQ(gr, gs, gt){ dq(gr, gs, (gu) => { if(gu.closest("[ws-preserve]")==null)gt(gu);});}
function bR(gr, gs, gt){ const gu=bL(gt);return(gv) => { bO(gr, gs, gu, gv);};}
function bS(gr, gs){ let gt;const gu=[];const gv=[];const gw=[];const gx=[];const gy=new cY("New_5");const gz=cJ(gs);try { while(gz.MoveNext()){ const gA=gz.Current;gy.set_Item(gA.Name, gA);} } finally { if(typeof gz=="object"&&a(gz))gz.Dispose();} let gB=dr(gr);const gC=(gL, gM) => { const gN=c_(gL, gM);gv.push(c7(gN));gw.push([gL, gN]);const gO=gn(gN.OnAfterRender);if(gO==null)return null;else { const gP=gO.$0;gx.push(() => { gP(gL);});return;} };const gD=(gL) => { let gM;const gN=(gM=null,[gy.TryGetValue(gL, {get:() => gM, set:(gQ) => { gM=gQ;}}), gM]);if(gN[0]){ const gO=gN[1];if(gO instanceof cU)return bo(gO.Value);else if(gO instanceof cW)return bo(bc.TextNode(gO.Value));else { const gP=gO.ForTextView();return gP==null?null:bo(bc.TextView(gP.$0));} } else return null;};bQ(gr, "[ws-hole]", (gL) => { const gM=gL.getAttribute("ws-hole");gL.removeAttribute("ws-hole");while(gL.hasChildNodes())gL.removeChild(gL.lastChild);const gN=gD(gM);if(gN!=null&&gN.$==1){ const gO=gN.$0;dP(gL, gO.docNode);gu.push(eb.New(c$(gL), gO.docNode, null, gL, cZ(), null));gv.push(gO.updates);} });bQ(gr, "[ws-replace]", (gL) => { const gM=gD(gL.getAttribute("ws-replace"));if(gM!=null&&gM.$==1){ const gN=gM.$0;const gO=gL.parentNode;const gP=globalThis.document.createTextNode("");gO.replaceChild(gP, gL);const gQ=d3(gP, gN.docNode);gB=dr(gr);const gR=br((gS) => gL===gS, gB);if(gR==null){ } else bh(gB, gR.$0, gN.docNode);gu.push(eb.New(c$(gO), gN.docNode, bo([gQ, gP]), gO, cZ(), null));gv.push(gN.updates);} });let gE=false;bQ(gr, "slot", (gL) => { const gM=gL.getAttribute("name");const gN=gM==""||gM==null?"default":gM.toLowerCase();if(gE&&gN=="default"||!x(gr.parentElement, null)){ } else { while(gL.hasChildNodes())gL.removeChild(gL.lastChild);if(gN=="default")gE=true;const gO=gD(gN);if(gO!=null&&gO.$==1){ const gP=gO.$0;dP(gL, gP.docNode);gu.push(eb.New(c$(gL), gP.docNode, null, gL, cZ(), null));gv.push(gP.updates);} } });bQ(gr, "[ws-attr]", (gL) => { let gM;const gN=gL.getAttribute("ws-attr");gL.removeAttribute("ws-attr");const gO=(gM=null,[gy.TryGetValue(gN, {get:() => gM, set:(gQ) => { gM=gQ;}}), gM]);if(gO[0]){ const gP=gO[1];if(gP instanceof fc)gC(gL, gP.Value);else console.warn("Attribute hole filled with non-attribute data", gN);} });bQ(gr, "[ws-on]", (gL) => { gC(gL, cu.Concat(bt((gM) => { let gN;const gO=eE(gM, [":"], 1);const gP=(gN=null,[gy.TryGetValue(be(gO, 1), {get:() => gN, set:(gR) => { gN=gR;}}), gN]);if(gP[0]){ const gQ=gP[1];return gQ instanceof fd?bo(ck(be(gO, 0), gQ.Value)):gQ instanceof cX?bo(cu.Handler(be(gO, 0), gQ.Value)):(console.warn("Event hole on"+be(gO, 0)+" filled with non-event data", be(gO, 1)),null);} else return null;}, eE(gL.getAttribute("ws-on"), [" "], 1))));gL.removeAttribute("ws-on");});bQ(gr, "[ws-onafterrender]", (gL) => { let gM;const gN=gL.getAttribute("ws-onafterrender");const gO=(gM=null,[gy.TryGetValue(gN, {get:() => gM, set:(gQ) => { gM=gQ;}}), gM]);if(gO[0]){ const gP=gO[1];if(gP instanceof fe){ gL.removeAttribute("ws-onafterrender");gC(gL, cl(gP.Value));} else if(gP instanceof ff){ gL.removeAttribute("ws-onafterrender");gC(gL, cl(gP.Value));} else console.warn("onafterrender hole filled with non-onafterrender data", gN);} });bQ(gr, "[ws-var]", (gL) => { let gM;const gN=gL.getAttribute("ws-var");gL.removeAttribute("ws-var");const gO=(gM=null,[gy.TryGetValue(gN, {get:() => gM, set:(gP) => { gM=gP;}}), gM]);if(gO[0])gO[1].AddAttribute((gP) =>(gQ) => gC(gP, gQ), gL);});const gF=() => { bV("[ws-dom]", (gL) => { let gM;let gN;let gO;const gP=(gM=null,[gy.TryGetValue(gL.getAttribute("ws-dom").toLowerCase(), {get:() => gM, set:(gT) => { gM=gT;}}), gM]);if(gP[0]){ const gQ=gP[1];if(gQ instanceof dL){ const gR=gQ.Value;gL.removeAttribute("ws-dom");gN=gL;const gS=new MutationObserver((gT, gU) => { bx((gV) => { gV.removedNodes.forEach(go((gW) => gW[0]===gN&&gV.addedNodes.length!==1?(gR.SetFinal(null),gU.disconnect()):null), null);}, gT);});if(gL.parentElement!==null)gS.observe(gL.parentElement, (gO={},gO.childList=true,gO));gR.Set(bo(gL));cC((gT) => { if(gT!=null&&gT.$==1){ const gU=gT.$0;if(gN===gU){ } else { gN.replaceWith(gU);gN=gU;} } else { gN.remove();gS.disconnect();} }, gR.View);} } });};bQ(gr, "[ws-attr-holes]", (gL) => { const gM=new RegExp(bU(), "g");const gN=eE(gL.getAttribute("ws-attr-holes"), [" "], 1);gL.removeAttribute("ws-attr-holes");for(let gO=0, gP=gN.length-1;gO<=gP;gO++)((() => { let gQ;const gR=be(gN, gO);const gS=gL.getAttribute(gR);let gT=null;let gU=0;const gV=[];while(gT=gM.exec(gS),gT!==null){ const gW=el(gS, bo(gU), bo(gM.lastIndex-be(gT, 0).length-1));gU=gM.lastIndex;gV.push([gW, be(gT, 1)]);} const gX=el(gS, bo(gU), null);gM.lastIndex=0;const gY=by((g3, g4) =>(((g5) => { const g6=g5[0];const g7=g5[1];return(g8) => { let g9;const g_=g8[0];const g$=g8[1];const ha=(g9=null,[gy.TryGetValue(g7, {get:() => g9, set:(hc) => { g9=hc;}}), g9]);const hb=ha[0]?ha[1].AsChoiceView:fg("");return hb.$==1?[g6, cO.Cons(g_==""?hb.$0:cw((hc) => hc+g_, hb.$0), g$)]:[g6+hb.$0+g_, g$];};})(g3))(g4), gV, [gX, cO.Empty]);if(gY[1].$==1){ if(gY[1].$1.$==1){ if(gY[1].$1.$1.$==1){ if(gY[1].$1.$1.$1.$==0){ const gZ=gY[0];gQ=cj(gR, cF((g3, g4, g5) => gZ+g3+g4+g5, gY[1].$0, gY[1].$1.$0, gY[1].$1.$1.$0));} else { const g0=gY[0];gQ=cj(gR, cw((g3) => g0+eD("", g3), cG(gY[1])));} } else { const g1=gY[0];gQ=cj(gR, cH((g3, g4) => g1+g3+g4, gY[1].$0, gY[1].$1.$0));} } else if(gY[0]=="")gQ=cj(gR, gY[1].$0);else { const g2=gY[0];gQ=cj(gR, cw((g3) => g2+g3, gY[1].$0));} } else gQ=cu.Create(gR, gY[0]);return gC(gL, gQ);})());});let gG=gB;const gH=gx.length==0?bo(() => { gF();}):bo((gL) => { gF();bx((gM) => { gM(gL);}, gx);});const gI=!x(gB, null)&&gB.length===1&&(be(gB, 0)instanceof Node&&(be(gB, 0)instanceof Element&&(gt=be(gB, 0),true)))?bo(gt):null;let gJ={Els:gG, Dirty:true, Holes:gu, Attrs:gw, Render:gH?gH.$0:void 0, El:gI?gI.$0:void 0};let gK=gp(gJ, ["Render", "El"]);return[gK, cQ(cx(), cz, gv)];}
function bT(){ return dO.GlobalHoles;}
function bU(){ return dO.TextHoleRE;}
function bV(gr, gs){ dt(gr, (gt) => { if(gt.closest("[ws-preserve]")==null)gs(gt);});}
class bW extends u { isConst;current;snap;view;id;get View(){ return this.view;} Set(gr){ if(this.isConst)(((gs) => gs("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal"))((gs) => { console.log(gs);}));else { dE(this.snap);this.current=gr;this.snap={s:c2(gr, [])};} } Get(){ return this.current;} SetFinal(gr){ if(this.isConst)(((gs) => gs("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal"))((gs) => { console.log(gs);}));else { dE(this.snap);this.isConst=true;this.current=gr;this.snap={s:c3(gr)};} } UpdateMaybe(gr){ const gs=gr(this.Get());if(gs!=null&&gs.$==1)this.Set(gs.$0);} constructor(gr, gs, gt){ super();this.isConst=gr;this.current=gt;this.snap=gs;this.view=() => this.snap;this.id=cZ();} }
function bX(gr, gs){ const gt=gs.s;if(gt!=null&&gt.$==0)return{s:c3(gr(gt.$0))};else { const gu={s:c4([], [])};bZ(gs, (gv) => { b0(gu, gs, gr(gv));}, gu);return gu;} }
function bY(gr, gs){ const gt=gr.s;if(gt==null)gs();else gt!=null&&gt.$==2?gt.$1.push(gs):gt!=null&&gt.$==3?gt.$1.push(gs):void 0;}
function bZ(gr, gs, gt){ const gu=gr.s;if(gu==null)dE(gt);else gu!=null&&gu.$==2?(b2(gu.$1, gt),gs(gu.$0)):gu!=null&&gu.$==3?(gu.$0.push(gs),b2(gu.$1, gt)):gs(gu.$0);}
function b0(gr, gs, gt){ const gu=gs.s;if(gu!=null&&gu.$==0)b3(gr, gt);else b4(gr, gt);}
function b1(gr, gs){ const gt=gr.s;const gu=gs.s;if(gt!=null&&gt.$==0)return gu!=null&&gu.$==0?{s:c3(null)}:gs;else if(gu!=null&&gu.$==0)return gr;else { const gv={s:c4([], [])};const gw=() => { const gx=gv.s;if(!(gx!=null&&gx.$==0||gx!=null&&gx.$==2)){ const gy=b5(gr);const gz=b5(gs);if(gy!=null&&gy.$==1)if(gz!=null&&gz.$==1)if(gy.$0[1]&&gz.$0[1])b3(gv, null);else b4(gv, null);} };bZ(gr, gw, gv);bZ(gs, gw, gv);return gv;} }
function b2(gr, gs){ gr.push(gs);if(gr.length%20===0){ const gt=gr.slice(0);fr(gr);for(let gv=0, gw=bf(gt)-1;gv<=gw;gv++){ const gu=be(gt, gv);if(typeof gu=="object")(((gx) => { if(gx.s)gr.push(gx);})(gu));else(((gx) => { gr.push(gx);})(gu));} } else void 0;}
function b3(gr, gs){ const gt=gr.s;if(gt!=null&&gt.$==3){ gr.s=c3(gs);const gu=gt.$0;for(let gv=0, gw=bf(gu)-1;gv<=gw;gv++)(be(gu, gv))(gs);} else void 0;}
function b4(gr, gs){ const gt=gr.s;if(gt!=null&&gt.$==3){ gr.s=c2(gs, gt.$1);const gu=gt.$0;for(let gv=0, gw=bf(gu)-1;gv<=gw;gv++)(be(gu, gv))(gs);} else void 0;}
function b5(gr){ const gs=gr.s;return gs!=null&&gs.$==0?bo([gs.$0, true]):gs!=null&&gs.$==2?bo([gs.$0, false]):null;}
function b6(gr, gs, gt){ const gu=gr.s;if(gu==null)gt();else gu!=null&&gu.$==2?(gu.$1.push(gt),gs(gu.$0)):gu!=null&&gu.$==3?(gu.$0.push(gs),gu.$1.push(gt)):gs(gu.$0);}
function b7(gr){ const gs={s:c4([], [])};bZ(gr, (gt) => { const gu=gt();bZ(gu, (gv) => { let gw;const gx=gu.s;if(gx!=null&&gx.$==0){ const gy=gr.s;gw=gy!=null&&gy.$==0;} else gw=false;if(gw)b3(gs, gv);else b4(gs, gv);}, gs);}, gs);return gs;}
function b8(gr){ const gs=gr.s;if(gs==null)return gr;else if(gs!=null&&gs.$==2){ const gt={s:c2(gs.$0, [])};ca(gr, gt);return gt;} else if(gs!=null&&gs.$==3){ const gu={s:c4([], [])};bZ(gr, (gv) => { b0(gu, gr, gv);}, gu);return gu;} else return gr;}
function b9(gr, gs, gt, gu){ const gv=gs.s;const gw=gt.s;const gx=gu.s;if(gv!=null&&gv.$==0)return gw!=null&&gw.$==0?gx!=null&&gx.$==0?{s:c3(gr(gv.$0, gw.$0, gx.$0))}:cb(gr, gv.$0, gw.$0, gu):gx!=null&&gx.$==0?cc(gr, gv.$0, gx.$0, gt):cd(gr, gv.$0, gt, gu);else if(gw!=null&&gw.$==0)return gx!=null&&gx.$==0?ce(gr, gw.$0, gx.$0, gs):cf(gr, gw.$0, gs, gu);else if(gx!=null&&gx.$==0)return cg(gr, gx.$0, gs, gt);else { const gy={s:c4([], [])};const gz=() => { const gA=gy.s;if(!(gA!=null&&gA.$==0||gA!=null&&gA.$==2)){ const gB=b5(gs);const gC=b5(gt);const gD=b5(gu);if(gB!=null&&gB.$==1)if(gC!=null&&gC.$==1)if(gD!=null&&gD.$==1)if(gB.$0[1]&&gC.$0[1]&&gD.$0[1])b3(gy, gr(gB.$0[0], gC.$0[0], gD.$0[0]));else b4(gy, gr(gB.$0[0], gC.$0[0], gD.$0[0]));} };bZ(gs, gz, gy);bZ(gt, gz, gy);bZ(gu, gz, gy);return gy;} }
function b_(gr){ const gs=bq(gr);if(gs.length==0)return{s:c3([])};else { const gt={s:c4([], [])};const gu=[bf(gs)-1];const gv=() => { if(gu[0]===0){ const gw=bp((gx) => { const gy=gx.s;return gy!=null&&gy.$==0?gy.$0:gy!=null&&gy.$==2?gy.$0:j("value not found by View.Sequence");}, gs);if(bB((gx) => { const gy=gx.s;return gy!=null&&gy.$==0;}, gs))b3(gt, gw);else b4(gt, gw);} else gu[0]=gu[0]-1;};bx((gw) => { bZ(gw, gv, gt);}, gs);return gt;} }
function b$(gr, gs, gt){ const gu=gs.s;const gv=gt.s;if(gu!=null&&gu.$==0)return gv!=null&&gv.$==0?{s:c3(gr(gu.$0, gv.$0))}:ch(gr, gu.$0, gt);else if(gv!=null&&gv.$==0)return ci(gr, gv.$0, gs);else { const gw={s:c4([], [])};const gx=() => { const gy=gw.s;if(!(gy!=null&&gy.$==0||gy!=null&&gy.$==2)){ const gz=b5(gs);const gA=b5(gt);if(gz!=null&&gz.$==1)if(gA!=null&&gA.$==1)if(gz.$0[1]&&gA.$0[1])b3(gw, gr(gz.$0[0], gA.$0[0]));else b4(gw, gr(gz.$0[0], gA.$0[0]));} };bZ(gs, gx, gw);bZ(gt, gx, gw);return gw;} }
function ca(gr, gs){ const gt=gr.s;if(gt==null)dE(gs);else gt!=null&&gt.$==2?b2(gt.$1, gs):gt!=null&&gt.$==3?b2(gt.$1, gs):void 0;}
function cb(gr, gs, gt, gu){ return bX((gv) => gr(gs, gt, gv), gu);}
function cc(gr, gs, gt, gu){ return bX((gv) => gr(gs, gv, gt), gu);}
function cd(gr, gs, gt, gu){ return b$((gv, gw) => gr(gs, gv, gw), gt, gu);}
function ce(gr, gs, gt, gu){ return bX((gv) => gr(gv, gs, gt), gu);}
function cf(gr, gs, gt, gu){ return b$((gv, gw) => gr(gv, gs, gw), gt, gu);}
function cg(gr, gs, gt, gu){ return b$((gv, gw) => gr(gv, gw, gs), gt, gu);}
function ch(gr, gs, gt){ return bX((gu) => gr(gs, gu), gt);}
function ci(gr, gs, gt){ return bX((gu) => gr(gu, gs), gt);}
function cj(gr, gs){ return c5(gs, (gt) =>(gu) => gt.setAttribute(gr, gu));}
function ck(gr, gs){ return c6((gt) => { gt.addEventListener(gr, (gu) =>(gs(gt))(gu), false);});}
function cl(gr){ return cu.A4(gr);}
function cm(gr){ return cs(fX(), gr);}
function cn(gr){ return cs(fY(), gr);}
function co(gr){ return cs(fZ(), gr);}
function cp(gr){ return cs(f0(), gr);}
function cq(gr){ return cs(f1(), gr);}
function cr(gr){ return cs(f2(), gr);}
function cs(gr, gs){ const gt=gr(gs);return cu.Append(c6(gt[0]), ct(gt[1], gt[2]));}
function ct(gr, gs){ return c5(gs, gr);}
class cu { static HandlerImpl(gr, gs){ return c6((gt) => { gt.addEventListener(gr, (gu) =>(gs(gt))(gu), false);});} static Create(gr, gs){ return c6((gt) => { gt.setAttribute(gr, gs);});} static OnAfterRenderImpl(gr){ return cu.A4(gr);} static A4(gr){ return gk(cu, {$:4, $0:gr});} static Concat(gr){ const gs=cP(gr);return cQ(c9(), cu.Append, gs);} static A1(gr){ return gk(cu, {$:1, $0:gr});} static A3(gr){ return gk(cu, {$:3, $0:gr});} static Append(gr, gs){ return c8(gr, gs);} static Handler(gr, gs){ return cu.HandlerImpl(gr, gs);} static A2(gr, gs){ return gk(cu, {$:2, $0:gr, $1:gs});} }
let cv=gj((gr) => class gs { static { cv=gr(this);} static currentChart;static Transactions;static nextId;static People;static { this.People=dv(["John", "Paul"]);this.nextId=1;this.Transactions=dw((gt) => gt.Id, cO.Empty);this.currentChart=null;} });
function cw(gr, gs){ return cy(() => bX(gr, gs()));}
function cx(gr){ const gs={s:c3(gr)};return() => gs;}
function cy(gr){ const gs={c:null, o:gr};return() => { let gt=gs.c;if(gt===null){ gt=gs.o();gs.c=gt;const gu=gt.s;if(gu!=null&&gu.$==0)gs.o=null;else bY(gt, () => { gs.c=null;});return gt;} else return gt;};}
function cz(gr, gs){ return cy(() => b1(gr(), gs()));}
function cA(gr, gs){ return cD(cw(gr, gs));}
function cB(gr, gs){ return cE((gt) => gt, gr, gs);}
function cC(gr, gs){ function gt(){ b6(gs(), gr, () => { eY().Fork(gt);});} eY().Fork(gt);}
function cD(gr){ return cy(() => b7(gr()));}
function cE(gr, gs, gt){ const gu=[new cY("New_5")];return cw((gv) => { const gw=gu[0];const gx=new cY("New_5");const gy=cR((gz) => { const gA=gr(gz);const gB=gw.ContainsKey(gA)?gw.Item(gA):gs(gz);gx.set_Item(gA, gB);return gB;}, bq(gv));gu[0]=gx;return gy;}, gt);}
function cF(gr, gs, gt, gu){ return cy(() => b9(gr, gs(), gt(), gu()));}
function cG(gr){ return cy(() => b_(P((gs) => gs(), gr)));}
function cH(gr, gs, gt){ return cy(() => b$(gr, gs(), gt()));}
function cI(gr, gs){ return gb(gr, -2147483648, 2147483647, gs);}
function cJ(gr){ return gr instanceof Array?cK(gr):x(typeof gr, "string")?cL(gr):gr.GetEnumerator();}
function cK(gr){ return new cN(0, null, (gs) => { const gt=gs.s;return gt<bf(gr)&&(gs.c=be(gr, gt),gs.s=gt+1,true);}, void 0);}
function cL(gr){ return new cN(0, null, (gs) => { const gt=gs.s;return gt<gr.length&&(gs.c=gr[gt],gs.s=gt+1,true);}, void 0);}
function cM(gr){ return gr instanceof Array?cK(gr):x(typeof gr, "string")?cL(gr):"GetEnumerator0"in gr?gr.GetEnumerator0():gr.GetEnumerator();}
class cN extends m { s;c;n;d;e;Dispose(){ if(this.d)this.d(this);} MoveNext(){ const gr=this.n(this);this.e=gr?1:2;return gr;} get Current(){ return this.e===1?this.c:this.e===0?j("Enumeration has not started. Call MoveNext."):j("Enumeration already finished.");} constructor(gr, gs, gt, gu){ super();this.s=gr;this.c=gs;this.n=gt;this.d=gu;this.e=0;} }
class cO { static Empty=gk(cO, {$:0});static Cons(gr, gs){ return gk(cO, {$:1, $0:gr, $1:gs});} GetEnumerator(){ return new cN(this, null, (gr) => { const gs=gr.s;return gs.$==0?false:(gr.c=gs.$0,gr.s=gs.$1,true);}, void 0);} }
function cP(gr){ if(gr instanceof Array)return gr;else if(gr instanceof cO)return bs(gr);else if(gr===null)return[];else { const gs=[];const gt=cJ(gr);try { while(gt.MoveNext())gs.push(gt.Current);return gs;} finally { if(typeof gt=="object"&&a(gt))gt.Dispose();} } }
function cQ(gr, gs, gt){ const gu=bf(gt);function gv(gw){ return(gx) => { let gy;switch(gx<=0?0:gx===1?gw>=0&&gw<gu?1:(gy=gx,2):(gy=gx,2)){ case 0:return gr;case 1:return be(gt, gw);case 2:const gz=gx/2>>0;return gs((gv(gw))(gz), (gv(gw+gz))(gx-gz));} };} return(gv(0))(gu);}
function cR(gr, gs){ for(let gt=0, gu=gs.length-1;gt<=gu;gt++)gs[gt]=gr(gs[gt]);return gs;}
function cS(gr, gs, gt, gu){ const gv=bf(gu);function gw(gx){ return(gy) => { let gz;switch(gy<=0?0:gy===1?gx>=0&&gx<gv?1:(gz=gy,2):(gz=gy,2)){ case 0:return gs;case 1:return gr(be(gu, gx));case 2:const gA=gy/2>>0;return gt((gw(gx))(gA), (gw(gx+gA))(gy-gA));} };} return(gw(0))(gv);}
class cT extends bj { name;fillWith;get Name(){ return this.name;} ForTextView(){ return bo(this.fillWith.View);} AddAttribute(gr, gs){(gr(gs))(cm(this.fillWith));} get AsChoiceView(){ return fh(cw(String, this.fillWith.View));} constructor(gr, gs){ super();this.name=gr;this.fillWith=gs;} }
class cU extends bj { name;fillWith;get Name(){ return this.name;} get Value(){ return this.fillWith;} constructor(gr, gs){ super();this.name=gr;this.fillWith=gs;} }
function cV(){ return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new RegExp("[xy]", "g"), (gr) => { const gs=Math.random()*16|0;const gt=gr=="x"?gs:gs&3|8;return gt.toString(16);});}
class cW extends bj { name;fillWith;get Name(){ return this.name;} get Value(){ return this.fillWith;} get AsChoiceView(){ return fg(this.fillWith);} constructor(gr, gs){ super();this.name=gr;this.fillWith=gs;} }
class cX extends bj { name;fillWith;get Name(){ return this.name;} get Value(){ return this.fillWith;} constructor(gr, gs){ super();this.name=gr;this.fillWith=gs;} }
class cY extends m { equals;hash;count;data;set_Item(gr, gs){ this.set(gr, gs);} TryGetValue(gr, gs){ const gt=this.data[this.hash(gr)];if(gt==null)return false;else { const gu=bu((gv) => { const gw=k(gv);return this.equals.apply(null, [gw[0], gr])?bo(gw[1]):null;}, gt);return gu!=null&&gu.$==1&&(gs.set(gu.$0),true);} } RemoveKey(gr){ return this.remove(gr);} ContainsKey(gr){ const gs=this.data[this.hash(gr)];return gs==null?false:bv((gt) => this.equals.apply(null, [(k(gt))[0], gr]), gs);} get Keys(){ return new ep(this);} set(gr, gs){ const gt=this.hash(gr);const gu=this.data[gt];if(gu==null){ this.count=this.count+1;this.data[gt]=new Array({K:gr, V:gs});} else { const gv=br((gw) => this.equals.apply(null, [(k(gw))[0], gr]), gu);if(gv==null){ this.count=this.count+1;gu.push({K:gr, V:gs});} else gu[gv.$0]={K:gr, V:gs};} } remove(gr){ const gs=this.hash(gr);const gt=this.data[gs];if(gt==null)return false;else { const gu=bw((gv) =>!this.equals.apply(null, [(k(gv))[0], gr]), gt);return bf(gu)<gt.length&&(this.count=this.count-1,this.data[gs]=gu,true);} } Item(gr){ return this.get(gr);} GetEnumerator(){ return cM(bz(t(this.data)));} get Values(){ return new fi(this);} get(gr){ const gs=this.data[this.hash(gr)];return gs==null?ec():bA((gt) => { const gu=k(gt);return this.equals.apply(null, [gu[0], gr])?bo(gu[1]):null;}, gs);} static New_5(){ return new this("New_5");} static New_6(gr, gs, gt){ return new this("New_6", gr, gs, gt);} constructor(gr, gs, gt, gu){ if(gr=="New_5"){ gr="New_6";gs=[];gt=x;gu=A;} if(gr=="New_6"){ const gv=gs;const gw=gt;const gx=gu;super();this.equals=gw;this.hash=gx;this.count=0;this.data=[];const gy=cJ(gv);try { while(gy.MoveNext()){ const gz=gy.Current;this.set(gz.K, gz.V);} } finally { if(typeof gy=="object"&&a(gy))gy.Dispose();} } } }
function cZ(){ c0(c1()+1);return c1();}
function c0(gr){ ez.counter=gr;}
function c1(){ return ez.counter;}
function c2(gr, gs){ return{$:2, $0:gr, $1:gs};}
function c3(gr){ return{$:0, $0:gr};}
function c4(gr, gs){ return{$:3, $0:gr, $1:gs};}
function c5(gr, gs){ return cu.A1(new d$(gr, gs));}
function c6(gr){ return cu.A3(gr);}
function c7(gr){ return cS((gs) => gs.NChanged, cx(), cz, gr.DynNodes);}
function c8(gr, gs){ if(gr===null)return gs;else if(gs===null)return gr;else { const gt=cu.A2(gr, gs);dg(gt, dh(gr)|dh(gs));return gt;} }
function c9(){ return fq.EmptyAttr;}
function c_(gr, gs){ const gt=[];const gu=[];function gv(gy){ while(true){ if(!(gy===null)){ if(gy!=null&&gy.$==1)return gt.push(gy.$0);else if(gy!=null&&gy.$==2){ const gz=gy.$1;const gA=gy.$0;gv(gA);gy=gz;} else return gy!=null&&gy.$==3?gy.$0(gr):gy!=null&&gy.$==4?gu.push(gy.$0):null;} else return null;} } gv(gs);const gw=gt.slice(0);let gx=eC(gr, dh(gs), gw, gu.length===0?null:bo((gy) => { V((gz) => { gz(gy);}, gu);}));return gx;}
function c$(gr){ return eC(gr, 0, [], null);}
function da(gr){ const gs=2;return(gr.DynFlags&gs)===gs;}
function db(gr){ return di(gr, (gs, gt) => gs.NGetExitAnim(gt));}
function dc(gr){ const gs=1;return(gr.DynFlags&gs)===gs;}
function dd(gr){ return di(gr, (gs, gt) => gs.NGetEnterAnim(gt));}
function de(gr){ const gs=4;return(gr.DynFlags&gs)===gs;}
function df(gr){ return di(gr, (gs, gt) => gs.NGetChangeAnim(gt));}
function dg(gr, gs){ gr.flags=gs;}
function dh(gr){ return gr!==null&&gr.hasOwnProperty("flags")?gr.flags:0;}
function di(gr, gs){ return ev(bp((gt) => gs(gt, gr.DynElem), gr.DynNodes));}
function dj(gr, gs){ bx((gt) => { gt.NSync(gr);}, gs.DynNodes);}
function dk(gr){ const gs=globalThis.document.createElement("div");if(!dl().test(gr)){ gs.appendChild(globalThis.document.createTextNode(gr));return gs;} else { const gt=dp().exec(gr);const gu=x(gt, null)?"":be(gt, 1).toLowerCase();const gv=(dm())[gu];const gw=gv?gv:dn();gs.innerHTML=gw[1]+gr.replace(do_1(), "<$1></$2>")+gw[2];function gx(gy, gz){ while(true){ if(gz===0)return gy;else { const gA=gz;gy=gy.lastChild;gz=gA-1;} } } return gx(gs, gw[0]);} }
function dl(){ return fj.rhtml;}
function dm(){ return fj.wrapMap;}
function dn(){ return fj.defaultWrap;}
function do_1(){ return fj.rxhtmlTag;}
function dp(){ return fj.rtagName;}
function dq(gr, gs, gt){ const gu=gr.querySelectorAll(gs);for(let gv=0, gw=gu.length-1;gv<=gw;gv++)gt(gu[gv]);}
function dr(gr){ const gs=[];for(let gt=0, gu=gr.childNodes.length-1;gt<=gu;gt++)gs.push(gr.childNodes[gt]);return gs;}
function ds(gr, gs, gt){ let gu;if(gt.parentNode===gr){ const gv=gt.nextSibling;let gw=x(gv, null)?null:gv;gu=gs===gw;} else gu=false;if(!gu)gr.insertBefore(gt, gs);}
function dt(gr, gs){ const gt=globalThis.document.querySelectorAll(gr);for(let gu=0, gv=gt.length-1;gu<=gv;gu++)gs(gt[gu]);}
function du(gr, gs){ if(gs.parentNode===gr)gr.removeChild(gs);}
function dv(gr){ return dw((gs) => gs, gr);}
function dw(gr, gs){ return dx(gr, ea(bq(gs)));}
function dx(gr, gs){ return new J("New", gr, gs);}
function dy(gr){ return{$:5, $0:gr};}
function dz(gr, gs){ return{$:0, $0:gr, $1:gs};}
function dA(gr){ return{$:2, $0:gr};}
function dB(gr){ return{$:6, $0:gr};}
function dC(gr){ return{$:1, $0:gr};}
function dD(gr){ return{$:4, $0:gr};}
function dE(gr){ let gs;const gt=gr.s;if(gt==null||(gt!=null&&gt.$==2?(gs=gt.$1,false):gt!=null&&gt.$==3?(gs=gt.$1,false):true))void 0;else { gr.s=null;for(let gv=0, gw=bf(gs)-1;gv<=gw;gv++){ const gu=be(gs, gv);if(typeof gu=="object")(((gx) => { dE(gx);})(gu));else gu();} } }
class dF extends m { equals;hash;data;count;SAdd(gr){ return this.add(gr);} Contains(gr){ const gs=this.data[this.hash(gr)];return gs==null?false:this.arrContains(gr, gs);} add(gr){ const gs=this.hash(gr);const gt=this.data[gs];return gt==null?(this.data[gs]=[gr],this.count=this.count+1,true):this.arrContains(gr, gt)?false:(gt.push(gr),this.count=this.count+1,true);} arrContains(gr, gs){ let gt=true;let gu=0;const gv=gs.length;while(gt&&gu<gv)if(this.equals.apply(null, [gs[gu], gr]))gt=false;else gu=gu+1;return!gt;} GetEnumerator(){ return cJ(fp(this.data));} ExceptWith(gr){ const gs=cJ(gr);try { while(gs.MoveNext())this.Remove(gs.Current);} finally { if(typeof gs=="object"&&a(gs))gs.Dispose();} } get Count(){ return this.count;} IntersectWith(gr){ const gs=new dF("New_4", gr, this.equals, this.hash);const gt=fp(this.data);for(let gv=0, gw=gt.length-1;gv<=gw;gv++){ const gu=gt[gv];if(!gs.Contains(gu))this.Remove(gu);} } Remove(gr){ const gs=this.data[this.hash(gr)];return gs==null?false:this.arrRemove(gr, gs)&&(this.count=this.count-1,true);} CopyTo(gr, gs){ const gt=fp(this.data);for(let gu=0, gv=gt.length-1;gu<=gv;gu++)bh(gr, gu+gs, gt[gu]);} arrRemove(gr, gs){ let gt=true;let gu=0;const gv=gs.length;while(gt&&gu<gv)if(this.equals.apply(null, [gs[gu], gr])){ gs.splice(gu, 1);gt=false;} else gu=gu+1;return!gt;} static New_3(){ return new this("New_3");} static New_4(gr, gs, gt){ return new this("New_4", gr, gs, gt);} static New_2(gr){ return new this("New_2", gr);} constructor(gr, gs, gt, gu){ if(gr=="New_3"){ gr="New_4";gs=[];gt=x;gu=A;} let gv;if(gr=="New_2"){ gv=gs;gr="New_4";gs=gv;gt=x;gu=A;} if(gr=="New_4"){ const gw=gs;const gx=gt;const gy=gu;super();this.equals=gx;this.hash=gy;this.data=[];this.count=0;const gz=cJ(gw);try { while(gz.MoveNext())this.add(gz.Current);} finally { if(typeof gz=="object"&&a(gz))gz.Dispose();} } } }
let dG=gj((gr) => class gs extends m { static { dG=gr(this);} static init;id;vars;static initialized;static instances;static GetOrAddHoleFor(gt, gu, gv){ let gw;const gx=dG.GetHolesFor(gt);const gy=(gw=null,[gx.TryGetValue(gu, {get:() => gw, set:(gA) => { gw=gA;}}), gw]);if(gy[0])return gy[1];else { const gz=gv();gx.set_Item(gu, gz);return gz;} } static GetHolesFor(gt){ let gu;const gv=(gu=null,[dG.initialized.TryGetValue(gt, {get:() => gu, set:(gx) => { gu=gx;}}), gu]);if(gv[0])return gv[1];else { const gw=new cY("New_5");dG.initialized.set_Item(gt, gw);return gw;} } static { dG.initialized=new cY("New_5");dG.instances=new cY("New_5");} });
class dH extends bj { name;fillWith;get Name(){ return this.name;} ForTextView(){ return bo(cw(String, this.fillWith.View));} AddAttribute(gr, gs){(gr(gs))(cn(this.fillWith));} get AsChoiceView(){ return fh(cw(String, this.fillWith.View));} constructor(gr, gs){ super();this.name=gr;this.fillWith=gs;} }
class dI extends bj { name;fillWith;get Name(){ return this.name;} ForTextView(){ return bo(cw(String, this.fillWith.View));} AddAttribute(gr, gs){(gr(gs))(co(this.fillWith));} get AsChoiceView(){ return fh(cw(String, this.fillWith.View));} constructor(gr, gs){ super();this.name=gr;this.fillWith=gs;} }
class dJ extends bj { name;fillWith;get Name(){ return this.name;} ForTextView(){ return bo(cw((gr) =>(new Date(gr)).toLocaleString(), this.fillWith.View));} AddAttribute(gr, gs){(gr(gs))(cp(this.fillWith));} get AsChoiceView(){ return fh(cw((gr) =>(new Date(gr)).toLocaleString(), this.fillWith.View));} constructor(gr, gs){ super();this.name=gr;this.fillWith=gs;} }
class dK extends bj { name;fillWith;get Name(){ return this.name;} ForTextView(){ return bo(cw(String, this.fillWith.View));} AddAttribute(gr, gs){(gr(gs))(cq(this.fillWith));} get AsChoiceView(){ return fh(cw(String, this.fillWith.View));} constructor(gr, gs){ super();this.name=gr;this.fillWith=gs;} }
class dL extends bj { name;fillWith;get Name(){ return this.name;} get Value(){ return this.fillWith;} constructor(gr, gs){ super();this.name=gr;this.fillWith=gs;} }
class dM extends bj { name;fillWith;get Name(){ return this.name;} ForTextView(){ return bo(cw((gr) => eD(",", gr), this.fillWith.View));} AddAttribute(gr, gs){(gr(gs))(cr(this.fillWith));} get AsChoiceView(){ return fh(cw(String, this.fillWith.View));} constructor(gr, gs){ super();this.name=gr;this.fillWith=gs;} }
class dN extends m { }
let dO=gj((gr) => class gs { static { dO=gr(this);} static RenderedFullDocTemplate;static TextHoleRE;static GlobalHoles;static LocalTemplatesLoaded;static LoadedTemplates;static { this.LoadedTemplates=new cY("New_5");this.LocalTemplatesLoaded=false;this.GlobalHoles=new cY("New_5");this.TextHoleRE="\\${([^}]+)}";this.RenderedFullDocTemplate=null;} });
function dP(gr, gs){ dS(gr, gs, null);}
function dQ(){ return{Current:null, Dirty:false};}
function dR(gr, gs){ gr.Current=gs;gr.Dirty=true;}
function dS(gr, gs, gt){ while(true){ if(gs!=null&&gs.$==1)return dW(gr, gs.$0.El, gt);else if(gs!=null&&gs.$==2){ const gu=gs.$0;gu.Dirty=false;gs=gu.Current;} else if(gs==null)return gt;else if(gs!=null&&gs.$==4)return dW(gr, gs.$0.Text, gt);else if(gs!=null&&gs.$==5)return dW(gr, gs.$0, gt);else if(gs!=null&&gs.$==6)return by((gx, gy) =>((((gz) =>(gA) =>(gB) => gA==null||gA.constructor===Object?dS(gz, gA, gB):dW(gz, gA, gB))(gr))(gx))(gy), gs.$0.Els, gt);else { const gv=gs.$1;const gw=gs.$0;gs=gw;gt=dS(gr, gv, gt);} } }
function dT(gr, gs){ return eL(eM(), dX(gr, c9(), gs));}
function dU(gr, gs, gt){ if(eq()){ const gu=null;return eT(() => { const gv=eN(gt);const gw=d1(gs, gv);const gx=d0(gs, gv);return eU(er(es(gw, dZ(gs, gv))), () => eU(dY(gr, gs), () => eU(er(gx), () => { gs.PreviousNodes=gv;return eX(null);})));});} else return dY(gr, gs);}
function dV(gr, gs, gt){ const gu=eN(gt);d2(gr, gs.Top);gs.PreviousNodes=gu;}
function dW(gr, gs, gt){ ds(gr, gt, gs);return gs;}
function dX(gr, gs, gt){ dP(gr, gt);const gu=c_(gr, gs);return eb.New(gu, gt, null, gr, cZ(), gn(gu.OnAfterRender));}
function dY(gr, gs){ if(ex()){ const gt=(gu) => { requestAnimationFrame(() => { d2(gr, gs.Top);gu();});};return e2((gu, gv, gw) => gt.apply(null, [gu, gv, gw]));} else { d2(gr, gs.Top);return eX(null);} }
function dZ(gr, gs){ return ev(bp((gt) => db(gt.Attr), eR(eQ(gs, eP((gt) => da(gt.Attr), gr.PreviousNodes)))));}
function d0(gr, gs){ return ev(bp((gt) => dd(gt.Attr), eR(eQ(gr.PreviousNodes, eP((gt) => dc(gt.Attr), gs)))));}
function d1(gr, gs){ const gt=(gv) => de(gv.Attr);const gu=(gv) => eP(gt, gv);return ev(bp((gv) => df(gv.Attr), eR(eS(gu(gr.PreviousNodes), gu(gs)))));}
function d2(gr, gs){!gr?d4(gs):void 0;d5(gs.Children);d6(gs);}
function d3(gr, gs){ const gt=gr.parentNode;const gu=globalThis.document.createTextNode("");gt.insertBefore(gu, gr);d9(gr, gs);return gu;}
function d4(gr){ function gs(gt){ function gu(gv){ while(true){ if(gv!=null&&gv.$==0){ const gw=gv.$1;const gx=gv.$0;if(gu(gx))return true;else gv=gw;} else if(gv!=null&&gv.$==2){ const gy=gv.$0;if(gy.Dirty)return true;else gv=gy.Current;} else if(gv!=null&&gv.$==6){ const gz=gv.$0;return gz.Dirty||bv(gs, gz.Holes);} else return false;} } return gu(gt.Children);} dj(gr.El, gr.Attr);if(gs(gr))d_(gr);}
function d5(gr){ while(true){ if(gr!=null&&gr.$==1)return d2(false, gr.$0);else if(gr!=null&&gr.$==2){ const gs=gr.$0;gr=gs.Current;} else if(gr==null)return null;else if(gr!=null&&gr.$==5)return null;else if(gr!=null&&gr.$==4){ const gt=gr.$0;return gt.Dirty?(gt.Text.nodeValue=gt.Value,gt.Dirty=false):null;} else if(gr!=null&&gr.$==6){ const gu=gr.$0;bx((gx) => { d2(false, gx);}, gu.Holes);bx((gx) => { dj(gx[0], gx[1]);}, gu.Attrs);return d6(gu);} else { const gv=gr.$1;const gw=gr.$0;d5(gw);gr=gv;} } }
function d6(gr){ const gs=gn(gr.Render);if(gs!=null&&gs.$==1){ gs.$0(gr.El);gm(gr, "Render", null);} }
function d7(){ return{Text:globalThis.document.createTextNode(""), Dirty:false, Value:""};}
function d8(gr, gs){ gr.Value=gs;gr.Dirty=true;}
function d9(gr, gs){ dS(gr.parentNode, gs, gr);}
function d_(gr){ const gs=gr.El;function gt(gx, gy){ while(true){ if(gx!=null&&gx.$==1)return gx.$0.El;else if(gx!=null&&gx.$==2){ const gz=gx.$0;if(gz.Dirty){ gz.Dirty=false;return dS(gs, gz.Current, gy);} else gx=gz.Current;} else if(gx==null)return gy;else if(gx!=null&&gx.$==4)return gx.$0.Text;else if(gx!=null&&gx.$==5)return gx.$0;else if(gx!=null&&gx.$==6){ const gA=gx.$0;if(gA.Dirty)gA.Dirty=false;return by((gD, gE) => gD==null||gD.constructor===Object?gt(gD, gE):gD, gA.Els, gy);} else { const gB=gx.$1;const gC=gx.$0;gx=gC;gy=gt(gB, gy);} } } const gu=gr.El;f8((gx) => { du(gu, gx);}, f7(f9(gr), f6(gr.El, gn(gr.Delimiters))));let gv=gr.Children;const gw=gn(gr.Delimiters);gt(gv, gw!=null&&gw.$==1?gw.$0[1]:null);}
class d$ extends m { push;value;dirty;updates;get NChanged(){ return this.updates;} NGetExitAnim(gr){ return ew();} NGetEnterAnim(gr){ return ew();} NGetChangeAnim(gr){ return ew();} NSync(gr){ if(this.dirty){(this.push(gr))(this.value);this.dirty=false;} } constructor(gr, gs){ super();this.push=gs;this.value=void 0;this.dirty=false;this.updates=cw((gt) => { this.value=gt;this.dirty=true;}, gr);} }
function ea(gr){ return new eB(gr);}
class eb { Attr;Children;Delimiters;El;ElKey;Render;Equals(gr){ return this.ElKey===gr.ElKey;} GetHashCode(){ return this.ElKey;} static New(gr, gs, gt, gu, gv, gw){ const gx={Attr:gr, Children:gs, El:gu, ElKey:gv};let gy=(gm(gx, "Delimiters", gt),gm(gx, "Render", gw),gx);return gk(eb, gy);} }
function ec(){ throw new fs("New");}
function ed(gr){ let gs=null;let gt=0;const gu=gr.textContent;const gv=new RegExp(bU(), "g");while(gs=gv.exec(gu),gs!==null){ gr.parentNode.insertBefore(globalThis.document.createTextNode(el(gu, bo(gt), bo(gv.lastIndex-be(gs, 0).length-1))), gr);gt=gv.lastIndex;const gw=globalThis.document.createElement("span");gw.setAttribute("ws-replace", be(gs, 1).toLowerCase());gr.parentNode.insertBefore(gw, gr);} gv.lastIndex=0;gr.textContent=el(gu, bo(gt), null);}
function ee(gr){ console.warn("Instantiating non-loaded template", gr);}
function ef(gr, gs, gt){ const gu=gr.querySelector("[ws-replace]");return x(gu, null)?(console.warn("Filling non-existent text hole", gt),null):(gu.parentNode.replaceChild(globalThis.document.createTextNode(gs), gu),bo(gu.getAttribute("ws-replace")));}
function eg(gr, gs){ const gt=(gu) => { bQ(gr, "["+gu+"]", (gv) => { if(!gs.Contains(gv.getAttribute(gu)))gv.removeAttribute(gu);});};gt("ws-attr");gt("ws-onafterrender");gt("ws-var");bQ(gr, "[ws-hole]", (gu) => { if(!gs.Contains(gu.getAttribute("ws-hole"))){ gu.removeAttribute("ws-hole");while(gu.hasChildNodes())gu.removeChild(gu.lastChild);} });bQ(gr, "[ws-replace]", (gu) => { if(!gs.Contains(gu.getAttribute("ws-replace")))gu.parentNode.removeChild(gu);});bQ(gr, "[ws-on]", (gu) => { gu.setAttribute("ws-on", eD(" ", bw((gv) => gs.Contains(be(eE(gv, [":"], 1), 1)), eE(gu.getAttribute("ws-on"), [" "], 1))));});bQ(gr, "[ws-attr-holes]", (gu) => { const gv=eE(gu.getAttribute("ws-attr-holes"), [" "], 1);for(let gz=0, gA=gv.length-1;gz<=gA;gz++){ const gw=be(gv, gz);let gx=new RegExp(bU(), "g");let gy=gu.getAttribute(gw).replace(gx, (gB, gC) => gs.Contains(gC)?gB:"");gu.setAttribute(gw, gy);} });}
function eh(gr, gs){ ek(gs);const gt=gs.nodeName.toLowerCase();const gu=gr.querySelector("[ws-attr="+gt+"]");if(x(gu, null))console.warn("Filling non-existent attr hole", gt);else { gu.removeAttribute("ws-attr");for(let gw=0, gx=gs.attributes.length-1;gw<=gx;gw++){ const gv=gs.attributes.item(gw);if(gv.name=="class"&&gu.hasAttribute("class"))gu.setAttribute("class", gu.getAttribute("class")+" "+gv.nodeValue);else gu.setAttribute(gv.name, gv.nodeValue);} } }
function ei(gr, gs){ const gt=(gu) => { bQ(gr, "["+gu+"]", (gv) => { let gw;const gx=(gw=null,[gs.TryGetValue(gv.getAttribute(gu).toLowerCase(), {get:() => gw, set:(gy) => { gw=gy;}}), gw]);if(gx[0])gv.setAttribute(gu, gx[1]);});};gt("ws-hole");gt("ws-replace");gt("ws-attr");gt("ws-onafterrender");gt("ws-var");bQ(gr, "[ws-on]", (gu) => { gu.setAttribute("ws-on", eD(" ", bp((gv) => { let gw;const gx=eE(gv, [":"], 1);const gy=(gw=null,[gs.TryGetValue(be(gx, 1), {get:() => gw, set:(gz) => { gw=gz;}}), gw]);return gy[0]?be(gx, 0)+":"+gy[1]:gv;}, eE(gu.getAttribute("ws-on"), [" "], 1))));});bQ(gr, "[ws-attr-holes]", (gu) => { const gv=eE(gu.getAttribute("ws-attr-holes"), [" "], 1);for(let gw=0, gx=gv.length-1;gw<=gx;gw++)((() => { const gy=be(gv, gw);return gu.setAttribute(gy, U((gz, gA) => { const gB=k(gA);return gz.replace(new RegExp("\\${"+gB[0]+"}", "ig"), "${"+gB[1]+"}");}, gu.getAttribute(gy), gs));})());});}
function ej(gr, gs, gt){ while(true){ if(gr.hasChildNodes())gt=gs.insertBefore(gr.lastChild, gt);else return null;} }
function ek(gr){ const gs=gr.attributes;const gt=[];const gu=[];const gv=[];for(let gA=0, gB=gs.length-1;gA<=gB;gA++){ const gw=gs.item(gA);if(eF(gw.nodeName, "ws-on")&&gw.nodeName!="ws-onafterrender"&&gw.nodeName!="ws-on"){ gt.push(gw.nodeName);gu.push(el(gw.nodeName, bo("ws-on".length), null)+":"+gw.nodeValue.toLowerCase());} else if(!eF(gw.nodeName, "ws-")&&(new RegExp(bU())).test(gw.nodeValue)){ let gx=new RegExp(bU(), "g");let gy=gw.nodeValue.replace(gx, (gC, gD) =>"${"+gD.toLowerCase()+"}");gw.nodeValue=gy;gv.push(gw.nodeName);} else void 0;} if(!(gu.length==0))gr.setAttribute("ws-on", eD(" ", gu));if(!(gv.length==0))gr.setAttribute("ws-attr-holes", eD(" ", gv));const gz=(gC) => { const gD=gr.getAttribute(gC);if(gD==null){ } else gr.setAttribute(gC, gD.toLowerCase());};gz("ws-hole");gz("ws-replace");gz("ws-attr");gz("ws-onafterrender");gz("ws-var");bx((gC) => { gr.removeAttribute(gC);}, gt);}
function el(gr, gs, gt){ if(gs==null){ if(gt!=null&&gt.$==1){ const gu=gt.$0;return gu<0?"":gr.slice(0, gu+1);} else return"";} else if(gt==null)return gr.slice(gs.$0);else { const gv=gt.$0;return gv<0?"":gr.slice(gs.$0, gv+1);} }
function em(){ return j("The input sequence has an insufficient number of elements.");}
function en(gr, gs){ let gt=true;let gu=0;while(gt&&gu<bf(gs))if(x(gs[gu], gr))gt=false;else gu=gu+1;return!gt;}
function eo(){ return j("The input must be non-negative.");}
class ep extends m { d;GetEnumerator(){ return cJ(P((gr) => gr.K, this.d));} constructor(gr){ super();this.d=gr;} }
function eq(){ return e4();}
function er(gr){ const gs=null;return eT(() => eU(et(() => { }, e5(gr)), () => { e6(gr);return eX(null);}));}
function es(gr, gs){ return eu(fl(gr.$0, gs.$0));}
function et(gr, gs){ const gt=gs.Duration;if(gt===0)return eV();else { const gu=(gv) => { function gw(gx){ return(gy) => { const gz=gy-gx;gs.Compute(gz);gr();return gz<=gt?void requestAnimationFrame((gA) => {(gw(gx))(gA);}):gv();};} requestAnimationFrame((gx) => {(gw(gx))(gx);});};return e2((gv, gw, gx) => gu.apply(null, [gv, gw, gx]));} }
function eu(gr){ return{$:0, $0:gr};}
function ev(gr){ return eu(fn(P(e8, gr)));}
function ew(){ return eu(fo());}
function ex(){ return fa.BatchUpdatesEnabled;}
function ey(gr){ const gs=[0];function gt(){ const gu=null;return eT(() => eU(gr, () => { const gv=gs[0];return x(gv, 1)?(gs[0]=0,eV()):x(gv, 2)?(gs[0]=1,gt()):eV();}));} return() => { const gu=gs[0];if(x(gu, 0)){ gs[0]=1;eW(gt(), null);} else x(gu, 1)?gs[0]=2:void 0;};}
let ez=gj((gr) => class gs { static { ez=gr(this);} static counter;static { this.counter=0;} });
class eA extends bc { docNode_1;updates_1;elt;rvUpdates;static New(gr, gs, gt){ const gu=dX(gr, gs, gt.docNode);const gv=fb.Create(gt.updates);return new eA(dC(gu), cz(c7(gu.Attr), gv.v), gr, gv);} static TreeNode(gr, gs){ const gt=fb.Create(gs);const gu=bp((gx) => c7(gx[1]), gr.Attrs);let gv=cQ(cx(), cz, gu);let gw=cz(gv, gt.v);return new eA(dB(gr), gw, be(gr.Els, 0), gt);} constructor(gr, gs, gt, gu){ super(gr, gs);this.docNode_1=gr;this.updates_1=gs;this.elt=gt;this.rvUpdates=gu;} }
class eB extends m { init;SRemoveIf(gr, gs){ return bw((gt) =>!gr(gt), gs);} SSetAt(gr, gs, gt){ bh(gt, gr, gs);return gt;} SAppend(gr, gs){ gs.push(gr);return gs;} SInit(){ return this.init;} constructor(gr){ super();this.init=gr;} }
function eC(gr, gs, gt, gu){ const gv={DynElem:gr, DynFlags:gs, DynNodes:gt};gm(gv, "OnAfterRender", gu);return gv;}
function eD(gr, gs){ return bq(gs).join(gr);}
function eE(gr, gs, gt){ return eG(gr, new RegExp("["+eH(gs.join(""))+"]"), gt);}
function eF(gr, gs){ return gr.substring(0, gs.length)==gs;}
function eG(gr, gs, gt){ return gt===1?bw((gu) => gu!=="", eI(gr, gs)):eI(gr, gs);}
function eH(gr){ return gr.replace(new RegExp("[-\\/\\\\^$*+?.()|[\\]{}]", "g"), "\\$&");}
function eI(gr, gs){ return gr.split(gs);}
function eJ(gr, gs){ return u0034(gr, eK(gs));}
function eK(gr){ return gr==null?"":gr;}
function eL(gr, gs){ return{PreviousNodes:gr, Top:gs};}
function eM(){ return eO(new dF("New_3"));}
function eN(gr){ const gs=[];function gt(gw, gx){ while(true)switch(gw){ case 0:if(gx!=null&&gx.$==0){ const gy=gx.$1;const gz=gx.$0;gt(0, gz);gx=gy;} else if(gx!=null&&gx.$==1){ const gA=gx.$0;gx=gA;gw=1;} else if(gx!=null&&gx.$==2){ const gB=gx.$0;gx=gB.Current;} else if(gx!=null&&gx.$==6){ const gC=gx.$0.Holes;return(((gD) =>(gE) => { bx(gD, gE);})(gv))(gC);} else return null;break;case 1:gs.push(gx);gx=gx.Children;gw=0;break;} } function gu(gw){ return gt(0, gw);} function gv(gw){ return gt(1, gw);} gu(gr);return eO(new dF("New_2", gs));}
function eO(gr){ return{$:0, $0:gr};}
function eP(gr, gs){ return eO(fB(gr, gs.$0));}
function eQ(gr, gs){ return eO(fC(gr.$0, gs.$0));}
function eR(gr){ return fD(gr.$0);}
function eS(gr, gs){ return eO(fE(gr.$0, gs.$0));}
function eT(gr){ return(gs) => { try {(gr())(gs);} catch(gt){ gs.k(fw(gt));} };}
function eU(gr, gs){ return eZ((gt) => { gr(fv((gu) => { if(gu.$==0){ const gv=gu.$0;eY().Fork(() => { try {(gs(gv))(gt);} catch(gw){ gt.k(fw(gw));} });} else eY().Fork(() => { gt.k(gu);});}, gt.ct));});}
function eV(){ return fz.Zero;}
function eW(gr, gs){ const gt=(e0())[0];const gu=gs==null?gt:gs.$0;eY().Fork(() => { if(!gu.c)gr(fv((gv) => { if(gv.$==1)e1(gv.$0);}, gu));});}
function eX(gr){ return(gs) => { gs.k(fx(gr));};}
function eY(){ return fz.scheduler;}
function eZ(gr){ return(gs) => { if(gs.ct.c)e3(gs);else gr(gs);};}
function e0(){ return fz.defCTS;}
function e1(gr){ console.log("WebSharper: Uncaught asynchronous exception", gr);}
function e2(gr){ return(gs) => { const gt=[false];const gu=(gv) => { if(gt[0])j("A continuation provided by Async.FromContinuations was invoked multiple times");else { gt[0]=true;eY().Fork(gv);} };gr((gv) => { gu(() => { gs.k(fx(gv));});}, (gv) => { gu(() => { gs.k(fw(gv));});}, (gv) => { gu(() => { gs.k(fy(gv));});});};}
function e3(gr){ gr.k(fy(new gc("New", gr.ct)));}
function e4(){ return fk.UseAnimations;}
function e5(gr){ return e7(bt((gs) => gs.$==1?bo(gs.$0):null, fm(gr.$0)));}
function e6(gr){ bx((gs) => { if(gs.$==0)gs.$0();}, fm(gr.$0));}
function e7(gr){ const gs=cP(gr);const gt=bf(gs);if(gt===0)return e9();else if(gt===1)return be(gs, 0);else { const gu=Y(P((gw) => gw.Duration, gs));const gv=bp((gw) => e$(gu, gw), gs);return e_(gu, (gw) => { bx((gx) => { gx.Compute(gw);}, gv);});} }
function e8(gr){ return gr.$0;}
function e9(gr){ return e_(0, () => gr);}
function e_(gr, gs){ return{Compute:gs, Duration:gr};}
function e$(gr, gs){ const gt=gs.Compute;const gu=gs.Duration;const gv=gd(() => gs.Compute(gs.Duration));return{Compute:(gw) => gw>=gu?gv.f():gt(gw), Duration:gr};}
let fa=gj((gr) => class gs { static { fa=gr(this);} static BatchUpdatesEnabled;static { this.BatchUpdatesEnabled=true;} });
class fb { c;s;v;static Create(gr){ let gs;gs=null;gs=fb.New(gr, null, () => { let gt;gt=gs.s;return gt===null?(gt=b8(gs.c()),gs.s=gt,bY(gt, () => { gs.s=null;}),gt):gt;});return gs;} static New(gr, gs, gt){ return gk(fb, {c:gr, s:gs, v:gt});} }
class fc extends bj { name;fillWith;get Value(){ return this.fillWith;} get Name(){ return this.name;} }
class fd extends bj { name;fillWith;get Value(){ return this.fillWith;} get Name(){ return this.name;} }
class fe extends bj { name;fillWith;get Value(){ return this.fillWith;} get Name(){ return this.name;} }
class ff extends bj { name;fillWith;get Value(){ return this.fillWith;} get Name(){ return this.name;} }
function fg(gr){ return{$:0, $0:gr};}
function fh(gr){ return{$:1, $0:gr};}
class fi extends m { d;GetEnumerator(){ return cJ(P((gr) => gr.V, this.d));} constructor(gr){ super();this.d=gr;} }
let fj=gj((gr) => class gs { static { fj=gr(this);} static defaultWrap;static wrapMap;static rhtml;static rtagName;static rxhtmlTag;static { this.rxhtmlTag=new RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>", "gi");this.rtagName=new RegExp("<([\\w:]+)");this.rhtml=new RegExp("<|&#?\\w+;");const gt=[1, "<table>", "</table>"];let gu=Object.fromEntries([["option", [1, "<select multiple='multiple'>", "</select>"]], ["legend", [1, "<fieldset>", "</fieldset>"]], ["area", [1, "<map>", "</map>"]], ["param", [1, "<object>", "</object>"]], ["thead", gt], ["tbody", gt], ["tfoot", gt], ["tr", [2, "<table><tbody>", "</tbody></table>"]], ["col", [2, "<table><colgroup>", "</colgoup></table>"]], ["td", [3, "<table><tbody><tr>", "</tr></tbody></table>"]]]);this.wrapMap=gu;this.defaultWrap=[0, "", ""];} });
let fk=gj((gr) => class gs { static { fk=gr(this);} static UseAnimations;static CubicInOut;static { this.CubicInOut=fu.Custom((gt) => { const gu=gt*gt;return 3*gu-2*(gu*gt);});this.UseAnimations=true;} });
function fl(gr, gs){ return gr.$==0?gs:gs.$==0?gr:{$:2, $0:gr, $1:gs};}
function fm(gr){ const gs=[];function gt(gu){ while(true){ if(gu.$==1)return gs.push(gu.$0);else if(gu.$==2){ const gv=gu.$1;const gw=gu.$0;gt(gw);gu=gv;} else return gu.$==3?bx((gx) => { gs.push(gx);}, gu.$0):null;} } gt(gr);return gs.slice(0);}
function fn(gr){ const gs=cP(gr);return cQ(fo(), fl, gs);}
function fo(){ return gg.Empty;}
function fp(gr){ let gs=[];let gt;for(var gu in gr)gs.push.apply(gs, gr[gu]);return gs;}
let fq=gj((gr) => class gs { static { fq=gr(this);} static FloatApplyChecked;static FloatGetChecked;static FloatSetChecked;static FloatApplyUnchecked;static FloatGetUnchecked;static FloatSetUnchecked;static IntApplyChecked;static IntGetChecked;static IntSetChecked;static IntApplyUnchecked;static IntGetUnchecked;static IntSetUnchecked;static FileApplyUnchecked;static FileGetUnchecked;static FileSetUnchecked;static DateTimeApplyUnchecked;static DateTimeGetUnchecked;static DateTimeSetUnchecked;static StringListApply;static StringListGet;static StringListSet;static StringApply;static StringGet;static StringSet;static BoolCheckedApply;static EmptyAttr;static { this.EmptyAttr=null;this.BoolCheckedApply=(gJ) =>[(gK) => { gK.addEventListener("change", () => gJ.Get()!=gK.checked?gJ.Set(gK.checked):null);}, (gK) =>(gL) => gL!=null&&gL.$==1?void(gK.checked=gL.$0):null, cw(bo, gJ.View)];this.StringSet=(gJ) =>(gK) => { gJ.value=gK;};this.StringGet=(gJ) => bo(gJ.value);const gt=fH();const gu=fG();this.StringApply=(gJ) => fF(gt, gu, gJ);this.StringListSet=(gJ) =>(gK) => { const gL=gJ.options;for(let gM=0, gN=gL.length-1;gM<=gN;gM++)((() => { const gO=gL.item(gM);gO.selected=en(gO.value, gK);})());};this.StringListGet=(gJ) => { const gK=gJ.selectedOptions;return bo(bq(W(() => X((gL) =>[gK.item(gL).value], l(0, gK.length-1)))));};const gv=fJ();const gw=fI();this.StringListApply=(gJ) => fF(gv, gw, gJ);this.DateTimeSetUnchecked=(gJ) =>(gK) => { gJ.value=(new Date(gK)).toLocaleString();};this.DateTimeGetUnchecked=(gJ) => { let gK;let gL;const gM=gJ.value;if(f3(gM))return bo(-8640000000000000);else { gK=0;const gN=ga(gM);let gO=gN!=null&&gN.$==1&&(gK=gN.$0,true);gL=[gO, gK];return gL[0]?bo(gL[1]):null;} };const gx=fL();const gy=fK();this.DateTimeApplyUnchecked=(gJ) => fF(gx, gy, gJ);this.FileSetUnchecked=() =>() => null;this.FileGetUnchecked=(gJ) => { const gK=gJ.files;return bo(bq(W(() => P((gL) => gK.item(gL), l(0, gK.length-1)))));};const gz=fO();const gA=fN();this.FileApplyUnchecked=(gJ) => fM(gz, gA, gJ);this.IntSetUnchecked=(gJ) =>(gK) => { gJ.value=String(gK);};this.IntGetUnchecked=(gJ) => { const gK=gJ.value;if(f3(gK))return bo(0);else { const gL=+gK;return gL!==gL>>0?null:bo(gL);} };const gB=fQ();const gC=fP();this.IntApplyUnchecked=(gJ) => fF(gB, gC, gJ);this.IntSetChecked=(gJ) =>(gK) => { const gL=gK.Input;return gJ.value!=gL?void(gJ.value=gL):null;};this.IntGetChecked=(gJ) => { let gK;let gL;const gM=gJ.value;if(f3(gM))gK=(gJ.checkValidity?gJ.checkValidity():true)?f4.Blank(gM):f4.Invalid(gM);else { const gN=(gL=0,[cI(gM, {get:() => gL, set:(gO) => { gL=gO;}}), gL]);gK=gN[0]?f4.Valid(gN[1], gM):f4.Invalid(gM);} return bo(gK);};const gD=fS();const gE=fR();this.IntApplyChecked=(gJ) => fF(gD, gE, gJ);this.FloatSetUnchecked=(gJ) =>(gK) => { gJ.value=String(gK);};this.FloatGetUnchecked=(gJ) => { const gK=gJ.value;if(f3(gK))return bo(0);else { const gL=+gK;return isNaN(gL)?null:bo(gL);} };const gF=fU();const gG=fT();this.FloatApplyUnchecked=(gJ) => fF(gF, gG, gJ);this.FloatSetChecked=(gJ) =>(gK) => { const gL=gK.Input;return gJ.value!=gL?void(gJ.value=gL):null;};this.FloatGetChecked=(gJ) => { let gK;const gL=gJ.value;if(f3(gL))gK=(gJ.checkValidity?gJ.checkValidity():true)?f4.Blank(gL):f4.Invalid(gL);else { const gM=+gL;gK=isNaN(gM)?f4.Invalid(gL):f4.Valid(gM, gL);} return bo(gK);};const gH=fW();const gI=fV();this.FloatApplyChecked=(gJ) => fF(gH, gI, gJ);} });
function fr(gr){ gr.splice(0, bf(gr));}
class fs extends Error { static New(){ return new this("New");} static New_1(gr){ return new this("New_1", gr);} constructor(gr, gs){ if(gr=="New"){ gr="New_1";gs="The given key was not present in the dictionary.";} if(gr=="New_1"){ const gt=gs;super(gt);} } }
class ft extends m { idle;robin;Fork(gr){ this.robin.push(gr);this.idle?(this.idle=false,setTimeout(() => { this.tick();}, 0)):void 0;} tick(){ const gr=Date.now();let gs=true;while(gs)if(this.robin.length===0){ this.idle=true;gs=false;} else {(this.robin.shift())();Date.now()-gr>40?(setTimeout(() => { this.tick();}, 0),gs=false):void 0;} } constructor(){ super();this.idle=true;this.robin=[];} }
class fu extends m { transformTime;static Custom(gr){ return new fu(gr);} constructor(gr){ super();this.transformTime=gr;} }
function fv(gr, gs){ return{k:gr, ct:gs};}
function fw(gr){ return{$:1, $0:gr};}
function fx(gr){ return{$:0, $0:gr};}
function fy(gr){ return{$:2, $0:gr};}
let fz=gj((gr) => class gs { static { fz=gr(this);} static GetCT;static Zero;static defCTS;static scheduler;static noneCT;static { this.noneCT=fA(false, []);this.scheduler=new ft();this.defCTS=[new f5()];this.Zero=eX();this.GetCT=(gt) => { gt.k(fx(gt.ct));};} });
function fA(gr, gs){ return{c:gr, r:gs};}
function fB(gr, gs){ return new dF("New_2", bw(gr, fD(gs)));}
function fC(gr, gs){ const gt=new dF("New_2", fD(gs));gt.ExceptWith(fD(gr));return gt;}
function fD(gr){ const gs=bC(gr.Count, void 0);gr.CopyTo(gs, 0);return gs;}
function fE(gr, gs){ const gt=new dF("New_2", fD(gr));gt.IntersectWith(fD(gs));return gt;}
function fF(gr, gs, gt){ let gu;gu=null;return[(gv) => { const gw=() => { gt.UpdateMaybe((gx) => { let gy;gu=gr(gv);return gu!=null&&gu.$==1&&(!x(gu.$0, gx)&&(gy=[gu, gu.$0],true))?gy[0]:null;});};gv.addEventListener("change", gw);gv.addEventListener("input", gw);gv.addEventListener("keypress", gw);}, (gv) => { const gw=gs(gv);return(gx) => gx==null?null:gw(gx.$0);}, cw((gv) => { let gw;return gu!=null&&gu.$==1&&(x(gu.$0, gv)&&(gw=gu.$0,true))?null:bo(gv);}, gt.View)];}
function fG(){ return fq.StringSet;}
function fH(){ return fq.StringGet;}
function fI(){ return fq.StringListSet;}
function fJ(){ return fq.StringListGet;}
function fK(){ return fq.DateTimeSetUnchecked;}
function fL(){ return fq.DateTimeGetUnchecked;}
function fM(gr, gs, gt){ let gu;gu=null;return[(gv) => { gv.addEventListener("change", () => { gt.UpdateMaybe((gw) => { let gx;gu=gr(gv);return gu!=null&&gu.$==1&&(gu.$0!==gw&&(gx=[gu, gu.$0],true))?gx[0]:null;});});}, (gv) => { const gw=gs(gv);return(gx) => gx==null?null:gw(gx.$0);}, cw((gv) => { let gw;return gu!=null&&gu.$==1&&(x(gu.$0, gv)&&(gw=gu.$0,true))?null:bo(gv);}, gt.View)];}
function fN(){ return fq.FileSetUnchecked;}
function fO(){ return fq.FileGetUnchecked;}
function fP(){ return fq.IntSetUnchecked;}
function fQ(){ return fq.IntGetUnchecked;}
function fR(){ return fq.IntSetChecked;}
function fS(){ return fq.IntGetChecked;}
function fT(){ return fq.FloatSetUnchecked;}
function fU(){ return fq.FloatGetUnchecked;}
function fV(){ return fq.FloatSetChecked;}
function fW(){ return fq.FloatGetChecked;}
function fX(){ return fq.StringApply;}
function fY(){ return fq.FloatApplyUnchecked;}
function fZ(){ return fq.BoolCheckedApply;}
function f0(){ return fq.DateTimeApplyUnchecked;}
function f1(){ return fq.FileApplyUnchecked;}
function f2(){ return fq.StringListApply;}
function f3(gr){ return eJ(f$, gr);}
class f4 { get Input(){ return this.$==1?this.$0:this.$==2?this.$0:this.$1;} static Blank(gr){ return gk(f4, {$:2, $0:gr});} static Invalid(gr){ return gk(f4, {$:1, $0:gr});} static Valid(gr, gs){ return gk(f4, {$:0, $0:gr, $1:gs});} }
class f5 extends m { init;c;pending;r;constructor(){ super();this.c=false;this.pending=null;this.r=[];this.init=1;} }
function f6(gr, gs){ let gt;if(gs!=null&&gs.$==1){ const gu=[];gt=gs.$0[0].nextSibling;while(gt!==gs.$0[1]){ gu.push(gt);gt=gt.nextSibling;} return f_(gu);} else { let gv=gr.childNodes.length;const gw=gr.childNodes;let gx=bD(gv, (gy) => gw[gy]);return f_(gx);} }
function f7(gr, gs){ const gt=gr.$0;return f_(bw((gu) => bB((gv) =>!(gu===gv), gt), gs.$0));}
function f8(gr, gs){ bx(gr, gs.$0);}
function f9(gr){ const gs=[];function gt(gu){ while(true){ if(gu!=null&&gu.$==2){ const gv=gu.$0;gu=gv.Current;} else if(gu!=null&&gu.$==1)return gs.push(gu.$0.El);else if(gu==null)return null;else if(gu!=null&&gu.$==5)return gs.push(gu.$0);else if(gu!=null&&gu.$==4)return gs.push(gu.$0.Text);else if(gu!=null&&gu.$==6){ const gw=gu.$0.Els;return(((gz) =>(gA) => { bx(gz, gA);})((gz) => { if(gz==null||gz.constructor===Object)gt(gz);else gs.push(gz);}))(gw);} else { const gx=gu.$1;const gy=gu.$0;gt(gy);gu=gx;} } } gt(gr.Children);return f_(cP(gs));}
function f_(gr){ return{$:0, $0:gr};}
function f$(gr){ return gr.match(new RegExp("\\s"))!==null;}
function ga(gr){ const gs=Date.parse(gr);return isNaN(gs)?null:bo(gs);}
function gb(gr, gs, gt, gu){ const gv=+gr;const gw=gv===gv-gv%1&&gv>=gs&&gv<=gt;if(gw)gu.set(gv);return gw;}
class gc extends Error { ct;static New(gr){ return new this("New", gr);} static New_1(gr, gs, gt){ return new this("New_1", gr, gs, gt);} constructor(gr, gs, gt, gu){ let gv;if(gr=="New"){ gv=gs;gr="New_1";gs="The operation was canceled.";gt=null;gu=gv;} if(gr=="New_1"){ const gw=gs;const gx=gt;const gy=gu;super(gw);this.inner=gx;this.ct=gy;} } }
function gd(gr){ return gh(false, gr, ge);}
function ge(){ const gr=this.v();this.c=true;this.v=gr;this.f=gf;return gr;}
function gf(){ return this.v;}
let gg=gj((gr) => class gs { static { gg=gr(this);} static Empty;static { this.Empty={$:0};} });
function gh(gr, gs, gt){ return{c:gr, v:gs, f:gt};}
gq(() => { b();});
gi();

